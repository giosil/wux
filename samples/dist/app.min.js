WUX.RES.CLOSE="Close",WUX.RES.CANCEL="Cancel",function(i){var s,o=WUX.WUtil;i.showInfo=function(t,e){e=e||"Message",window.BSIT.notify({state:"info",title:e,message:t})},i.showSuccess=function(t,e){e=e||"Message",window.BSIT.notify({state:"success",title:e,message:t})},i.showWarning=function(t,e){e=e||"Message",window.BSIT.notify({state:"warning",title:e,message:t})},i.showError=function(t,e){e=e||"Message",window.BSIT.notify({state:"error",title:e,message:t})},i.confirm=function(t,e){(s=s||new i.DlgConfirm("",t)).onHiddenModal(function(t){e&&e(s.ok)}),s.message=t,s.show()},i.dropdownBtn=function(t,e,i,s){return s='<button id="'+t+'-b" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle '+(s=void 0===s?"btn btn-outline-primary":s)+'">'+e+"</i></button>",s=(s+='<div id="'+t+'-m" tabindex="-1" role="menu" aria-hidden="true" class="dropdown-menu" style="max-height:180px;overflow-y:auto;">')+'<div class="link-list-wrapper"><ul id="'+t+'-l" class="link-list">',i&&(s+=i),s+="</ul></div></div>"},i.addItem=function(t,e){var i;t&&e&&((i=(i=e.getState())||[]).push(t),e.setState(i))},i.updItem=function(t,e,i,s){var n;t&&e&&i&&(!(n=e.getState())||0==n.length||(i=o.indexOf(n,i,t[i]))<0||(n[i]=t,s&&(e.setState([]),setTimeout(function(){e.setState(n)},0)),e.setState(n)))},i.delItem=function(t,e){var i;t<0||(!(i=e.getState())||i.length<=t||(i.splice(t,1),e.setState(i)))},i.delItemBy=function(t,e,i){var s;t&&e&&i&&(!(s=i.getState())||0==s.length||(t=o.indexOf(s,t,e))<0||(s.splice(t,1),i.setState(s)))}}(APP=APP||{});var APP,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},__extends=(!function(t){function e(){this.dat=JSON.parse(localStorage.getItem("mockd")),this.seq=JSON.parse(localStorage.getItem("mocks")),this.dat||(this.dat={}),this.seq||(this.seq={})}e.prototype.clean=function(t){t=this.norm(t),this.dat[t]=[],this.seq[t]=0,localStorage.setItem("mockd",JSON.stringify(this.dat)),localStorage.setItem("mocks",JSON.stringify(this.seq))},e.prototype.clear=function(){this.dat={},this.seq={},localStorage.setItem("mockd",JSON.stringify(this.dat)),localStorage.setItem("mocks",JSON.stringify(this.seq))},e.prototype.inc=function(t){t=this.norm(t);var e=this.seq[t];return e?(this.seq[t]=++e,localStorage.setItem("mocks",JSON.stringify(this.seq)),e):(this.seq[t]=1,localStorage.setItem("mocks",JSON.stringify(this.seq)),1)},e.prototype.find=function(t,e){t=this.norm(t),console.log("[Mock] find "+t,e);var i=this.dat[t];if(!i)return[];if(e){for(var s=[],n=0;n<i.length;n++)this.match(i[n],e)&&s.push(i[n]);return s}return i},e.prototype.ins=function(t,e,i){if(t=this.norm(t),console.log("[Mock] ins "+t,e),!e)return null;var s=(s=this.dat[t])||[];return i&&!e[i]&&(e[i]=this.inc(t)),s.push(e),this.dat[t]=s,localStorage.setItem("mockd",JSON.stringify(this.dat)),e},e.prototype.upd=function(t,e,i){if(t=this.norm(t),console.log("[Mock] upd "+t,e),!e||!i)return null;var s=this.dat[t];if(!s)return null;for(var n=0;n<s.length;n++)if(s[n][i]==e[i])return s[n]=__assign(__assign({},s[n]),e),localStorage.setItem("mockd",JSON.stringify(this.dat)),s[n];return null},e.prototype.del=function(t,e,i){if(t=this.norm(t),console.log("[Mock] del "+t+", "+e+", "+i),!i||!e)return!1;var s=this.dat[t];if(!s)return!1;"object"==typeof e&&(e=e[i]);for(var n=-1,o=0;o<s.length;o++)if(s[o][i]==e){n=o;break}return!(n<0)&&(s.splice(n,1),this.dat[t]=s,localStorage.setItem("mockd",JSON.stringify(this.dat)),0==s.length&&(this.seq[t]=0,localStorage.setItem("mocks",JSON.stringify(this.seq))),!0)},e.prototype.read=function(t,e,i){if(t=this.norm(t),console.log("[Mock] read "+t+", "+e+", "+i),!e||!i)return null;var s=this.dat[t];if(!s)return null;for(var n=0;n<s.length;n++)if(s[n][e]==i)return s[n];return null},e.prototype.match=function(t,e){if(!t)return!1;if(!e)return!0;for(var i in e)if(e.hasOwnProperty(i)){var s=t[i],i=e[i];if("string"==typeof s){if(i&&s.indexOf(i)<0)return!1}else{if(null==s)return null==i||""==i;if(null==i)return!0;if(s!=i)return!1}}return!0},e.prototype.norm=function(t){if(!t)return"default";var e=t.indexOf("/");return(t=0<e?t.substring(0,e):t).trim().toLowerCase()},t.Mock=e}(APP=APP||{}),!function(h){function t(){var t=window.location.hostname,e=(e=window.location.protocol)||"http:";if(!t||0<=t.indexOf("localhost"))return"http://localhost:8081";var i=t.indexOf(".");return i<1?"http://localhost:8081":e+"//api"+t.substring(i)}h.getURLServices=t;i.prototype.before=function(){window.BSIT.showLoader()},i.prototype.after=function(){window.BSIT.hideLoader()},i.prototype.sim=function(i,s,n,o,r){var a=this;console.log("sim("+i+","+s+")",n),i=i?i.toLowerCase():"get",this.before(),setTimeout(function(){a.after();var t,e=null;null!=(e=a.mres?"function"==typeof(t=(t=a.mres[i+"_"+s])||a.mres[i])?t(s,n):t:e)?o&&o(e):r?r({message:"No mock data for "+i+" "+s}):h.showError("No mock data for "+i+" "+s,"Errore simulazione")},500)},i.prototype.get=function(t,e,i,s){this.mock?this.sim("get",t,e,i,s):this._get("GET",t,e,i,s)},i.prototype.delete=function(t,e,i,s){this.mock?this.sim("delete",t,e,i,s):this._send("DELETE",t,e,i,s)},i.prototype.remove=function(t,e,i,s){this.mock?this.sim("delete",t,e,i,s):this._get("DELETE",t,e,i,s)},i.prototype.post=function(t,e,i,s){this.mock?this.sim("post",t,e,i,s):this._send("POST",t,e,i,s)},i.prototype.put=function(t,e,i,s){this.mock?this.sim("put",t,e,i,s):this._send("PUT",t,e,i,s)},i.prototype.patch=function(t,e,i,s){this.mock?this.sim("patch",t,e,i,s):this._send("PATCH",t,e,i,s)},i.prototype._get=function(i,s,t,n,o){var r=this;if(i=i||"GET",t)for(var e in t)null==t[e]&&(t[e]="");var a=t?new URLSearchParams(t).toString():"",a=a?this.url+"/"+s+"?"+a:this.url+"/"+s;this.before(),fetch(a,{method:i,headers:{Authorization:this.auth}}).then(function(e){return r.after(),e.ok||console.error("[HttpClient] "+i+" "+s+": HTTP "+e.status),e.json().then(function(t){return{status:e.status,body:t}})}).then(function(t){var e,i;t&&(e=t.status,t=t.body,200<=e&&e<300?n&&n(t):((i=(t=t||{}).message)||(t.message=i="Errore HTTP "+e),o?o(t):h.showError(i,"Errore servizio")))}).catch(function(t){console.error("[HttpClient] "+i+" "+s+":",t),r.after(),o?o(t):h.showError("Servizio non disponibile.","Errore chiamata")})},i.prototype._send=function(i,s,t,n,o){var r=this,e=(i=i||"POST",this.url+"/"+s);this.before(),fetch(e,{method:i,headers:{"Content-Type":"application/json",Authorization:this.auth},body:JSON.stringify(t)}).then(function(e){return r.after(),e.ok||console.error("[HttpClient] "+i+" "+s+": HTTP "+e.status),e.json().then(function(t){return{status:e.status,body:t}})}).then(function(t){var e,i;t&&(e=t.status,t=t.body,200<=e&&e<300?n&&n(t):((i=(t=t||{}).message)||(t.message=i="Errore HTTP "+e),o?o(t):h.showError(i,"Errore servizio")))}).catch(function(t){console.error("[HttpClient] "+i+" "+s+":",t),r.after(),o?o(t):h.showError("Servizio non disponibile.","Errore chiamata")})};var e=i;function i(t,e){this.url=t||window.location.origin,this.auth=e||""}h.HttpClient=e,h.http=new e(t(),"Basic dXNlcjpwYXNzd29yZA==")}(APP=APP||{}),this&&this.__extends||function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}());!function(n){o=WUX.WComponent,__extends(e,o),e.prototype.add=function(t){return this.state||(this.state=[]),t&&this.state.push(t),this},e.prototype.status=function(t,e){if(void 0===e&&(e="bg-primary"),!this.leid)return this;this.lhtm||(this.lhtm="");var i=document.getElementById(this.leid);return i&&(i.innerHTML=this.lhtm+(t?' <span class="badge '+e+'" style="margin-left:0.5rem;">'+t+"</span>":"")),this},e.prototype.render=function(){this.home||(this.home="index.html"),this._classStyle||(this._classStyle="mb-5 breadcrumb-container"),this.props||(this.props="/");var t=this._style?' style="'+this._style+'"':"",e=this._attributes?" "+this._attributes:"",i='<nav class="'+this._classStyle+'" aria-label="breadcrumb"'+t+e+">";if(i+='<ol class="breadcrumb"><li class="breadcrumb-item"><a href="'+this.home+'">Homepage</a><span class="separator">/</span></li>',this.state)for(var s=this.state.length,n=0;n<s;n++){var o=this.state[n],r=n<s-1?'<span class="separator">/</span>':"";"<"==o[0]?i+='<li class="breadcrumb-item" id="'+this.id+"-"+n+'">'+o+r+"</li>":i+='<li class="breadcrumb-item"><a href="#" id="'+this.id+"-"+n+'">'+o+r+"</a></li>",n==s-1&&(this.lhtm=o,this.leid=this.id+"-"+n)}return i+="</ol></nav>"};var o,t=e;function e(t,e,i,s){t=o.call(this,t||"*","Breadcrumb","/",e,i,s)||this;return t.rootTag="nav",t}n.Breadcrumb=t;r=WUX.WComponent,__extends(i,r),i.prototype.refresh=function(t,e,i,s){if(!i)return this.clear();var n=Math.floor(i/e);return 0<i%e&&n++,this.state=s,this.props=n,this.forceUpdate(),this},i.prototype.clear=function(){return this.state=0,this.props=0,this.forceUpdate(),this},i.prototype.updateState=function(t){this.state&&(e=document.getElementById(this.id+"-"+this.state))&&WUX.removeClassOf(e.parentElement,"active"),r.prototype.updateState.call(this,t=t||1);var e=document.getElementById(this.id+"-"+t);e&&WUX.addClassOf(e.parentElement,"active")},i.prototype.componentDidMount=function(){var i=this;if(this.props<1)this.root.innerHTML='<nav id="'+this.id+'" class="pagination-wrapper" aria-label="Pagination"></nav>';else{var t='<nav id="'+this.id+'" class="pagination-wrapper" aria-label="Pagination">';if(t+='<ul class="pagination">',1==this.state?t+='<li class="page-item disabled">'+this.getBtnPrev()+"</li>":t+='<li class="page-item">'+this.getBtnPrev()+"</li>",0<this.max&&this.props>this.max){var e=this.state-(this.max-2);e<2?e=1:(n=this.props-this.max+1)<e&&(e=n);for(var s=e;s<e+this.max;s++)t+=this.getPageItem(s,s==this.state)}else for(s=1;s<=this.props;s++)t+=this.getPageItem(s,s==this.state);this.state==this.props?t+='<li class="page-item disabled">'+this.getBtnNext()+"</li>":t+='<li class="page-item">'+this.getBtnNext()+"</li>",this.root.innerHTML=t+="</ul></nav>";for(var n=document.getElementById(this.id+"-p"),n=(n&&n.addEventListener("click",function(t){var e=i.state;1<e&&e--,i.setState(e)}),document.getElementById(this.id+"-n")),o=(n&&n.addEventListener("click",function(t){var e=i.state;e<i.props&&e++,i.setState(e)}),this),s=1;s<=this.props;s++)!function(e){var t=document.getElementById(o.id+"-"+e);if(!t)return;t.addEventListener("click",function(t){i.setState(e)})}(s)}},i.prototype.getBtnPrev=function(){return'<button id="'+this.id+'-p" class="page-link" aria-label="Precedente"><span aria-hidden="true"><i class="fa fa-angle-left fa-lg"></i></span><span class="sr-only">Precedente</span></button>'},i.prototype.getBtnNext=function(){return'<button id="'+this.id+'-n" class="page-link" aria-label="Successiva"><span aria-hidden="true"><i class="fa fa-angle-right fa-lg"></i></span><span class="sr-only">Successiva</span></button>'},i.prototype.getPageItem=function(t,e,i){return i=i||""+t,e?'<li id="'+this.id+"-"+t+'" class="page-item" style="cursor:pointer;"><button aria-current="true" class="page-link" title="Page '+t+'">'+i+"</button></i>":'<li id="'+this.id+"-"+t+'" class="page-item" style="cursor:pointer;"><button class="page-link" title="Page '+t+'">'+i+"</button></i>"};var r,t=i;function i(t,e,i,s){t=r.call(this,t||"*","ResPages",0,e,i,s)||this;return t.rootTag="nav",t.max=5,t}n.ResPages=t;s=WUX.WComponent,__extends(a,s),a.prototype.refresh=function(t,e){this.state=t,this.props=e,this.forceUpdate()},a.prototype.updateState=function(t){var e=document.getElementById(this.id+"-"+this.state),e=(e&&WUX.removeClassOf(e,"active"),s.prototype.updateState.call(this,t),document.getElementById(this.id+"-"+this.state));e&&WUX.addClassOf(e,"active")},a.prototype.render=function(){if(!this.props)return'<div id="'+this.id+'"></div>';this.state||(this.state=1);for(var t="",e=1;e<=this.props;e++)t+='<li><a id="'+this.id+"-"+e+'" class="list-item" style="cursor:pointer;">Page '+e+"</a></li>";var i='<div id="'+this.id+'" class="page-dropdown dropdown">';return i+n.dropdownBtn(this.id,"Page "+this.state+" di "+this.props,t)+"</div>"},a.prototype.componentDidMount=function(){for(var i=this,t=document.getElementById(this.id+"-"+this.state),s=(t&&WUX.addClassOf(t,"active"),this),e=1;e<=this.props;e++)!function(e){var t=document.getElementById(s.id+"-"+e);if(!t)return;t.addEventListener("click",function(t){console.log("[BtnPages] click (i="+e+")",t),i.setState(e)})}(e)};var s,t=a;function a(t){return s.call(this,t||"*","BtnPages")||this}n.BtnPages=t;h=WUX.WComponent,__extends(l,h),l.prototype.render=function(){this.state||(this.state=this.IPP[0]);for(var t="",e=0;e<this.IPP.length;e++){var i=this.IPP[e];t+='<li><a id="'+this.id+"-"+i+'" class="list-item" style="cursor:pointer;">'+i+" items</a></li>"}var s='<div class="page-dropdown dropdown">';return s+n.dropdownBtn(this.id,"Items per page",t)+"</div>"},l.prototype.updateState=function(t){var e=document.getElementById(this.id+"-"+this.state),e=(e&&WUX.removeClassOf(e,"active"),h.prototype.updateState.call(this,t),document.getElementById(this.id+"-"+this.state));e&&WUX.addClassOf(e,"active")},l.prototype.componentDidMount=function(){for(var i=this,t=document.getElementById(this.id+"-"+this.state),s=(t&&WUX.addClassOf(t,"active"),this),e=0;e<this.IPP.length;e++)!function(t){var e=s.IPP[t],t=document.getElementById(s.id+"-"+e);if(!t)return;t.addEventListener("click",function(t){console.log("[BtnItems] click (v="+e+")",t),i.setState(e)})}(e)};var h,t=l;function l(t){t=h.call(this,t||"*","BtnItems")||this;return t.IPP=[5,10,20,50,100],t.state=t.IPP[0],t}n.BtnItems=t;d=WUX.WDialog,__extends(c,d),Object.defineProperty(c.prototype,"message",{get:function(){return this._msg},set:function(t){this._msg=t,this._msg||(this._msg=this.DEF_MSG);t=this.body.getElement(0,0);t&&(t.innerText=this._msg)},enumerable:!1,configurable:!0}),c.prototype.buildBtnOK=function(){return new WUX.WButton(this.subId("bfo"),"Yes","","btn btn-primary button-sm","","")},c.prototype.buildBtnCancel=function(){return new WUX.WButton(this.subId("bfc"),"No","","btn btn-secondary button-sm","","")};var d,t=c;function c(t,e){t=d.call(this,t||"*","DlgConfirm")||this;return t.DEF_MSG="Do you want to proceed with the operation?",t.title="Confirm",t._msg=e,t._msg||(t._msg=t.DEF_MSG),t.body.addRow().addCol("12").add(t._msg),t}n.DlgConfirm=t}(APP=APP||{}),function(t){var o=WUX.WUtil;function r(t,e){switch(t){case 0:return e?"Domenica":"Dom";case 1:return e?"Luned&igrave;":"Lun";case 2:return e?"Marted&igrave;":"Mar";case 3:return e?"Mercoled&igrave;":"Mer";case 4:return e?"Giove&igrave;":"Gio";case 5:return e?"Venerd&igrave;":"Ven";case 6:return e?"Sabato":"Sab"}return""}function a(t,e,i){switch(100<t&&(i=Math.floor(t/100),t%=100),i=i?" "+i:"",t){case 1:return e?"Gennaio"+i:"Gen"+i;case 2:return e?"Febbraio"+i:"Feb"+i;case 3:return e?"Marzo"+i:"Mar"+i;case 4:return e?"Aprile"+i:"Apr"+i;case 5:return e?"Maggio"+i:"Mag"+i;case 6:return e?"Giugno"+i:"Giu"+i;case 7:return e?"Luglio"+i:"Lug"+i;case 8:return e?"Agosto"+i:"Ago"+i;case 9:return e?"Settembre"+i:"Set"+i;case 10:return e?"Ottobre"+i:"Ott"+i;case 11:return e?"Novembre"+i:"Nov"+i;case 12:return e?"Dicembre"+i:"Dic"+i}return""}t.formatDay=r,t.formatMonth=a;n=WUX.WComponent,__extends(i,n),i.prototype.onDoubleClick=function(t){this.handlers._doubleclick||(this.handlers._doubleclick=[]),this.handlers._doubleclick.push(t)},i.prototype.updateState=function(t){this.state=t,this.state||(this.state=new Date);var t=this.state.getDate(),e=this.state.getMonth(),i=this.state.getFullYear();this.ls=1e4*i+100*(e+1)+t+""},i.prototype.render=function(){this.state||(this.state=new Date);for(var t='<table id="'+this.subId("t")+'" class="'+this.ct+'"><thead><tr>',e=0;e<7;e++){var i=6==e?0:e+1;t+='<th id="'+this.subId(i+"")+'" style="'+this.sw+'">'+r(i,!1)+"</th>"}var t=(t+='</tr></thead><tbody id="'+this.subId("b")+'">')+this.body()+"</tbody></table>",s=this.state.getMonth(),s=100*this.state.getFullYear()+s+1,n='<a id="'+this.subId("p")+'" title="'+this.pm+'"><i class="fa fa-arrow-circle-left"></i></a>',o='<a id="'+this.subId("n")+'" title="'+this.nm+'"><i class="fa fa-arrow-circle-right"></i></a>',n='<div class="row"><div class="col-2" style="'+this.sp+'">'+n+'</div><div id="'+this.subId("m")+'" class="col-8" style="'+this.sm+'">'+a(s,!0,!0)+'</div><div class="col-2" style="'+this.sn+'">'+o+"</div></div>";return this.cd?n+='<div class="row"><div class="'+this.cd+'">'+t+"</div></div>":n+='<div class="row"><div class="col-12">'+t+"</div></div>",this.buildRoot(this.rootTag,n)},i.prototype.add=function(t){this.state||(this.state=new Date);var e=this.state.getDate(),i=this.state.getMonth(),s=this.state.getFullYear(),i=i+t,t=new Date(s,i,e),e=t.getMonth(),s=(e!=i&&(e=(t=new Date(s,i+1,0)).getMonth()),t.getFullYear());return this.setState(t),this.eb&&(this.eb.innerHTML=this.body()),this.em&&(this.em.innerText=a(100*s+e+1,!0,!0)),t},i.prototype.mark=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t||!t.length)return this;for(var i=0,s=t;i<s.length;i++){var n=s[i],n=o.toDate(n);n&&(n=this.str(n),this.am.push(n),n!=this.ls&&(n=document.getElementById(this.subId(n)))&&n.setAttribute("style",this.sk))}return this},i.prototype.unmark=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t||!t.length)return this;for(var i=0,s=t;i<s.length;i++){var n=s[i],n=o.toDate(n);n&&(n=this.str(n),this.unm(this.am.indexOf(n)))}return this},i.prototype.title=function(t,e){t=o.toDate(t);if(!t)return this;t=this.str(t),this.mt[t]=e,t=document.getElementById(this.subId(t));return t&&t.setAttribute("title",e),this},i.prototype.unm=function(t,e){var i;void 0===e&&(e=!0),t<0||(i=this.am[t])&&(e&&this.am.splice(t,1),(e=document.getElementById(this.subId(i)))&&(this.str(this.state)==i?e.setAttribute("style",this.ss):e.setAttribute("style",this.sd)))},i.prototype.clear=function(){if(this.am&&this.am.length){for(var t=0;t<this.am.length;t++)this.unm(t,!1);this.am=[]}if(this.mt){for(var e in this.mt){e=document.getElementById(this.subId(e));e&&e.setAttribute("title",null)}this.mt={}}return this},i.prototype.prev=function(){return this.add(-1)},i.prototype.next=function(){return this.add(1)},i.prototype.ele=function(t){return t?document.getElementById(this.subId(this.str(t))):null},i.prototype.str=function(t){return t?1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()+"":null},i.prototype.from=function(){this.state||(this.state=new Date);var t=this.state.getMonth();return 1e4*this.state.getFullYear()+100*(t+1)+1+""},i.prototype.to=function(){this.state||(this.state=new Date);var t=this.state.getMonth(),e=this.state.getFullYear();return 1e4*e+100*(t+1)+new Date(e,t+1,0).getDate()+""},i.prototype.body=function(){this.state||(this.state=new Date);var t="",e=this.state.getDate(),i=this.state.getMonth(),s=this.state.getFullYear();this.ls=1e4*s+100*(i+1)+e+"";var n=new Date(s,i,1).getDay();0==n&&(n=7);for(var o=new Date(s,i+1,0).getDate(),r=1,a=1;a<=6;a++){this.tr?t+='<tr style="'+this.tr+'">':t+="<tr>";for(var h,l,d,c=1;c<=7;c++)1==a&&c<n||o<r?t+='<td style="'+this.se+'"></td>':(l=(h=1e4*s+100*(i+1)+r+"")==this.td?this.st:"",d=(d=this.mt[h])?' title="'+d+'"':"",h==this.ls?t+='<td id="'+this.subId(h)+'" style="'+this.ss+l+'"'+d+">"+r+"</td>":0<=this.am.indexOf(h)?t+='<td id="'+this.subId(h)+'" style="'+this.sk+l+'"'+d+">"+r+"</td>":t+='<td id="'+this.subId(h)+'" style="'+this.sd+l+'"'+d+">"+r+"</td>",r++);if(t+="</tr>",o<r)break}return t},i.prototype.componentDidMount=function(){var a=this;this.ep=document.getElementById(this.subId("p")),this.em=document.getElementById(this.subId("m")),this.en=document.getElementById(this.subId("n")),this.et=document.getElementById(this.subId("t")),this.eb=document.getElementById(this.subId("b")),this.ep&&this.ep.addEventListener("click",function(t){a.prev()}),this.en&&this.en.addEventListener("click",function(t){a.next()}),this.root.addEventListener("click",function(t){var e,i,s,n,o,r=WUX.lastSub(t.target);r&&8==r.length&&(e=parseInt(r),i=r==a.td?a.st:"",(s=a.ele(a.state))&&(o=(n=a.str(a.state))==a.td?a.st:"",0<=a.am.indexOf(n)?s.setAttribute("style",a.sk+o):s.setAttribute("style",a.sd+o)),t.target.style=a.ss+i,a.ls!=r&&a.setState(new Date(e/1e4,e%1e4/100-1,e%1e4%100)))}),this.root.addEventListener("dblclick",function(t){t=WUX.lastSub(t.target);t&&8==t.length&&a.trigger("_doubleclick",t)}),this.root.addEventListener("mouseover",function(t){var e=WUX.lastSub(t.target);e&&8==e.length&&(e=e==a.td?a.st:"",t.target.style=a.so+e)}),this.root.addEventListener("mouseout",function(t){var e,i=WUX.lastSub(t.target);i&&8==i.length&&(e=i==a.td?a.st:"",i==a.str(a.state)?t.target.style=a.ss+e:0<=a.am.indexOf(i)?t.target.style=a.sk+e:t.target.style=a.sd+e)})};var n,e=i;function i(t,e,i,s){t=n.call(this,t||"*","WCalendar",1,e,i,s)||this;return t.am=[],t.mt={},t.pm="Mese precedente",t.nm="Mese successivo",t.ct="table table-sm",t.cd="table-responsive",t.sp="padding:1rem;text-align:center;font-weight:bold;background-color:#eeeeee;",t.sm=t.sp,t.sn=t.sp,t.tr="height:3rem;",t.sw="text-align:center;",t.sd="text-align:center;vertical-align:middle;",t.so="text-align:center;vertical-align:middle;background-color:#f6f6f6;cursor:pointer;",t.ss="text-align:center;vertical-align:middle;background-color:#b8d4f1;",t.sk="text-align:center;vertical-align:middle;background-color:#ffeebc;",t.se="background-color:#f0f0f0;",t.st="font-weight:bold;",t.td=t.str(new Date),t}t.WCalendar=e}(APP=APP||{}),function(t){n=WUX.WComponent,__extends(i,n),i.prototype.size=function(t,e){return this._w=t,this._h=e,this._w<40&&(this._w=40),this._h<40&&(this._h=40),this._attributes='width="'+this._w+'" height="'+this._h+'"',this},Object.defineProperty(i.prototype,"width",{get:function(){return this._w},set:function(t){this._w=t,this._w<40&&(this._w=40),this._attributes='width="'+this._w+'" height="'+this._h+'"'},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._h},set:function(t){this._h=t,this._h<40&&(this._h=40),this._attributes='width="'+this._w+'" height="'+this._h+'"'},enumerable:!1,configurable:!0}),i.prototype.componentDidMount=function(){if(this.state){var t=this.state.series;if(t&&t.length){var e=t[0];if(e&&!(e.length<2)){var i=this.state.styles,s=this.root,n=s.getContext("2d");if(n){var o=this.state.labels,r=0,a=0,h=!1,l=(o&&o.length==e.length&&(l=4<(l=(l=o[0])?l.length:0)?Math.ceil(l/2):2,r=this.fontSize*l+4,a=2*this.fontSize+4,h=!0),s.width-this.offx-a),d=s.height-this.offy-r,c=l/(e.length-1),l=(l=Math.max.apply(Math,e))||4,u=(this.maxy&&this.maxy>l&&(l=this.maxy),[Math.round(l/4),Math.round(l/2),Math.round(3*l/4)]),f=d/l;n.beginPath(),n.lineWidth=1,n.strokeStyle=this.axis,n.moveTo(this.offx,this.offy),n.lineTo(this.offx,s.height-r),n.lineTo(s.width-a,s.height-r),n.stroke(),n.beginPath(),n.setLineDash([4,8]),n.lineWidth=1,n.strokeStyle=this.grid;for(var p=1;p<e.length;p++){var g=this.offx+p*c;n.moveTo(g,this.offy),n.lineTo(g,s.height-r)}n.moveTo(this.offx,this.offy),n.lineTo(s.width-a,this.offy);for(var m=0,b=u;m<b.length;m++){var y=b[m];n.moveTo(this.offx,s.height-r-y*f),n.lineTo(s.width-a,s.height-r-y*f)}n.stroke(),n.fillStyle=this.axis,n.font=this.fontSize+"px "+this.fontName,n.fillText("0",0,s.height-r);for(var v=0,w=u;v<w.length;v++){y=w[v];n.fillText(""+y,0,s.height-r-y*f)}if(n.fillText(""+l,0,this.offy),h)for(p=0;p<o.length;p++){g=this.offx+p*c;n.save(),n.translate(g-this.fontSize,s.height),n.rotate(-Math.PI/3),n.fillStyle=this.axis,n.fillText(o[p],0,0),n.restore()}d=this.props;if("bar"!=(d=(d=d||this.state.type)||"line")){n.setLineDash([]);for(var S=0;S<t.length;S++){if(!(k=t[S])||k.length<e.length)return;var _=this.line;i&&i.length>S&&(_=(_=i[S])||this.line),n.beginPath(),n.lineWidth=2,n.strokeStyle=_,n.moveTo(this.offx,s.height-r-k[0]*f);for(p=1;p<e.length;p++){var g=this.offx+p*c,I=s.height-r-k[p]*f;n.lineTo(g,I)}n.stroke()}}else{this.barw<4&&(this.barw=4);for(var k,S=0;S<t.length;S++){if(!(k=t[S])||k.length<e.length)return;for(var _=this.line,P=(i&&i.length>S&&(_=(_=i[S])||this.line),n.fillStyle=_,S*(this.barw+1)),p=0;p<e.length;p++){g=this.offx+p*c,I=s.height-r-k[p]*f;0==p?n.fillRect(g+P,I,this.barw,k[p]*f):t.length<3?n.fillRect(g+P-this.barw/2,I,this.barw,k[p]*f):n.fillRect(g+P-this.barw/2-(this.barw+1)*(t.length-2),I,this.barw,k[p]*f)}}}}}}}};var n,e=i;function i(t,e,i,s){t=n.call(this,t||"*","WChart",e,i,s)||this,t.rootTag="canvas",t.forceOnChange=!0,e=window.innerWidth;return t._w=750,t._h=370,(e<900||1920<e)&&(t._w=Math.round(750*e/1400),t._h=Math.round(370*t._w/750)),t._attributes='width="'+t._w+'" height="'+t._h+'"',t.fontSize=14,t.fontName="Arial",t.axis="#808080",t.grid="#a0a0a0",t.line="#e23222",t.offx=30,t.offy=30,t.barw=16,t}t.WChart=e}(APP=APP||{}),function(o){var e,n=WUX.WUtil,i=WUX.action,r=WUX.getAction,t=(e=WUX.WDialog,__extends(s,e),s.prototype.updateState=function(t){this.state=t,this.form&&(this.form.clear(),this.form.setState(this.state))},s.prototype.getState=function(){return this.form&&(this.state=this.form.getState()),this.state},s.prototype.onClickOk=function(){if("new"==this.props||"edit"==this.props){var t=this.form.checkMandatory(!0,!0);if(t)return o.showWarning("Check: "+t),!1}return!0},s.prototype.onShown=function(){var t=this;"view"==this.props?(this.form.enabled=!1,this.updButtons("Close","")):(this.form.enabled=!0,this.updButtons("Save"),"edit"==this.props?(this.form.setReadOnly("code",!0),setTimeout(function(){t.form.focusOn("name")})):(this.form.setReadOnly("code",!1),setTimeout(function(){t.form.focusOn("code")})))},s);function s(t){t=e.call(this,t,"DlgEntity")||this;return t.title="Entity",t.form=new WUX.WForm(t.subId("form")),t.form.addRow(),t.form.addTextField("code","Code"),t.form.addRow(),t.form.addTextField("name","Name"),t.form.addInternalField("id"),t.form.setMandatory("code","name"),t.body.addRow().addCol("col-md-12").add(t.form),t}o.DlgEntity=t;a=WUX.WComponent,__extends(l,a),l.prototype.render=function(){var s=this;this.brcr=new o.Breadcrumb,this.brcr.add("Entities"),this.form=new WUX.WForm(this.subId("form")),this.form.legend("Filter").addRow().addTextField("code","Code").addTextField("name","Name",{span:2}),this.btnFind=new WUX.WButton(this.subId("btnFind"),"Search","fa-search","btn-icon btn btn-primary","margin-right: 0.5rem;"),this.btnFind.on("click",function(t){s.doFind()}),this.btnReset=new WUX.WButton(this.subId("btnReset"),"Cancel","fa-undo","btn-icon btn btn-secondary"),this.btnReset.on("click",function(t){s.form.clear(),s.form.focus(),s.table.setState([]),s.refresh()}),this.btnNew=new WUX.WButton(this.subId("btnNew"),"New","fa-plus-circle","btn-icon btn btn-primary","margin-right: 0.5rem;"),this.btnNew.on("click",function(t){s.dlg.setProps("new"),s.dlg.setState(null),s.dlg.show(s)});return this.table=new WUX.WTable(this.subId("tapp"),["Code","Name","View","Edit","Delete"],["code","name","_v","_m","_d"]),this.table.selectionMode="single",this.table.div="table-responsive",this.table.types=["s","s","w","w","w"],this.table.sortable=[0,1],this.table.paging=!0,this.table.on("click",function(t){var e,i,t=r(t,s);console.log("click a=",t),t&&t.ref&&"sort"!=t.name&&(e=s.table.getState(),(i=n.indexOf(e,"id",t.ref))<0||("delete"==t.name?o.confirm("Do you want to delete the item?",function(t){t&&o.http.delete("entities/delete",e[i],function(t){t?(o.showSuccess("Item successfully deleted"),o.delItem(i,s.table),s.refresh()):o.showWarning("Item not deleted")})}):(s.dlg.setProps(t.name),s.dlg.setState(e[i]),s.dlg.show(s))))}),this.table.onDoubleClick(function(t){s.dlg.setProps("view"),s.dlg.setState(t.data),s.dlg.show(s)}),this.respg=new o.ResPages(this.subId("respg")),this.respg.on("statechange",function(t){s.table.page=s.respg.getState(),s.refresh(!0)}),this.btnpg=new o.BtnPages(this.subId("btnpg")),this.btnpg.on("statechange",function(t){s.table.page=s.btnpg.getState(),s.refresh(!0)}),this.btnip=new o.BtnItems(this.subId("btnip")),this.btnip.on("statechange",function(t){s.table.page=1,s.table.plen=s.btnip.getState(),s.refresh(!0)}),this.main=new WUX.WContainer,this.main.before(this.brcr).addRow().addCol("col-md-12").add(this.form).addRow().addCol("col-md-8").addGroup({classStyle:"form-row"},this.btnFind,this.btnReset).addCol("col-md-4",{a:"right"}).addGroup({classStyle:"form-row"},this.btnNew).addRow().addCol("col-md-12").add(this.table).addRow().addCol("col-md-6").add(this.respg).addCol("col-md-3").add(this.btnpg).addCol("col-md-3").add(this.btnip),this.main},l.prototype.doFind=function(){var n=this,t=this.form.checkMandatory(!0,!0,!0);t?o.showWarning("Check: "+t):(t=this.form.getState(),o.http.get("entities/find",t,function(t){(t=t||[]).length||o.showWarning("No items found");for(var e=0,i=t;e<i.length;e++){var s=i[e];n.addActions(s)}n.table.page=1,n.table.plen=n.btnip.getState(),n.table.setState(t),n.refresh()}))},l.prototype.addActions=function(t){return t&&(t._v=i("view",t.id,"fa-search"),t._m=i("edit",t.id,"fa-edit"),t._d=i("delete",t.id,"fa-trash"),t)},l.prototype.refresh=function(t){(t=void 0===t?!1:t)&&this.table.forceUpdate();t=this.table.getState(),t=t?t.length:0;this.respg.refresh(this.table.rows,this.table.plen,t,this.table.page),this.btnpg.refresh(this.table.page,this.respg.getProps())};var a,h=l;function l(){var s=a.call(this)||this;return s.page=1,s.mock=new o.Mock,o.http.mock=!0,o.http.mres={get:function(t,e){return s.mock.find(t,e)},post:function(t,e){return s.mock.ins(t,e,"id")},put:function(t,e){return s.mock.upd(t,e,"id")},delete:function(t,e){return s.mock.del(t,e,"id")}},s.dlg=new t(s.subId("dlg")),s.dlg.onHiddenModal(function(t){if(s.dlg.ok){var e=s.dlg.getProps(),i=s.dlg.getState();if(e&&i)switch(console.log("dlg action,state",e,i),e){case"new":o.http.post("entities/insert",i,function(t){t?(o.showSuccess("Item inserted successfully"),o.addItem(s.addActions(t),s.table),s.refresh()):o.showWarning("Item not inserted")});break;case"edit":o.http.put("entities/update",i,function(t){t?(o.showSuccess("Item updated successfully"),o.updItem(s.addActions(t),s.table,"id")):o.showWarning("Item not updated")})}}}),s}o.GUIEntities=h}(APP=APP||{});