var __spreadArray=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||((o=o||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};if("undefined"==typeof jQuery)throw new Error("WUX requires jQuery");jQuery.fn.wuxComponent=function(t){var e=this.data("wuxComponent");return e||(t instanceof WUX.WComponent?(this.data("wuxComponent",t),t):(t=null==t||t)?(e=new WUX.WComponent(this),this.data("wuxComponent",e),e):void 0)};var WUX,WuxDOM=function(){function l(){}return l.onRender=function(t){l.onRenderHandlers.push(t)},l.onUnmount=function(t){l.onUnmountHandlers.push(t)},l.render=function(i,r,s,a){WUX.debug&&console.log("WuxDOM.render "+WUX.str(i)+" on "+WUX.str(r)+"..."),$(document).ready(function(){WUX.global.init(function(){r=r||l.lastCtx||$("#view-root"),s&&s(r);var t=l.mount(i,r);if(l.lastCtx=t,a&&a(r),0<l.onRenderHandlers.length){for(var e={component:i instanceof WUX.WComponent?i:null,element:t,target:t.get(0),type:"render"},n=0,o=l.onRenderHandlers;n<o.length;n++)(0,o[n])(e);l.onRenderHandlers=[]}})})},l.mount=function(t,e){if(e=e||l.lastCtx||$("#view-root"),WUX.debug&&console.log("WuxDOM.mount "+WUX.str(t)+" on "+WUX.str(e)+"..."),null==t)console.error("WuxDOM.mount "+WUX.str(t)+" on "+WUX.str(e)+" -> invalid component");else{var n;if("string"==typeof e?"#"!=e[0]&&(n=$("#"+e)).length||(n=$(e)):n=e,n.length)return l.lastCtx=n,t instanceof WUX.WComponent?(t.mount(n),n.wuxComponent(t)):n.append(t),WUX.debug&&console.log("WuxDOM.mount "+WUX.str(t)+" on "+WUX.str(e)+" completed."),n;console.error("WuxDOM.mount "+WUX.str(t)+" on "+WUX.str(e)+" -> context unavailable")}},l.unmount=function(t){var e;if(t=t||l.lastCtx||$("#view-root"),WUX.debug&&console.log("WuxDOM.unmount "+WUX.str(t)+"..."),"string"==typeof t?"#"!=t[0]&&(e=$("#"+t)).length||(e=$(t)):e=t,e.length){var n=e.wuxComponent(!1);if(n&&n.unmount(),e.html(""),WUX.debug&&console.log("WuxDOM.unmount "+WUX.str(t)+" completed."),0<l.onUnmountHandlers.length){for(var o={component:n,element:e,target:e.get(0),type:"unmount"},i=0,r=l.onUnmountHandlers;i<r.length;i++)(0,r[i])(o);l.onUnmountHandlers=[]}return e}console.error("WuxDOM.unmount "+WUX.str(t)+" -> node unavailable")},l.replace=function(t,e){var n,o;if(e||(e=t,t=void 0),t?"string"==typeof t?(o=WUX.getComponent(t))||(n=o.getContext(),o.unmount()):t instanceof WUX.WComponent?(n=t.getContext(),t.unmount()):(n=t.parent())&&n.html(""):n=l.unmount(),(n=n||$("#view-root")).length)return l.mount(e,n);console.error("WuxDOM.replace "+WUX.str(n)+" -> node unavailable")},l.onRenderHandlers=[],l.onUnmountHandlers=[],l}(),__extends=(!function(c){c.debug=!1,c.registry=[],c.version="1.0.0";Object.defineProperty(d.prototype,"visible",{get:function(){return this.internal?this.internal.visible:this._visible},set:function(t){this._visible=t,this.internal&&(this.internal.visible=t),this.root&&this.root.length&&(this._visible?this.root.show():this.root.hide())},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"enabled",{get:function(){return this.internal?this.internal.enabled:this._enabled},set:function(t){this._enabled=t,this.internal&&(this.internal.enabled=t),this.root&&this.root.length&&this.root.prop("disabled",!this._enabled)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"style",{get:function(){return this.internal?this.internal.style:this._style},set:function(t){this._style=c.css(this._baseStyle,t),this.internal&&(this.internal.style=t),this.root&&this.root.length&&this.root.attr("style",this._style)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"classStyle",{get:function(){return this.internal?this.internal.classStyle:this._classStyle},set:function(t){this.internal&&(this.internal.classStyle=t);var e=!1,n=!1;t&&1<t.length&&"!"==t.charAt(0)?(t=t.substring(1),e=!0):t&&1<t.length&&"?"==t.charAt(0)&&(t=t.substring(1),n=!0),this._classStyle=e?c.removeClass(this._classStyle,t):n?c.toggleClass(this._classStyle,t):c.cls(this._baseClass,t),this.root&&this.root.length&&(e?this.root.removeClass(t):n?this.root.toggleClass(t):this.root.addClass(this._classStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"attributes",{get:function(){return this.internal?this.internal.attributes:this._attributes},set:function(t){this._attributes=t,this.internal&&(this.internal.attributes=t)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"tooltip",{get:function(){return this.internal?this.internal.tooltip:this._tooltip},set:function(t){this._tooltip=t,this.internal&&(this.internal.tooltip=t),this.root&&this.root.length&&this.root.attr("title",this._tooltip)},enumerable:!1,configurable:!0}),d.prototype.css=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t||0==t.length)return this;var n=p.apply(void 0,t),n=(n&&(this.classStyle=n),s.apply(void 0,t));return n&&(this.style=n),this},d.prototype.focus=function(){return this.internal&&this.internal.focus(),this.root&&this.root.length&&this.root.focus(),this},d.prototype.blur=function(){return this.internal&&this.internal.blur(),this.root&&this.root.length&&this.root.blur(),this},d.prototype.forceUpdate=function(t){return this.update(this.props,this.state,!1,!1,!0,t),this},d.prototype.getContext=function(){return this.context},d.prototype.getRoot=function(){if(!this.root&&this.internal)return this.internal.getRoot();if(this.root)return this.root;if(this.id){var t=$("#"+this.id);if(t.length)return t}return this.context},d.prototype.getState=function(){return this.state},d.prototype.setState=function(t,e,n){return this.debug&&console.log("["+g(this)+"] setState",t),this.update(this.props,t,!1,!0,this.forceOnChange||e,n),this},d.prototype.getProps=function(){return this.props},d.prototype.setProps=function(t,e,n){return this.debug&&console.log("["+g(this)+"] setProps",t),this.update(t,this.state,!0,!1,this.forceOnChange||e,n),this},d.prototype.on=function(t,e){if(!t)return this;for(var n=0,o=t.split(" ");n<o.length;n++){var i=o[n];this.handlers[i]||(this.handlers[i]=[]),this.handlers[i].push(e)}return this.internal&&this.internal.on(t,e),this.root&&this.root.length&&this.root.on(t,e),this},d.prototype.off=function(t){if(t)for(var e=0,n=t.split(" ");e<n.length;e++){var o=n[e];delete this.handlers[o]}else this.handlers={};return this.internal&&this.internal.off(t),this.root&&this.root.length&&this.root.off(t),this},d.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this.debug&&console.log("["+g(this)+"] trigger",t,e),t){var o=e&&0<e.length?e[0]:void 0;if("_"==t.charAt(0)||"mount"==t||"unmount"==t||"statechange"==t||"propschange"==t){if(void 0!==o&&("statechange"==t?this.state!=e[0]&&(this.state=e[0],this.debug&&console.log("["+g(this)+"] trigger set state",this.state)):"propschange"==t&&this.props!=e[0]&&(this.props=e[0],this.debug&&console.log("["+g(this)+"] trigger set props",this.props))),!this.handlers||!this.handlers[t])return this;for(var i=this.createEvent(t,o),r=0,s=this.handlers[t];r<s.length;r++)(0,s[r])(i)}else this.root&&this.root.length&&(this.debug&&console.log("["+g(this)+"] trigger "+t+" on root="+g(this.root)),(o=this.root).trigger.apply(o,__spreadArray([t],e,!1)));return this.internal&&(this.debug&&console.log("["+g(this)+"] trigger "+t+" on internal="+g(this.internal)),(o=this.internal).trigger.apply(o,__spreadArray([t],e,!1))),this}},d.prototype.unmount=function(){var t;return this.debug&&console.log("["+g(this)+"] unmount ctx="+g(this.context)+" root="+g(this.root),this.state,this.props),this.componentWillUnmount(),this.internal&&this.internal.unmount(),this.internal=void 0,this.root&&this.root.length&&this.root.remove(),this.root=void 0,this.id&&0<=(t=c.registry.indexOf(this.id))&&c.registry.splice(t,1),this.mounted=!1,this.trigger("unmount"),this},d.prototype.mount=function(t){this.debug&&console.log("["+g(this)+"] mount ctx="+g(t)+" root="+g(this.root),this.state,this.props),this.id||this.root&&this.root.length&&(this.id=this.root.attr("id")),t&&t.length&&(this.context=t),this.context||this.root&&this.root.length&&(this.context=this.root.parent(),this.context||(this.context=this.root));try{var e,n,o,i,r,s;if(this.mounted&&this.unmount(),this.mounted=!1,this.context&&this.context.length||(p=$("#"+this.id)).length&&(this.context=p),this.debug&&console.log("["+g(this)+"] componentWillMount ctx="+g(t)+" root="+g(this.root)),this.componentWillMount(),this.context&&this.context.length&&(this.debug&&console.log("["+g(this)+"] render ctx="+g(t)+" root="+g(this.root)),null!=(e=this.render())?e instanceof d?(this.debug&&console.log("["+g(this)+"] render -> "+g(e)),(this.internal=e).parent||(e.parent=this),e.mount(this.context),this.root||(this.id?(p=$("#"+this.id),this.root=p.length?p:this.internal.getRoot()):this.root=this.context)):e instanceof jQuery?(this.context.append(e),this.root||(this.root=e)):(o=(n=f(e))[0],i=n[1],r=n[2],o&&this.context.append(o),this.context.append(i),r&&this.context.append(r),this.root||(this.root=this.id?$("#"+this.id):i)):(this.internal&&this.internal.mount(this.context),this.root||(this.root=this.id?$("#"+this.id):this.context))),this._visible||(this.internal?this.internal.visible=!1:this.root.hide()),this._enabled||(this.internal?this.internal.enabled=!1:this.root.prop("disabled",!0)),this.debug&&console.log("["+g(this)+"] componentDidMount ctx="+g(t)+" root="+g(this.root)),this.componentDidMount(),this.root&&this.root.length)for(var a in this.handlers)if(a&&"_"!=a.charAt(0)&&"mount"!=a&&"unmount"!=a&&"statechange"!=a&&"propschange"!=a)for(var l=0,h=this.handlers[a];l<h.length;l++){var u=h[l];this.root.on(a,u)}this.root.wuxComponent(this),this.mounted=!0,!this.id||this.internal&&this.internal.id==this.id||(0<=c.registry.indexOf(this.id)?(s=c.getComponent(this.id))&&s.cuid!=this.cuid&&console.error("["+g(this)+"] id already used by "+g(s)):c.registry.push(this.id)),this.trigger("mount")}catch(t){var p=g(this)+" "+g(this.context);console.error("["+g(this)+"] mount error "+p,t),this.componentDidCatch(t,p)}return this},d.prototype.componentWillUnmount=function(){},d.prototype.componentWillMount=function(){},d.prototype.render=function(){return this.buildRoot(this.rootTag)},d.prototype.componentDidMount=function(){},d.prototype.componentDidCatch=function(t,e){},d.prototype.shouldComponentUpdate=function(t,e){return"object"==typeof t||"object"==typeof e||(this.props!=t||this.state!=e)},d.prototype.componentWillUpdate=function(t,e){},d.prototype.componentDidUpdate=function(t,e){},d.prototype.updateProps=function(t){this.props=t},d.prototype.updateState=function(t){this.state=t},d.prototype.update=function(t,e,n,o,i,r){void 0===i&&(i=!1),this.debug&&console.log("["+g(this)+"] update",t,e,"propsChange="+n+",stateChange="+o+",force="+i),t=void 0===t?this.props:t;var s=this.props,a=this.state;if(this.dontTrigger=!1,this.mounted){if(i||this.shouldComponentUpdate(t,e)){try{this.debug&&console.log("["+g(this)+"] componentWillUpdate",t,e),this.componentWillUpdate(t,e),n&&(this.debug&&console.log("["+g(this)+"] updateProps",t),this.updateProps(t)),o&&(this.debug&&console.log("["+g(this)+"] updateState",e),this.updateState(e)),i&&this.mount(),this.debug&&console.log("["+g(this)+"] componentDidUpdate",s,a),this.componentDidUpdate(s,a),n&&!this.dontTrigger&&this.trigger("propschange"),o&&!this.dontTrigger&&this.trigger("statechange")}catch(t){return this.componentDidCatch(t,g(this)+"|"+g(this.context)),!1}r&&r()}}else n&&(this.debug&&console.log("["+g(this)+"] updateProps",t),this.updateProps(t),this.dontTrigger||this.trigger("propschange")),o&&(this.debug&&console.log("["+g(this)+"] updateState",e),this.updateState(e),this.dontTrigger||this.trigger("statechange"));return!0},d.prototype.createEvent=function(t,e){var n=this.root&&this.root.length?this.root.get(0):this.root;return{component:this,element:this.root,target:n,type:t,data:e}},d.prototype.shouldBuildRoot=function(){if(this.internal)return!1;if(this.root&&this.root.length)return!1;if(this.context&&this.context.length){var t=this.context.attr("id");if(!t&&t==this.id)return!1}return!0},d.prototype.buildRoot=function(t,e,n,o,i,r,s){if(this.debug&&console.log("["+g(this)+"] buildRoot",t,e,n,o,i,r,s),this.shouldBuildRoot())return this.debug&&console.log("["+g(this)+"] shouldBuildRoot() -> true"),this.build(t,e,n,o,i,r,s);this.debug&&console.log("["+g(this)+"] shouldBuildRoot() -> false")},d.prototype.build=function(t,e,n,o,i,r,s){void 0===o&&(o=this._classStyle),void 0===i&&(i=this._style),void 0===r&&(r=this._attributes);var a="<"+(t=t||"div"),s=((s=void 0===s?this.id:s)&&(a+=' id="'+s+'"'),o&&(a+=' class="'+o+'"'),i&&(a+=' style="'+i+'"'),c.attributes(r)),o=(s&&(a+=" "+s),c.attributes(n)),i=(o&&(a+=" "+o),a+=">",h(null==e?this.make():e));return a+=i[1],"input"==t?i[0]+a+i[2]:i[0]+(a+="</"+t+">")+i[2]},d.prototype.make=function(){return""},d.prototype.subId=function(t,e){var n;return t instanceof d?!(n=t.id)||!this.id||0!=n.indexOf(this.id+"-")?n:n.substring(this.id.length+1):(this.id&&"*"!=this.id||(this.id="w"+this.cuid),t&&"*"!=t||(t=(this.subSeq++).toString()),e||0==e?this.id+"-"+t+"-"+e:this.id+"-"+t)},d.prototype.ripId=function(t){return t&&this.id&&0==t.indexOf(this.id)&&t.length>this.id.length+1?t.substring(this.id.length+1):t},d.prototype.transferTo=function(t,e,n){return this.debug&&console.log("["+g(this)+"] transferTo "+g(t)),!!t&&(t.setState(this.getState(),e,n),!0)};var t,a=d;function d(t,e,n,o,i,r){this.mounted=!1,this.debug=c.debug,this.forceOnChange=!1,this.rootTag="div",this.subSeq=0,this.dontTrigger=!1,this._visible=!0,this._enabled=!0,this.handlers={},this.cuid=Math.floor(1e9*Math.random()),t instanceof jQuery?(this.root=t,this.root&&this.root.length&&(this.mounted=!0),this.debug&&console.log("["+g(this)+"] new wrapper root="+g(this.root))):("string"==typeof t&&(this.id="*"==t?"w"+this.cuid:t),this.name=e||"WComponent",this._classStyle=o,(t=c.cls(i))&&(this._classStyle=this._classStyle?this._classStyle+" "+t:t),this._style=c.style(i),this._attributes=c.attributes(r),this.debug&&console.log("["+g(this)+"] new"),this.debug&&console.log("["+g(this)+"] updateProps",n),this.updateProps(n))}function l(){}function o(t){if(t){if(t instanceof jQuery)return t.attr("id");if(t instanceof a)return t.id;if("string"==typeof t&&t.indexOf("<")<0)return 0==t.indexOf("#")?t.substring(1):t;if("object"==typeof t&&!t.id)return""+t.id;var e,t=$(t),n=t.attr("id");return n||("i"!=(e=t.prop("tagName"))&&"I"!=e||(n=t.parent().attr("id"))),n}}function f(t){if(!t)return["",$("<span></span>"),""];if("string"!=typeof t)return t instanceof jQuery?["",t,""]:["",$("<span>"+t+"</span>"),""];if("<"==t.charAt(0)&&">"==t.charAt(t.length-1))return["",$(t),""];var e=t.indexOf("<");if(e<0)return["",$("<span>"+t.replace(">","&gt;")+"</span>"),""];var n=t.lastIndexOf(">");return n<0?["",$("<span>"+t.replace("<","&lt;")+"</span>"),""]:[t.substring(0,e),$(t.substring(e,n+1)),t.substring(n+1)]}function h(t){if(!t)return["","",""];if(" "==t)return["","&nbsp;",""];var e=" "==t.charAt(0)?"&nbsp;":"",n=1<t.length&&" "==t.charAt(t.length-1)?"&nbsp;":"",o=t.trim().split("<>");return!o||o.length<2?[e,t.trim(),n]:(e+=o[0],2==o.length?[e,o[1],""]:(n+=o[2],[e,o[1],n]))}function g(t){var e,n;return t instanceof a?(e=(e=t.name)||"WComponent",(n=t.id)?e+"("+n+")":e):t instanceof jQuery?t.length?(n=t.attr("id")?" id="+t.attr("id"):"",t.selector?'$("'+t.selector+'")':"$(<"+t.prop("tagName")+n+">)"):'$("'+t.selector+'").length=0':"object"==typeof t?JSON.stringify(t):t+""}function r(t){var t=u(t),e={};if(!t)return e;for(var n=0,o=t.split(";");n<o.length;n++){var i=o[n].split(":");i.length<2||(e[i[0].trim()]=i[1].trim())}return e}function u(t){var e="";return t?"string"==typeof t?t.indexOf(":")<=0?"":";"!=t.charAt(t.length-1)?t+";":t:(t.s&&(e+=s(t.s)),t.fs&&(e+="font-style:"+t.fs+";"),t.fw&&(e+="font-weight:"+t.fw+";"),t.tt&&(e+="text-transform:"+t.tt+";"),t.tr&&(e+="transform:"+t.tr+";"),t.fl&&(e+="float:"+t.fl+";"),t.cl&&(e+="clear:"+t.cl+";"),t.a&&(e+="text-align:"+t.a+";"),t.c&&(e+="color:"+t.c+";"),t.v&&(e+="vertical-align:"+t.v+";"),t.d&&(e+="display:"+t.d+";"),t.z&&(e+="z-index:"+t.z+";"),t.lh&&(e+="line-height:"+t.lh+";"),t.ps&&(e+="position:"+t.ps+";"),t.o&&(e+="overflow:"+t.o+";"),t.ox&&(e+="overflow-x:"+t.ox+";"),t.oy&&(e+="overflow-y:"+t.oy+";"),null!=t.op&&(e+="opacity:"+t.op+";"),null!=t.ol&&(e+="outline:"+t.ol+";"),t.cr&&(e+="cursor:"+t.cr+";"),t.cn&&(e+="content:"+t.cn+";"),t.k&&0<t.k.indexOf(":")&&(e+="-"==t.k.charAt(0)?"-webkit"+t.k+";":"-webkit-"+t.k+";"),t.k&&0<t.k.indexOf(":")&&(e+="-"==t.k.charAt(0)?"-moz"+t.k+";":"-moz-"+t.k+";"),t.k&&0<t.k.indexOf(":")&&(e+="-"==t.k.charAt(0)?"-o"+t.k+";":"-o-"+t.k+";"),t.k&&0<t.k.indexOf(":")&&(e+="-"==t.k.charAt(0)?"-ms"+t.k+";":"-ms-"+t.k+";"),t.bs&&(e+="box-shadow:"+t.bs+";"),t.bz&&(e+="box-sizing:"+t.bz+";"),t.b&&(e+=0<t.b.indexOf(":")?s("border"+t.b):t.b.match(/^(|none|inherit|initial|unset)$/)||0<t.b.indexOf(" ")?"border:"+t.b+";":"border:1px solid "+t.b+";"),t.bc&&(e+="border-collapse:"+t.bc+";"),null!=t.br&&(e+="number"==typeof t.br?"border-radius:"+t.br+"px;":"border-radius:"+t.br+";"),null!=t.bsp&&(e+="number"==typeof t.bsp?"border-spacing:"+t.bsp+"px;":"border-spacing:"+t.bsp+";"),null!=t.m&&(e+="number"==typeof t.m?"margin:"+t.m+"px;":0<t.m.indexOf(":")?s("margin"+t.m):"margin:"+t.m+";"),null!=t.mt&&(e+="number"==typeof t.mt?"margin-top:"+t.mt+"px;":"margin-top:"+t.mt+";"),null!=t.mr&&(e+="number"==typeof t.mr?"margin-right:"+t.mr+"px;":"margin-right:"+t.mr+";"),null!=t.mb&&(e+="number"==typeof t.mb?"margin-bottom:"+t.mb+"px;":"margin-bottom:"+t.mb+";"),null!=t.ml&&(e+="number"==typeof t.ml?"margin-left:"+t.ml+"px;":"margin-left:"+t.ml+";"),null!=t.p&&(e+="number"==typeof t.p?"padding:"+t.p+"px;":0<t.p.indexOf(":")?s("padding"+t.p):"padding:"+t.p+";"),null!=t.pt&&(e+="number"==typeof t.pt?"padding-top:"+t.pt+"px;":"padding-top:"+t.pt+";"),null!=t.pr&&(e+="number"==typeof t.pr?"padding-right:"+t.pr+"px;":"padding-right:"+t.pr+";"),null!=t.pb&&(e+="number"==typeof t.pb?"padding-bottom:"+t.pb+"px;":"padding-bottom:"+t.pb+";"),null!=t.pl&&(e+="number"==typeof t.pl?"padding-left:"+t.pl+"px;":"padding-left:"+t.pl+";"),null!=t.f&&(e+="number"==typeof t.f?"font-size:"+t.f+"px;":0<t.f.indexOf(":")?s("font"+t.f):"font-size:"+t.f+";"),t.bg&&(e+=0<t.bg.indexOf(":")?s("background"+t.bg):0<=t.bg.indexOf("url")?"background:"+t.bg+";":"background-color:"+t.bg+";"),t.bgi&&(e+="background-image:"+t.bgi+";"),t.bgp&&(e+="background-position:"+t.bgp+";"),t.bgr&&(e+="background-repeat:"+t.bgr+";"),t.text&&(e+=0<t.text.indexOf(":")?s("text"+t.text):"text-decoration:"+t.text+";"),null!=t.l&&(e+="number"==typeof t.l?"left:"+t.l+"px;":"left:"+t.l+";"),null!=t.r&&(e+="number"==typeof t.r?"right:"+t.r+"px;":"right:"+t.r+";"),null!=t.t&&(e+="number"==typeof t.t?"top:"+t.t+"px;":"top:"+t.t+";"),null!=t.bt&&(e+="number"==typeof t.bt?"bottom:"+t.bt+"px;":"bottom:"+t.bt+";"),t.w&&(e+="number"==typeof t.w?"width:"+t.w+"px;":"width:"+t.w+";"),t.h&&(e+="number"==typeof t.h?"height:"+t.h+"px;":"height:"+t.h+";"),t.minw&&(e+="number"==typeof t.minw?"min-width:"+t.minw+"px;":"min-width:"+t.minw+";"),t.maxw&&(e+="number"==typeof t.maxw?"max-width:"+t.maxw+"px;":"max-width:"+t.maxw+";"),t.minh&&(e+="number"==typeof t.minh?"min-height:"+t.minh+"px;":"min-height:"+t.minh+";"),t.maxh&&(e+="number"==typeof t.maxh?"max-height:"+t.maxh+"px;":"max-height:"+t.maxh+";"),t.ws&&(e+="white-space:"+t.ws+";"),e):e}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t||0==t.length)return"";for(var n="",o={},i=!0,r=0;r<t.length;r++){var s=t[r];s&&("string"!=typeof s?($.extend(o,s),i=!1):(i||(n+=u(o),o={},i=!0),0<s.indexOf(":")&&(n+=s,";"!=s.charAt(s.length-1)&&(n+=";"))))}return i||(n+=u(o)),n}function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t||!t.length)return"";for(var n="",o=0;o<t.length;o++){var i=t[o];i&&(!(i="string"==typeof i?i:i.n)||0<i.indexOf(":")||(n+=i+" "))}return n.trim()}function b(t){if(!t)return"";if("string"==typeof t)return t;if("object"!=typeof t)return"";var e,n="";for(e in t)n+=e+'="'+t[e]+'" ';return n.trim()}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!t||!t.length)return"";var n=p.apply(void 0,t),o=s.apply(void 0,t),i="";return n&&(i+=' class="'+n+'"'),o&&(i+=' style="'+o+'"'),i}c.WComponent=a,(t=c.WInputType||(c.WInputType={})).Text="text",t.Number="number",t.Password="password",t.CheckBox="checkbox",t.Radio="radio",t.Date="date",t.DateTime="datetime",t.Time="time",t.File="file",t.Image="image",t.Color="color",t.Email="email",t.Url="url",t.Month="month",t.Week="week",t.Search="search",t.Hidden="hidden",t.Note="note",t.Select="select",t.Static="static",t.Component="component",t.Blank="blank",t.Link="link",t.Integer="integer",t.TreeSelect="tree",l.toArrayComponent=function(t){if(!t)return[];if(Array.isArray(t)&&t.length)return t[0]instanceof a?t:[];var e=[];return t instanceof a&&e.push(t),e},l.hasComponents=function(t){return!!t&&(Array.isArray(t)&&t.length?t[0]instanceof a:t instanceof a)},l.toArray=function(t){if(null==(t=t instanceof a?t.getState():t))return[];if(Array.isArray(t))return t;var e=[];return e.push(t),e},l.toArrayNumber=function(t,e){if(null==(t=t instanceof a?t.getState():t))return[];var n=[];if(Array.isArray(t))for(var o=0,i=t;o<i.length;o++){var r=i[o],s=l.toNumber(r);e&&!s||n.push(s)}else{s=l.toNumber(t);if(e&&!s)return n;n.push(s)}return n},l.toArrayString=function(t,e){if(null==(t=t instanceof a?t.getState():t))return[];var n=[];if(Array.isArray(t))for(var o=0,i=t;o<i.length;o++){var r=i[o],s=l.toString(r);e&&!s||n.push(s)}else{s=l.toString(t);if(e&&!s)return n;n.push(l.toString(t))}return n},l.splitNumbers=function(t,e){if(!t)return[];for(var n=[],o=0,i=l.toString(t).split(e);o<i.length;o++){var r=i[o];n.push(l.toNumber(r))}return n},l.toObject=function(t,e){return null!=(t=t instanceof a?t.getState():t)&&"object"==typeof t?t:e},l.toString=function(t,e){return void 0===e&&(e=""),null==(t=t instanceof a?t.getState():t)?e:"string"==typeof t?t:t instanceof Date?c.formatDate(t):"object"==typeof t&&null!=t.id?l.toString(t.id,e):Array.isArray(t)&&t.length?l.toString(t[0],e):""+t},l.toText=function(t,e){return l.toString(t,e=void 0===e?"":e).replace("<","&lt;").replace(">","&gt;")},l.toNumber=function(t,e){if(void 0===e&&(e=0),null==(t=t instanceof a?t.getState():t))return e;if("number"==typeof t)return t;if(t instanceof Date)return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();if("object"==typeof t&&null!=t.id)return l.toNumber(t.id,e);if(Array.isArray(t)&&t.length)return l.toNumber(t[0],e);t=(""+t).trim(),t=((t=(t=0<=t.indexOf(".")&&0<=t.indexOf(",")?t.replace(".",""):t).replace(",",".")).indexOf(".")>=e?parseFloat:parseInt)(t);return isNaN(t)?e:t},l.toInt=function(t,e){if(void 0===e&&(e=0),null==(t=t instanceof a?t.getState():t))return e;if("number"==typeof t)return Math.floor(t);if(t instanceof Date)return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();if("object"==typeof t&&null!=t.id)return l.toInt(t.id,e);if(Array.isArray(t)&&t.length)return l.toInt(t[0],e);t=(""+t).replace(",","."),t=parseInt(t);return isNaN(t)?e:t},l.toIntTime=function(t,e){if(void 0===e&&(e=0),null==(t=t instanceof a?t.getState():t))return e;if(t instanceof Date)return 100*t.getHours()+t.getMinutes();if(Array.isArray(t)&&t.length)return l.toIntTime(t[0],e);t=(""+t).replace(":","").replace(".","").replace(",",""),t=parseInt(t);return isNaN(t)?e:t},l.isNumeric=function(t){return!isNaN(t)},l.checkEmail=function(t){if(!t)return"";t=l.toString(t);if(!t)return"";if(t.length<5)return"";var e=t.indexOf("@");return e<=0||t.lastIndexOf(".")<e?"":t.trim().toLowerCase()},l.starts=function(t,e){return!(!t||null==e)&&0==l.toString(t).indexOf(e)},l.ends=function(t,e){if(!t||null==e)return!1;var t=l.toString(t),n=t.lastIndexOf(e);return!(n<0)&&n==t.length-e.length},l.isEmpty=function(t){if(!t)return!0;if(Array.isArray(t)&&!t.length)return!0;if("object"!=typeof t)return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},l.toBoolean=function(t,e){return void 0===e&&(e=!1),null==(t=(t=t instanceof c.WCheck?t.getProps():t)instanceof a?t.getState():t)?e:"boolean"==typeof t?t:"string"==typeof t&&t.length?0<="1YyTtSs".indexOf(t.charAt(0)):!!e},l.toDate=function(t,e){if(null==(t=t instanceof a?t.getState():t))return e;if(t instanceof Date)return t;if("number"==typeof t)return t<10000101?e:new Date(t/1e4,t%1e4/100-1,t%1e4%100);if("string"!=typeof t)return e;if(t.length<8)return e;var n=t.indexOf(",");return 3<(t=0<=n?t.substring(n+1):t).indexOf("-")?new Date(t.trim()):this.isNumeric(t)?(n=parseInt(t))<10000101?e:new Date(n/1e4,n%1e4/100-1,n%1e4%100):new Date(t.trim().replace(/(\d{1,2}).(\d{1,2}).(\d{4})/,"$3-$2-$1"))},l.getWeek=function(t){var t=t instanceof Date?new Date(t.getTime()):l.toDate(t),e=((t=t||new Date).setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7),new Date(t.getFullYear(),0,4));return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},l.getParam=function(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return t&&t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):""},l.size=function(t){if(!t)return 0;if(Array.isArray(t))return t.length;if("object"!=typeof t)return 0;var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n},l.setValue=function(t,e,n){return"object"==typeof t&&(t[e]=n),t},l.getValue=function(t,e,n){return e?Array.isArray(t)&&t.length?"-1"==e?l.getLast(t,n):l.isNumeric(e)?l.getItem(t,l.toInt(e),n):l.getValue(t[0],e,n):"object"==typeof t?(o=e.indexOf("."),null==t[e]&&0<o?null==t[i=e.substring(0,o)]?n:l.getValue(t[i],e.substring(o+1),n):null==t[e]?n:t[e]):n:n;var o,i},l.getItem=function(t,e,n){return e<0||!(Array.isArray(t)&&t.length>e&&null!=(o=t[e]))?n:o;var o},l.getEntity=function(t){for(var e,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(!t)return null;if(Array.isArray(t))return(n=t[0])?((e={id:n}).text=l.toString(t[1]),null!=t[2]&&(e.code=t[2]),null!=t[3]&&(e.group=t[3]),null!=t[4]&&(e.type=t[4]),null!=t[5]&&(e.date=l.toDate(t[5])),null!=t[6]&&(e.reference=t[6]),null!=t[7]&&(e.value=l.toNumber(t[7])),e):null;if(!o||!o.length)return null;if(o[0]){if(!(n=l.getValue(t,o[0])))return null;e={id:n}}return e?(o[1]&&(e.text=l.getString(t,o[1])),o[2]&&(e.code=l.getValue(t,o[2])),o[3]&&(e.group=l.getValue(t,o[3])),o[4]&&(e.type=l.getValue(t,o[4])),o[5]&&(e.date=l.getDate(t,o[5])),o[6]&&(e.reference=l.getValue(t,o[6])),o[7]&&(e.value=l.getNumber(t,o[7])),e):null},l.toEntity=function(t,e){if(!t||!e||!e.id)return null;var n={id:l.getValue(t,e.id)};return e.text&&(n.text=l.getString(t,e.text)),e.code&&(n.code=l.getValue(t,e.code)),e.group&&(n.group=l.getValue(t,e.group)),e.type&&(n.type=l.getValue(t,e.type)),e.reference&&(n.reference=l.getValue(t,e.reference)),e.enabled&&(n.enabled=l.getBoolean(t,e.enabled)),e.marked&&(n.marked=l.getBoolean(t,e.marked)),e.date&&(n.date=l.getDate(t,e.date)),e.notBefore&&(n.notBefore=l.getDate(t,e.notBefore)),e.expires&&(n.expires=l.getDate(t,e.expires)),e.icon&&(n.icon=l.getString(t,e.icon)),e.color&&(n.color=l.getString(t,e.color)),e.value&&(n.value=l.getNumber(t,e.value)),n},l.getFirst=function(t,e){return!(Array.isArray(t)&&0<t.length&&null!=(t=t[0]))?e:t},l.getLast=function(t,e){return!(Array.isArray(t)&&0<t.length&&null!=(t=t[t.length-1]))?e:t},l.toCode=function(t,e){return void 0===e&&(e=""),null==(t=t instanceof a?t.getState():t)?e:"string"==typeof t?t:"object"==typeof t&&null!=t.code?t.code:Array.isArray(t)&&t.length?1<t.length?t[1]:t[0]:t},l.toDesc=function(t,e){return void 0===e&&(e=""),null==(t=t instanceof a?t.getState():t)?e:"string"==typeof t?t:"object"==typeof t&&null!=t.text?l.toString(t.text,e):Array.isArray(t)&&t.length?l.toString(t[t.length-1],e):l.toString(t,e)},l.getNumber=function(t,e,n){return l.toNumber(l.getValue(t,e,n))},l.getInt=function(t,e,n){return l.toInt(l.getValue(t,e,n))},l.getString=function(t,e,n,o){t=l.getValue(t,e);return null==t?n:o?"?"==o?"number"==typeof t?c.formatNum(t):l.toString(t):"c"==o?c.formatCurr(t):"c5"==o?c.formatCurr5(t):"n"==o?c.formatNum(t):"n2"==o?c.formatNum2(t):"m"==o?c.formatMonth(t):"d"==o?c.formatDate(t):"dt"==o?c.formatDateTime(t):"t"==o?c.formatTime(t):l.toString(t):l.toString(t)},l.getText=function(t,e,n){return l.toText(l.getValue(t,e,n))},l.getBoolean=function(t,e,n){return l.toBoolean(l.getValue(t,e,n))},l.getDate=function(t,e,n){return l.toDate(l.getValue(t,e,n))},l.getArray=function(t,e){return l.toArray(l.getValue(t,e))},l.getArrayNumber=function(t,e,n){return l.toArrayNumber(l.getValue(t,e),n)},l.getArrayString=function(t,e,n){return l.toArrayString(l.getValue(t,e),n)},l.getCode=function(t,e,n){return l.toCode(l.getValue(t,e,n))},l.getDesc=function(t,e,n){return l.toDesc(l.getValue(t,e,n))},l.getObject=function(t,e,n){t=l.toObject(l.getValue(t,e));return!t&&n?{}:t},l.sort=function(t,e,n){if(void 0===e&&(e=!0),!t)return[];t=l.toArray(t);if(!n)return o=t.sort(),e?o:o.reverse();var o=t.sort(function(t,e){t=l.getValue(t,n),e=l.getValue(e,n);return t<e?-1:e<t?1:0});return e?o:o.reverse()},l.find=function(t,e,n){if(!t||!e)return null;for(var o=0,i=l.toArray(t);o<i.length;o++){var r=i[o],s=l.getValue(r,e);if(s instanceof Date&&n instanceof Date&&s.getTime()==n.getTime())return r;if(s==n)return r}return null},l.indexOf=function(t,e,n){if(!t||!e)return-1;for(var o=l.toArray(t),i=0;i<o.length;i++){var r=l.getValue(o[i],e);if(r instanceof Date&&n instanceof Date&&r.getTime()==n.getTime())return i;if(r==n)return i}return-1},l.isSameDate=function(t,e){return this.toNumber(t)==this.toNumber(e)},l.indexOfDate=function(t,e){if(!t||!e)return-1;for(var n=l.toNumber(e),o=0;o<t.length;o++)if(t[o]&&l.toNumber(t[o])==n)return o;return-1},l.round2=function(t){if(null==t)return 0;t=l.toNumber(t);return Math.round(100*t)/100},l.floor2=function(t){if(null==t)return 0;t=l.toNumber(t);return Math.floor(100*t)/100},l.ceil2=function(t){if(null==t)return 0;t=l.toNumber(t);return Math.ceil(100*t)/100},l.compare2=function(t,e){if(!t&&!e)return 0;t=Math.round(100*l.toNumber(t)),e=Math.round(100*l.toNumber(e));return t==e?0:e<t?1:-1},l.compare5=function(t,e){if(!t&&!e)return 0;t=Math.round(1e4*l.toNumber(t)),e=Math.round(1e4*l.toNumber(e));return t==e?0:e<t?1:-1},l.getCurrDate=function(t,e,n,o,i){var r=new Date;return r.setHours(0,0,0,0),t&&r.setDate(r.getDate()+t),e&&r.setMonth(r.getMonth()+e),n&&r.setFullYear(r.getFullYear()+n),o&&r.setDate(1),i&&(r.setMonth(r.getMonth()+1),r.setDate(0)),r},l.calcDate=function(t,e,n,o,i,r){return(t=t?new Date(t.getTime()):new Date).setHours(0,0,0,0),e&&t.setDate(t.getDate()+e),n&&t.setMonth(t.getMonth()+n),o&&t.setFullYear(t.getFullYear()+o),i&&t.setDate(1),r&&(t.setMonth(t.getMonth()+1),t.setDate(0)),t},l.timestamp=function(t){var t=t?l.toDate(t):new Date,e=""+(t=t||new Date).getFullYear(),n=t.getMonth()+1,n=n<10?"0"+n:""+n,o=t.getDate(),o=o<10?"0"+o:""+o,i=t.getHours(),i=i<10?"0"+i:""+i,r=t.getMinutes(),r=r<10?"0"+r:""+r,t=t.getSeconds();return e+n+o+i+r+(t<10?"0"+t:""+t)},l.nvl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t){for(var n=0,o=t;n<o.length;n++){var i=o[n];if(!i)return i}return t[0]}},l.eqValues=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!t&&!e)return!0;if(!t||!e)return!1;for(var i=0,r=n;i<r.length;i++){var s=r[i];if(t[s]!=e[s])return!1}return!0},l.cat=function(t,e,n,o,i){var t=l.toString(t),e=l.toString(e),n=l.toString(n),o=l.toString(o),i=l.toString(i),r="";return t&&(r+=t,n&&(r+=n)),e&&(o&&(r+=o),r+=e,i&&(r+=i)),r},l.col=function(t,e,n){var o=[];if(!t||!t.length)return o;for(var i=0,r=t;i<r.length;i++){var s=r[i];o.push(l.getItem(s,e,n))}return o},l.getSortedKeys=function(t){if(!t)return[];var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n.sort()},l.diffMinutes=function(t,e){t=l.toDate(t),e=l.toDate(e),t=t||new Date,e=e||new Date;return(t.getTime()-e.getTime())/6e4},l.diffHours=function(t,e){t=l.toDate(t),e=l.toDate(e),t=t||new Date,e=e||new Date;return(t.getTime()-e.getTime())/36e5},l.diffDays=function(t,e){t=l.toDate(t),e=l.toDate(e),t=t||new Date,e=e||new Date,t=t.getTime()-e.getTime(),e=t/864e5;return 12<t%864e5/6e4&&e++,e},c.WUtil=l,c.getId=o,c.firstSub=function(t,e){if(!(t=o(t)))return"";var n=t.indexOf("-");return n<0?t:e?t.substring(n+1):t.substring(0,n)},c.lastSub=function(t){if(!(t=o(t)))return"";var e=t.lastIndexOf("-");return e<0?t:0<e&&"-"==t.charAt(e-1)?t.substring(e):t.substring(e+1)},c.getComponent=function(t){if(t){t=$("#"+t);if(t.length)return t.wuxComponent(!1)}},c.getRootComponent=function t(e){return e&&(e.parent?t(e.parent):e)},c.setProps=function(t,e){if(t){t=$("#"+t);if(t.length){t=t.wuxComponent(!1);if(t)return t.setProps(e),t}}},c.getProps=function(t,e){return!t||!(t=$("#"+t)).length||!(t=t.wuxComponent(!1))||null==(t=t.getProps())?e:t},c.setState=function(t,e){if(t){t=$("#"+t);if(t.length){t=t.wuxComponent(!1);if(t)return t.setState(e),t}}},c.getState=function(t,e){return!t||!(t=$("#"+t)).length||!(t=t.wuxComponent(!1))||null==(t=t.getState())?e:t},c.newInstance=function(t){if(!t)return null;var e=t.lastIndexOf(".");if(0<e){var n=t.substring(0,e);if(window[n]){var o,i=t.substring(e+1);for(o in window[n])if(o==i)return new window[n][o];return null}}return(e=window[t])&&e.prototype?Object.create(e.prototype):null},c.same=function(t,e){return"string"==typeof t&&"string"==typeof e?t==e:"string"!=typeof t&&"string"!=typeof e&&(t=o(t),e=o(e),t&&e&&t==e)},c.parse=f,c.divide=h,c.str=g,c.getTagName=function(t){if(!t)return"";if(t instanceof a){if(n=t.rootTag)return n.toLowerCase();var e=t.getRoot();return e?"":c.getTagName(e)}var n;return t instanceof jQuery?t.length&&(n=t.prop("tagName"))?(""+n).toLowerCase():"":"<"==(e=""+t).charAt(0)?0<(t=(t=e.indexOf(" "))<0?e.indexOf(">"):t)?"/"==(n=e.substring(1,t).toLowerCase()).charAt(n.length-1)?n.substring(0,n.length-1):n:"":"#"==e.charAt(0)?c.getTagName($(e)):c.getTagName($("#"+e))},c.match=function(t,e){return e?null==t?"string"==typeof e?""==e:!e.id:"object"==typeof t?"string"==typeof e?e==t.id:e.id==t.id:"string"==typeof e?e==t:e.id==t:!t},c.hashCode=function(t){if(!t)return 0;var e=""+t,n=0,o=e.length,i=0;if(0<o)for(;i<o;)n=(n<<5)-n+e.charCodeAt(i++)|0;return n},c.styleObj=r,c.style=u,c.addStyle=function(t,e,n,o){return e&&n?t?o&&0<=t.indexOf(e+":")?s(t):s(t)+e+":"+n+";":e+":"+n+";":s(t)},c.css=s,c.cls=p,c.attributes=b,c.ul=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!e||!e.length)return"";for(var o=t?"<ul"+y(t)+">":"<ul>",i=0;i<e.length;i++){var r=e[i];null!=r&&(o+="<li>"+r+"</li>")}return o+="</ul>"},c.ol=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!n||!n.length)return"";for(var i="",i=null!=e?t?"<ol"+y(t)+' start="'+e+'">':'<ol start="'+e+'">':t?"<ol"+y(t)+">":"<ol>",r=0;r<n.length;r++){var s=n[r];null!=s&&(i+="<li>"+s+"</li>")}return i+="</ol>"},c.buildCss=y,c.removeClass=function(t,e){if(!t||!e)return t;for(var n="",o=0,i=t.split(" ");o<i.length;o++){var r=i[o];r!=e&&(n+=r+" ")}return n.trim()},c.toggleClass=function(t,e){if(!t)return e;if(!e)return t;for(var n=!1,o="",i=0,r=t.split(" ");i<r.length;i++){var s=r[i];s==e?n=!0:o+=s+" "}return n?o.trim():o.trim()+" "+e},c.setCss=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t||!e||!e.length)return t;if(t instanceof a)t.css.apply(t,e);else if(t instanceof jQuery){if(!t.length)return t;var o=s.apply(void 0,e),i=p.apply(void 0,e);i&&t.addClass(i),o&&t.css(r(o))}return t},c.buildIcon=function(t,e,n,o,i,r){return t?(e=e||"",n=n||"",r=r?' title="'+r+'"':"",i=i?" "+i:"",0<t.indexOf(".")?e+'<img src="'+t+'"'+r+">"+n:!o||o<2?e+'<i class="fa '+t+i+'"'+r+"></i>"+n:e+'<i class="fa '+t+" fa-"+(o=5<o?5:o)+"x"+i+'"'+r+"></i>"+n):""},c.build=function(t,e,n,o,i,r){t=t||"div","string"==typeof n?0<n.indexOf(":")?a=n:s=n:n&&(n.n&&(s=n.n),a=c.style(n)),r&&(s?s+=" "+r:s=r);var s,a,n="<"+t;i&&(n+=' id="'+i+'"'),s&&(n+=' class="'+s+'"'),a&&(n+=' style="'+a+'"');(r=c.attributes(o))&&(n+=" "+r),n+=">",i=h(e);return n+=i[1],"input"==t?i[0]+n+i[2]:i[0]+(n+="</"+t+">")+i[2]},c.addWrapper=function(t,e,n,o){if(!t||!e)return t;var i=c.cls(e.classStyle,e.style),r=c.style(e.style),s=e.type||"div",a="<"+s;e.id&&(a+=' id="'+e.id+'"'),i&&(a+=' class="'+i+'"'),r&&(a+=' style="'+r+'"');(i=c.attributes(b))&&(a+=" "+i),e.title&&(a+=' title="'+e.title+'"'),a=a+"></"+s+">",r=$(a);return e.element=r,n&&t.append(n),t.append(r),o&&t.append(o),e.wrapper?c.addWrapper(r,e.wrapper,e.begin,e.end):(e.begin&&r.append(e.begin),e.end&&r.append(e.end),r)},c.val=function(t,e){if(t){if("string"==typeof t){if(0<=t.indexOf("<"))return;t.indexOf("#")<0&&(t="#"+t);var n=c.getComponent(t);if(n){if(void 0===e)return n.getState();n.setState(e)}else{if(void 0===e)return $(t).val();$(t).val(e)}}else if(t instanceof a){if(void 0===e)return t.getState();t.setState(e)}else if(t instanceof jQuery){if(void 0===e)return t.val();t.val(e)}else{if(void 0===e)return $(t).val();$(t).val(e)}return e}},c.getContainer=function(t,e){if(void 0===e&&(e="div"),t){if("string"==typeof t)return 0<=t.indexOf("<")?void 0:(t.indexOf("#")<0&&(t="#"+t),c.getContainer($(t)));if(t instanceof a){var n,o=t.getContext();if(o)if((n=o.closest(e))&&n.length)return n;return o}return(n=t.parent().closest(e))&&n.length?n:t.parent()}},c.openURL=function(t,e,n,o){if(void 0===e&&(e=!0),void 0===n&&(n=!1),t){if(o&&"object"==typeof o){var i,r,s="";for(i in o)o.hasOwnProperty(i)&&(r=o[i],s+="&"+encodeURIComponent(i)+"="+encodeURIComponent(r));s&&(0<t.indexOf("?")?t+=s:t+="?"+s.substring(1))}n?window.open(t,"_blank"):e?window.location.assign(t):window.location.replace(t)}}}(WUX=WUX||{}),!function(h){var r={},s={};h.global={locale:"it",main_class:"container-fluid",con_class:"container",box_class:"ibox",box_header:"ibox-title",box_title:"<h5>$</h5>",box_tools:"ibox-tools",box_content:"ibox-content",box_footer:"ibox-footer",chart_bg0:"rgba(26,179,148,0.5)",chart_bg1:"rgba(220,220,220,0.5)",chart_bg2:"rgba(160,220,255,0.5)",chart_bc0:"rgba(26,179,148,0.7)",chart_bc1:"rgba(220,220,220,0.7)",chart_bc2:"rgba(160,220,255,0.7)",chart_p0:"rgba(26,179,148,1)",chart_p1:"rgba(220,220,220,1)",chart_p2:"rgba(160,220,255,1)",area:{b:"-radius:8px",m:"0px 0px 0px 0px",p:"16px 7px 5px 7px",bg:"white"},area_title:{b:"none",f:14,fw:"bold",w:"unset",ps:"relative",t:12,l:0,m:0},section:{b:"#e7eaec",m:"2px 0px 4px 0px",p:"8px 8px 8px 8px",bg:"#fafafa"},section_title:{b:"none",f:16,fw:"600",w:"unset",m:"-bottom:2px",tt:"uppercase"},window_top:{ps:"fixed",t:0,bg:"#ffffff",ml:-10,p:"0 10px",z:1001},window_bottom:{ps:"fixed",bt:0,bg:"#ffffff",ml:-10,p:"0 10px",z:1001},init:function(t){h.debug&&console.log("[WUX] global.init..."),h.debug&&console.log("[WUX] global.init completed"),t&&t()},setData:function(t,e,n){if(void 0===n&&(n=!1),r[t=t||"global"]=e,!n&&s[t])for(var o=0,i=s[t];o<i.length;o++)(0,i[o])(e)},getData:function(t,e){t=r[t=t||"global"];return null==t?e:t},onDataChanged:function(t,e){s[t=t||"global"]||(s[t]=[]),s[t].push(e)}},h.showMessage=function(t,e,n,o){_showMessage(t,e,n,o)},h.showInfo=function(t,e,n,o){_showInfo(t,e,n,o)},h.showSuccess=function(t,e,n){_showSuccess(t,e,n)},h.showWarning=function(t,e,n){_showWarning(t,e,n)},h.showError=function(t,e,n){_showError(t,e,n)},h.confirm=function(t,e){_confirm(t,e)},h.getInput=function(t,e,n){_getInput(t,e,n)},h.getPageTitle=function(){return $("#ptitle")},h.getBreadcrump=function(){return $("#pbreadcrumb")},h.getPageHeader=function(){return $("#pheader")},h.getPageFooter=function(){return $("#pfooter")},h.getPageMenu=function(){return $("#side-menu")},h.getViewRoot=function(){return $("#view-root")},h.sticky=function(t){},h.stickyRefresh=function(){},h.formatDate=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),!t)return"";if(!(t=h.WUtil.toDate(t)))return"";var o=(o=t.getMonth()+1)<10?"0"+o:""+o,i=t.getDate()<10?"0"+t.getDate():""+t.getDate();return e?h.formatDay(t.getDay(),n)+", "+i+"/"+o+"/"+t.getFullYear():i+"/"+o+"/"+t.getFullYear()},h.formatDateTime=function(t,e,n,o){if(void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),!t)return"";if(!(t=h.WUtil.toDate(t)))return"";var i=(i=t.getMonth()+1)<10?"0"+i:""+i,r=t.getDate()<10?"0"+t.getDate():""+t.getDate(),s=t.getHours()<10?"0"+t.getHours():""+t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():""+t.getMinutes();return e?(e=t.getSeconds()<10?"0"+t.getSeconds():""+t.getSeconds(),n?h.formatDay(t.getDay(),o)+", "+r+"/"+i+"/"+t.getFullYear()+" "+s+":"+a+":"+e:r+"/"+i+"/"+t.getFullYear()+" "+s+":"+a+":"+e):n?h.formatDay(t.getDay(),o)+", "+r+"/"+i+"/"+t.getFullYear()+" "+s+":"+a:r+"/"+i+"/"+t.getFullYear()+" "+s+":"+a},h.formatTime=function t(e,n){return void 0===n&&(n=!1),null==e?"":"number"==typeof e?n?(e<1e4&&(e*=100),i=e%1e4%100,Math.floor(e/1e4)+":"+((o=Math.floor(e%1e4/100))<10?"0"+o:""+o)+":"+(i<10?"0"+i:""+i)):(9999<e&&(e=Math.floor(e/100)),Math.floor(e/100)+":"+((o=e%100)<10?"0"+o:""+o)):"string"==typeof e?(0<=(i=(i=(i=(e=0<=(i=(i=e.indexOf("T"))<0?e.indexOf(" "):i)?e.substring(i+1):e).indexOf("+"))<0?e.indexOf("-"):i)<0?e.indexOf("Z"):i)&&(e=e.substring(0,i)),t(parseInt(e.replace(":","").replace(".","")))):e instanceof Date?(o=e.getHours()<10?"0"+e.getHours():""+e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():""+e.getMinutes(),n?o+":"+i+":"+(e.getSeconds()<10?"0"+e.getSeconds():""+e.getSeconds()):o+":"+i):"";var o,i},h.formatNum2=function(t,e,n,o){if(""===t||null==t)return"";var t=h.WUtil.toNumber(t),i=(""+Math.round(100*t)/100).replace(".",",");return null!=e&&0!=t?(null!=o&&t<0?o:e).replace("$",i):null!=n&&0==t?n.replace("$",i):i},h.formatNum=function(t,e,n,o){if(""===t||null==t)return"";var i=(""+(t=h.WUtil.toNumber(t))).replace(".",",");return null!=e&&0!=t?null!=o&&t<0?"l"==o?t.toLocaleString("it-IT"):o.replace("$",i):"l"==e?t.toLocaleString("it-IT"):e.replace("$",i):null!=n&&0==t?n.replace("$",i):i},h.formatCurr=function(t,e,n,o){if(""===t||null==t)return"";var t=h.WUtil.toNumber(t),i=(Math.round(100*t)/100).toLocaleString("it-IT"),r=i.indexOf(",");return r<0&&(i+=",00"),r==i.length-2&&(i+="0"),null!=e&&0!=t?(null!=o&&t<0?o:e).replace("$",i):null!=n&&0==t?n.replace("$",i):i},h.formatCurr5=function(t,e,n,o){if(""===t||null==t)return"";var t=h.WUtil.toNumber(t),i=(""+Math.round(1e5*t)/1e5).replace(".",",");if((s=i.indexOf(","))<0&&(i+=",00"),s==i.length-2&&(i+="0"),0<s){for(var r=i.substring(0,s),s=i.substring(s),a="",l=1;l<=r.length;l++)3<l&&(l-1)%3==0&&(a="."+a),a=r.charAt(r.length-l)+a;i=a+s}return null!=e&&0!=t?(null!=o&&t<0?o:e).replace("$",i):null!=n&&0==t?n.replace("$",i):i},h.formatBoolean=function(t){return null==t?"":t?"S":"N"},h.format=function(t){if(null==t)return"";if("string"==typeof t)return t;if("boolean"==typeof t)return h.formatBoolean(t);if("number"==typeof t)return 0<=(""+t).indexOf(".")?h.formatCurr(t):h.formatNum(t);if(t instanceof Date)return h.formatDate(t);if(t instanceof h.WComponent){if(t instanceof h.WCheck)return t.checked?t.text:"";if("select"!=t.rootTag)return h.format(t.getState());var e=t.getProps();if(Array.isArray(e)&&1<e.length){for(var n,o,i="",r=0,s=e;r<s.length;r++)(n=""+s[r])&&(9<n.length?i+=","+(n=0<(o=n.indexOf(" -"))?n.substring(0,o).trim():n):i+=","+n);return i=i.length?i.substring(1):i}return n=(n=""+t.getProps())||t.getState(),h.format(n)}return""+t},h.formatDay=function(t,e){switch(t){case 0:return e?"Domenica":"Dom";case 1:return e?"Luned&igrave;":"Lun";case 2:return e?"Marted&igrave;":"Mar";case 3:return e?"Mercoled&igrave;":"Mer";case 4:return e?"Giove&igrave;":"Gio";case 5:return e?"Venerd&igrave;":"Ven";case 6:return e?"Sabato":"Sab"}return""},h.formatMonth=function(t,e,n){switch(100<t&&(n=Math.floor(t/100),t%=100),n=n?" "+n:"",t){case 1:return e?"Gennaio"+n:"Gen"+n;case 2:return e?"Febbraio"+n:"Feb"+n;case 3:return e?"Marzo"+n:"Mar"+n;case 4:return e?"Aprile"+n:"Apr"+n;case 5:return e?"Maggio"+n:"Mag"+n;case 6:return e?"Giugno"+n:"Giu"+n;case 7:return e?"Luglio"+n:"Lug"+n;case 8:return e?"Agosto"+n:"Ago"+n;case 9:return e?"Settembre"+n:"Set"+n;case 10:return e?"Ottobre"+n:"Ott"+n;case 11:return e?"Novembre"+n:"Nov"+n;case 12:return e?"Dicembre"+n:"Dic"+n}return""},h.decodeMonth=function(t){return t?"number"==typeof t?0<t&&t<13?t:0:"gen"==(t=3<(t=(""+t).toLowerCase()).length?t.substring(0,3):t)?1:"feb"==t?2:"mar"==t?3:"apr"==t?4:"mag"==t?5:"giu"==t?6:"lug"==t?7:"ago"==t?8:"set"==t?9:"ott"==t?10:"nov"==t?11:"dic"==t?12:0<(t=h.WUtil.toInt(t))&&t<13?t:0:0},h.norm=function(t){return t?(t=(t=(t=(t=""+t).replace("À","A'").replace("È","E'").replace("Ì","I'").replace("Ò","O'").replace("Ù","U'")).replace("à","a'").replace("è","e'").replace("ì","i'").replace("ò","o'").replace("ù","u'")).replace("á","a`").replace("é","e`").replace("í","i`").replace("ó","o`").replace("ú","u`")).replace("€","E").replace("ª","a").replace("°","o"):""},h.den=function(t){return t?(t=(t=(t=(t=""+t).replace("A'","À").replace("E'","È").replace("I'","Ì").replace("O'","Ò").replace("U'","Ù")).replace("a'","à").replace("e'","è").replace("i'","ì").replace("o'","ò").replace("u'","ù")).replace("a`","á").replace("e`","é").replace("i`","í").replace("o`","ó").replace("u`","ú")).replace(" pò"," po'"):""},h.text=function(t){return t?(t=(t=(t=(t=""+t).replace("&Agrave;","A'").replace("&Egrave;","E'").replace("&Igrave;","I'").replace("&Ograve;","O'").replace("&Ugrave;","U'")).replace("&agrave;","a'").replace("&egrave;","e'").replace("&igrave;","i'").replace("&ograve;","o'").replace("&ugrave;","u'")).replace("&aacute;","a`").replace("&eacute;","e`").replace("&iacute;","i`").replace("&oacute;","o`").replace("&uacute;","u`")).replace("&euro;","E").replace("&nbsp;"," ").replace("&amp;","&").replace("&gt;",">").replace("&lt;","<").replace("&quot;",'"'):""};var t,l="@D:=E?('B;F)<=A>C@?):D';@=B<?C;)E:'@=?A(B<=;(?@>E:";function e(){}function n(){}h.encrypt=function(t){if(!t)return"";for(var e=""+t,n="",o=0,i=0;i<e.length;i++){var o=l.length-1<=o?0:o+1,r=e.charCodeAt(i),s=l.charCodeAt(o),a=r;32<=r&&r<=126&&(a-=s)<32&&(a=127+a-32),n+=String.fromCharCode(a)}return n},h.decrypt=function(t){if(!t)return"";for(var e=""+t,n="",o=0,i=0;i<e.length;i++){var o=l.length-1<=o?0:o+1,r=e.charCodeAt(i),s=l.charCodeAt(o),a=r;32<=r&&r<=126&&126<(a+=s)&&(a=31+a-126),n+=String.fromCharCode(a)}return n},(t=h.BTN||(h.BTN={})).PRIMARY="btn btn-primary",t.SECONDARY="btn btn-secondary",t.SUCCESS="btn btn-success",t.DANGER="btn btn-danger",t.WARNING="btn btn-warning",t.INFO="btn btn-info",t.LIGHT="btn btn-light",t.DARK="btn btn-dark",t.LINK="btn btn-link",t.WHITE="btn btn-white",t.SM_PRIMARY="btn btn-sm btn-primary btn-block",t.SM_DEFAULT="btn btn-sm btn-default btn-block",t.SM_SECONDARY="btn btn-sm btn-secondary btn-block",t.SM_INFO="btn btn-sm btn-info btn-block",t.SM_WARNING="btn btn-sm btn-warning btn-block",t.SM_DANGER="btn btn-sm btn-danger btn-block",t.SM_WHITE="btn btn-sm btn-white btn-block",t.ACT_PRIMARY="btn btn-sm btn-primary",t.ACT_DEFAULT="btn btn-sm btn-default",t.ACT_SECONDARY="btn btn-sm btn-secondary",t.ACT_INFO="btn btn-sm btn-info",t.ACT_WARNING="btn btn-sm btn-warning",t.ACT_DANGER="btn btn-sm btn-danger",t.ACT_WHITE="btn btn-sm btn-white",t.ACT_OUTLINE_PRIMARY="btn btn-sm btn-primary btn-outline",t.ACT_OUTLINE_DEFAULT="btn btn-sm btn-default btn-outline",t.ACT_OUTLINE_INFO="btn btn-sm btn-info btn-outline",t.ACT_OUTLINE_WARNING="btn btn-sm btn-warning btn-outline",t.ACT_OUTLINE_DANGER="btn btn-sm btn-danger btn-outline",e.NORMAL={bg:"#ffffff"},e.ERROR={bg:"#fce6e8"},e.WARNING={bg:"#fef3e6"},e.SUCCESS={bg:"#d1f0ea"},e.INFO={bg:"#ddedf6"},e.COMPLETED={bg:"#eeeeee"},e.MARKED={bg:"#fff0be"},e.BTN_MED={w:110,f:12,a:"left"},e.BTN_SMALL={w:90,f:12,a:"left"},e.STACK_BTNS={pt:2,pb:2,a:"center"},e.LINE_BTNS={pl:2,pr:2,a:"center"},e.FORM_CTRL="form-control",e.FORM_CTRL_SM="form-control input-sm",e.FIELD_REQUIRED={c:"#676a96"},e.FIELD_CRITICAL={c:"#aa6a6c"},e.FIELD_INTERNAL={c:"#aa6a6c"},e.LABEL_NOTICE={c:"#aa6a6c",fw:"bold"},e.LABEL_INFO={c:"#676a96",fw:"bold"},h.CSS=e,(t=h.WIcon||(h.WIcon={})).LARGE="fa-lg ",t.ADDRESS_CARD="fa-address-card",t.ANGLE_DOUBLE_LEFT="fa-angle-double-left",t.ANGLE_DOUBLE_RIGHT="fa-angle-double-right",t.ANGLE_LEFT="fa-angle-left",t.ANGLE_RIGHT="fa-angle-right",t.ARROW_CIRCLE_DOWN="fa-arrow-circle-down",t.ARROW_CIRCLE_LEFT="fa-arrow-circle-left",t.ARROW_CIRCLE_O_DOWN="fa-arrow-circle-o-down",t.ARROW_CIRCLE_O_LEFT="fa-arrow-circle-o-left",t.ARROW_CIRCLE_O_RIGHT="fa-arrow-circle-o-right",t.ARROW_CIRCLE_O_UP="fa-arrow-circle-o-up",t.ARROW_CIRCLE_RIGHT="fa-arrow-circle-right",t.ARROW_CIRCLE_UP="fa-arrow-circle-up",t.ARROW_DOWN="fa-arrow-down",t.ARROW_LEFT="fa-arrow-left",t.ARROW_RIGHT="fa-arrow-right",t.ARROW_UP="fa-arrow-up",t.BOLT="fa-bolt",t.BACKWARD="fa-backward",t.BOOKMARK="fa-bookmark",t.BOOKMARK_O="fa-bookmark-o",t.CALENDAR="fa-calendar",t.CALCULATOR="fa-calculator",t.CHAIN="fa-chain",t.CHAIN_BROKEN="fa-chain-broken",t.CHECK="fa-check",t.CHECK_CIRCLE="fa-check-circle",t.CHECK_CIRCLE_O="fa-check-circle-o",t.CHECK_SQUARE="fa-check-square",t.CHECK_SQUARE_O="fa-check-square-o",t.CHEVRON_DOWN="fa-chevron-down",t.CHEVRON_UP="fa-chevron-up",t.CLOCK_O="fa-clock-o",t.CLOSE="fa-close",t.COG="fa-cog",t.COMMENT="fa-comment",t.COMMENTS_O="fa-comments-o",t.COPY="fa-copy",t.CUT="fa-cut",t.DATABASE="fa-database",t.EDIT="fa-edit",t.ENVELOPE_O="fa-envelope-o",t.EXCHANGE="fa-exchange",t.FILE="fa-file",t.FILE_O="fa-file-o",t.FILE_CODE_O="fa-file-code-o",t.FILE_PDF_O="fa-file-pdf-o",t.FILE_TEXT_O="fa-file-text-o",t.FILES="fa-files-o",t.FILTER="fa-filter",t.FOLDER="fa-folder",t.FOLDER_O="fa-folder-o",t.FOLDER_OPEN="fa-folder-open",t.FOLDER_OPEN_O="fa-folder-open-o",t.FORWARD="fa-forward",t.GRADUATION_CAP="fa-graduation-cap",t.INFO_CIRCLE="fa-info-circle",t.LIFE_RING="fa-life-ring",t.LINK="fa-link",t.LEGAL="fa-legal",t.LIST="fa-list",t.MINUS="fa-minus",t.MINUS_SQUARE_O="fa-minus-square-o",t.PASTE="fa-paste",t.PENCIL="fa-pencil",t.PIE_CHART="fa-pie-chart",t.PLUS="fa-plus",t.PLUS_SQUARE_O="fa-plus-square-o",t.PRINT="fa-print",t.QUESTION_CIRCLE="fa-question-circle",t.RANDOM="fa-random",t.RECYCLE="fa-recycle",t.REFRESH="fa-refresh",t.SEARCH="fa-search",t.SEARCH_MINUS="fa-search-minus",t.SEARCH_PLUS="fa-search-plus",t.SEND="fa-send",t.SHARE_SQUARE_O="fa-share-square-o",t.SHOPPING_CART="fa-shopping-cart",t.SIGN_IN="fa-sign-in",t.SIGN_OUT="fa-sign-out",t.SQUARE="fa-square",t.SQUARE_O="fa-square-o",t.TH_LIST="fa-th-list",t.THUMBS_O_DOWN="fa-thumbs-o-down",t.THUMBS_O_UP="fa-thumbs-o-up",t.TIMES="fa-times",t.TIMES_CIRCLE="fa-times-circle",t.TOGGLE_OFF="fa-toggle-off",t.TOGGLE_ON="fa-toggle-on",t.TRASH="fa-trash",t.TRUCK="fa-truck",t.UNDO="fa-undo",t.UPLOAD="fa-upload",t.USER="fa-user",t.USER_O="fa-user-o",t.USERS="fa-users",t.WARNING="fa-warning",t.WIFI="fa-wifi",t.WRENCH="fa-wrench",n.OK="OK",n.CLOSE="Chiudi",n.CANCEL="Annulla",n.ERR_DATE="Data non ammessa.",h.RES=n}(WUX=WUX||{}),this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}());!function(M){a=M.WComponent,__extends(h,a),h.create=function(t){if(!t)return new h;var e=t.type?"<"+t.type+">":"",e=new h(t.id,t.classStyle,t.style,t.attributes,!1,e);return e.wrapper=t.wrapper,e},h.prototype.updateState=function(t){a.prototype.updateState.call(this,t),this.stateComp&&this.stateComp.setState(this.state)},h.prototype.getState=function(){return this.stateComp&&(this.state=this.stateComp.getState()),this.state},h.prototype.on=function(t,e){return a.prototype.on.call(this,t,e),"statechange"==t&&this.stateComp&&this.stateComp.on("statechange",e),this},h.prototype.off=function(t){return a.prototype.off.call(this,t),"statechange"==t&&this.stateComp&&this.stateComp.off("statechange"),this},h.prototype.trigger=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return a.prototype.trigger.apply(this,__spreadArray([t],n,!1)),"statechange"==t&&this.stateComp&&(e=this.stateComp).trigger.apply(e,__spreadArray(["statechange"],n,!1)),this},h.prototype.setLayout=function(t){this.layoutManager=t},h.prototype.section=function(t,e,n){return this.legend=t,this.fieldsetStyle=e?M.css(M.global.section,e):M.global.section,this.legendStyle=n?M.css(M.global.section_title,n):M.global.section_title,this},h.prototype.area=function(t,e,n){return this.legend=t,this.fieldsetStyle=e?M.css(M.global.area,e):M.global.area,this.legendStyle=n?M.css(M.global.area_title,n):M.global.area_title,this},h.prototype.end=function(){return this.parent instanceof h?this.parent.end():this},h.prototype.grid=function(){return"row"==this.props&&this.parent instanceof h?this.parent:this.parent instanceof h?this.parent.grid():this},h.prototype.row=function(){if("row"==this.props)return this;if(this.parent)return this.parent instanceof h?this.parent.row():this;if(!this.components||!this.components.length)return this;for(var t=this.components.length-1;0<=t;t--){var e=this.components[t];if(e instanceof h&&"row"==e.getProps())return e}return this},h.prototype.col=function(){return"col"!=this.props&&this.parent instanceof h?this.parent.col():this},h.prototype.addDiv=function(t,e,n,o){if("number"!=typeof t)return i=M.build("div",e,t,n,o),this.add($(i));if(t<1)return this;var i=M.build("div",e,{h:t,n:n});return this.add($(i))},h.prototype.addSpan=function(t,e,n,o){return e="number"==typeof t?M.build("span",e,{w:t,d:"inline-block",a:"center",n:n}):M.build("span",e,t,n,o),this.add($(e))},h.prototype.addGroup=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){var o=this.addContainer(t);if(!e||!e.length)return this;for(var i=0,r=e;i<r.length;i++){var s=r[i];o.add(s)}return this}if(!e||!e.length)return this;for(var a=0,l=e;a<l.length;a++){s=l[a];this.add(s)}return this},h.prototype.add=function(t,e){return t&&(t instanceof M.WComponent&&(t.parent||(t.parent=this)),"string"==typeof t&&0<t.length&&"<"==t.charAt(0)&&">"==t.charAt(t.length-1)&&(n=$(t)),this.components.push(n=n||t),this.layoutManager&&this.layoutManager.addLayoutComponent(n,e)),this;var n},h.prototype.remove=function(t){if(!((t=t<0?this.components.length+t:t)<0||t>=this.components.length))return t=this.components.splice(t,1),this.layoutManager&&t.length&&this.layoutManager.removeLayoutComponent(t[0]),this},h.prototype.removeAll=function(){if(this.layoutManager)for(var t=0,e=this.components;t<e.length;t++){var n=e[t];this.layoutManager.removeLayoutComponent(n)}if(this.mounted){this.parent=null;for(var o=0,i=this.components;o<i.length;o++){var r=i[o];r instanceof M.WComponent&&r.unmount()}}return this.components=[],this},h.prototype.addRow=function(t,e,n,o){n=new h(n,null==t?"row":t,e,o,!1,"row");return n.name=n.name+"_row",this.grid().addContainer(n)},h.prototype.addCol=function(t,e,n,o){n=new h(n,null==(t=M.WUtil.isNumeric(t)?"col-md-"+t:t)?"col":t,e,o,!1,"col");return n.name=n.name+"_col",this.row().addContainer(n)},h.prototype.addASide=function(t,e,n,o){n=new h(n,t,e,o,!1,"aside");return n.name=n.name+"_aside",this.end().addContainer(n)},h.prototype.addBox=function(t,e,n,o,i){o=new l(o,t,e,n,i);return this.addContainer(o),o},h.prototype.addText=function(t,e,n,o,i,r){if(!t||!t.length)return this;for(var s,a="",l=(e&&(a=0<(s=e.indexOf(" "))?e.substring(0,s):e),""),h=0,u=t;h<u.length;h++){var p=u[h];if(p&&3<p.length){var c=p.substring(0,3);if("<ul"==c||"<ol"==c||"<li"==c||"<di"==c){l+=p;continue}}l+=e&&"br"!=e?"<"+e+">"+p+"</"+a+">":p+"<br>"}return n||o||i||r?this.add(M.build("div",l,o,r,i,n)):this.add(l),this},h.prototype.findBox=function(t){var e="";t&&1<t.length&&"#"==t.charAt(0)&&(e=t.substring(1));for(var n=0,o=this.components;n<o.length;n++){var i=o[n];if(i instanceof l)if(e){if(i.id==e)return i}else{if(!t)return i;if(i.title==t||i.id==t)return i}else if(i instanceof h){i=i.findBox(t);if(!i)return i}}return null},h.prototype.addStack=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!e||0==e.length)return this;for(var o=M.style(t),i=M.cls(t),r=0;r<e.length;r++){var s=new h(this.subId(),i,o).add(e[r]);s.name=s.name+"_stack_"+r,this.addContainer(s)}return this},h.prototype.addLine=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!e||0==e.length)return this;for(var o=M.style(t),i=M.cls(t),r=0;r<e.length;r++){var s=e[r],a=this.subId(),l=void 0;(l=(i||o?i?new h(a,i,null,null,!0):new h(a,"",o,null,!0):new h(a,"",null,null,!0)).add(s)).name=l.name+"_line_"+r,this.addContainer(l)}return this},h.prototype.addContainer=function(t,e,n,o,i,r){if(t instanceof h)return null==this._classStyle&&t._classStyle&&0==t._classStyle.indexOf("row")&&(this.parent instanceof h?this._classStyle=M.global.con_class:this._classStyle=M.global.main_class),t.parent=this,t.layoutManager||(t.layoutManager=this.layoutManager),this.components.push(t),this.layoutManager&&this.layoutManager.addLayoutComponent(t,e),t;if("string"==typeof t)return(n=new h(t,e,n,o,i,r)).layoutManager||(n.layoutManager=this.layoutManager),this.components.push(n),this.layoutManager&&this.layoutManager.addLayoutComponent(n),n;if(!t)return this;o=h.create(t);return o.parent=this,o.layoutManager=this.layoutManager,this.components.push(o),this.layoutManager&&this.layoutManager.addLayoutComponent(o,e),o},h.prototype.render=function(){return this.parent||this._classStyle||this._style?this.build(this.rootTag):this.buildRoot(this.rootTag)},h.prototype.make=function(){if(null==this.legend)return"";var t=this.fieldsetStyle?' style="'+M.style(this.fieldsetStyle)+'"':"",e=this.legendStyle?' style="'+M.style(this.legendStyle)+'"':"";return'<fieldset id="'+this.subId("fs")+'"'+t+"><legend"+e+">"+this.legend+"</legend></fieldset>"},h.prototype.componentDidMount=function(){var t,e=this.root;if(null==this.legend||(t=$("#"+this.subId("fs")))&&t.length&&(e=t),this.wrapper&&(e=M.addWrapper(e,this.wrapper)),this.layoutManager)this.layoutManager.layoutContainer(this,e);else for(var n=0,o=this.components;n<o.length;n++){var i=o[n];i instanceof M.WComponent?i.mount(e):e.append(i)}},h.prototype.componentWillUnmount=function(){for(var t=0,e=this.components;t<e.length;t++){var n=e[t];n instanceof M.WComponent&&n.unmount()}},h.prototype.rebuild=function(){var t,e=this.root;if(null!=this.legend&&(t=$("#"+this.subId("fs")))&&t.length&&(e=t),e.empty(),this.wrapper&&(e=M.addWrapper(e,this.wrapper)),!this.layoutManager){for(var n=0,o=this.components;n<o.length;n++){var i=o[n];i instanceof M.WComponent?i.mount(e):e.append(i)}return this}this.layoutManager.layoutContainer(this,e)};var a,r=h;function h(t,e,n,o,i,r,s){t=a.call(this,t,"WContainer",r,e,M.style(n),o)||this;return t.inline=!1,t.components=[],t.inline=i,s&&(t._classStyle=t._classStyle?t._classStyle+" "+s:s),t.rootTag=i?"span":"div","aside"==r&&(t.rootTag="aside"),t}function t(){this.mapConstraints={},this.mapComponents={}}M.WContainer=r,t.prototype.addLayoutComponent=function(t,e){var n;t&&e&&((n=M.getId(t))&&(this.mapConstraints[n]=e,this.mapComponents[e]=t))},t.prototype.removeLayoutComponent=function(t){var e,t=M.getId(t);t&&(e=this.mapConstraints[t],delete this.mapConstraints[t],e&&delete this.mapComponents[e])},t.prototype.layoutContainer=function(t,e){for(var n=M.getId(this.currComp),o=0,i=t.components;o<i.length;o++){var r=i[o],s=M.getId(r),a=!1;s&&s!=n&&this.mapConstraints[s]&&(a=!0),r instanceof M.WComponent?(a&&(r.visible=!1),r.mount(e)):r instanceof jQuery&&a&&r.hide()}},t.prototype.show=function(t,e){e=this.mapComponents[e];e&&(this.currComp instanceof M.WComponent?this.currComp.visible=!1:this.currComp instanceof jQuery&&this.currComp.show(),e instanceof M.WComponent?(e.visible=!0,this.currComp=e):this.currComp instanceof jQuery?(e.show(),this.currComp=e):this.currComp=void 0)},M.WCardLayout=t;__extends(e,s=r),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.header.remove(0),(this._title=t)&&("<"!=t.charAt(0)&&M.global.box_title?this.header.add(M.global.box_title.replace("$",t)):this.header.add(t))},enumerable:!1,configurable:!0}),e.prototype.addTool=function(t,e,n,o){var i=this;return t&&("string"==typeof t?(e=e||M.WIcon.WRENCH,this.cntls||(this.cntls=new r("",M.global.box_tools),this.header.add(this.cntls),this.tools={}),e=$('<a class="'+t+'">'+M.buildIcon(e)+"</a>"),this.cntls.add(e),this.tools[t]=e,o?t==this.TOOL_COLLAPSE?this.handlers["_"+this.TOOL_COLLAPSE]=[function(t){i.collapse(o)}]:this.handlers["_"+t]=[o]:(t==this.TOOL_COLLAPSE&&(this.handlers["_"+this.TOOL_COLLAPSE]=[function(t){i.collapse()}]),t==this.TOOL_CLOSE&&(this.handlers["_"+this.TOOL_CLOSE]=[function(t){i.close()}]))):this.header.add(t)),this},e.prototype.addCollapse=function(t){return this.addTool(this.TOOL_COLLAPSE,M.WIcon.CHEVRON_UP,"",t),this},e.prototype.addClose=function(t){return this.addTool(this.TOOL_CLOSE,M.WIcon.TIMES,"",t),this},e.prototype.addFilter=function(t){return this.addTool(this.TOOL_FILTER,M.WIcon.FILTER,"",t),this},Object.defineProperty(e.prototype,"header",{get:function(){return this._header||(this._header=new r("",M.cls(M.global.box_header,this._addClassStyle)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer||(this._footer=new r("",M.cls(M.global.box_footer,this._addClassStyle)))},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this._header&&this._header.mount(this.root);var t=$(this.build("div","","",M.cls(M.global.box_content,this._addClassStyle),void 0,null));this.root.append(t);for(var e=0,n=this.components;e<n.length;e++){var o=n[e];o instanceof M.WComponent?o.mount(t):t.append(o)}if(this._footer&&this._footer.mount(this.root),this.tools)for(var i in this.tools){var r=this.handlers["_"+i];if(r&&r.length)for(var s=0,a=r;s<a.length;s++){var l=a[s];this.tools[i].click(l)}}},e.prototype.componentWillUnmount=function(){s.prototype.componentWillUnmount.call(this),this._header&&this._header.unmount(),this._footer&&this._footer.unmount()},e.prototype.end=function(){return this.parent instanceof r?this.parent:this},e.prototype.addRow=function(t,e,n,o){n=new r(n,null==t?"row":t,e,o,!1,"row");return n.name=n.name+"_row",this.content.addContainer(n)},e.prototype.collapse=function(t){if(!this.root)return this;t&&t(this.createEvent("_"+this.TOOL_COLLAPSE,{collapsed:this.isCollapsed()})),this.tools&&this.tools[this.TOOL_COLLAPSE]&&this.tools[this.TOOL_COLLAPSE].find("i").toggleClass(M.WIcon.CHEVRON_UP).toggleClass(M.WIcon.CHEVRON_DOWN);var e=this.root;return e.children(".ibox-content").slideToggle(200),e.toggleClass("").toggleClass("border-bottom"),setTimeout(function(){e.resize(),e.find("[id^=map-]").resize()},50),this},e.prototype.expand=function(t){return this.isCollapsed()&&this.collapse(t),this},e.prototype.isCollapsed=function(){return!!this.root&&this.tools[this.TOOL_COLLAPSE].find("i").hasClass(M.WIcon.CHEVRON_DOWN)},e.prototype.close=function(){if(!this.root)return this;this.root.remove()};var s,l=e;function e(t,e,n,o,i){t=s.call(this,t,M.global.box_class,o,i,!1,"box")||this;return t.TOOL_COLLAPSE="collapse-link",t.TOOL_CLOSE="close-link",t.TOOL_FILTER="filter-link",t.name="WBox",t._addClassStyle=n,t.title=e,t}M.WBox=l;u=M.WComponent,__extends(o,u),o.prototype.onShownModal=function(t){this.on("shown.bs.modal",t)},o.prototype.onHiddenModal=function(t){this.on("hidden.bs.modal",t)},Object.defineProperty(o.prototype,"header",{get:function(){return this.cntHeader||(this.cntHeader=new r("","modal-header"),this.btnCloseHeader=new v(this.subId("bhc"),'<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>',void 0,"close","",'data-dismiss="modal"'),this.cntHeader.add(this.btnCloseHeader),this.cntHeader)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"body",{get:function(){return this.cntBody||(this.cntBody=new r("",M.cls("modal-body",this._classStyle),"",this._attributes),this.cntBody)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"footer",{get:function(){return this.cntFooter||(this.cntFooter=new r("","modal-footer"),this.cntFooter)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.cntHeader?(this._title=t,this.cntHeader.getRoot().children(this.tagTitle+":first").text(t)):(this._title=t,this.header.add(this.buildTitle(t)))},enumerable:!1,configurable:!0}),o.prototype.onClickOk=function(){return!0},o.prototype.onClickCancel=function(){return!0},o.prototype.buildBtnOK=function(){return new v(this.subId("bfo"),M.RES.OK,"",M.BTN.INFO+" button-sm","","")},o.prototype.buildBtnCancel=function(){return this.txtCancel?new v(this.subId("bfc"),this.txtCancel,"",M.BTN.SECONDARY+" button-sm","",""):new v(this.subId("bfc"),M.RES.CANCEL,"",M.BTN.SECONDARY+" button-sm","","")},o.prototype.buttonOk=function(){var e=this;if(this.btnOK)return this.btnOK;this.btnOK=this.buildBtnOK(),this.btnOK.on("click",function(t){e.onClickOk()&&(e.ok=!0,e.cancel=!1,e.root.modal("hide"))}),this.buttons.push(this.btnOK)},o.prototype.buttonCancel=function(){var e=this;if(this.btnCancel)return this.btnCancel;this.btnCancel=this.buildBtnCancel(),this.btnCancel.on("click",function(t){e.onClickCancel()&&(e.ok=!1,e.cancel=!0,e.root.modal("hide"))}),this.buttons.push(this.btnCancel)},o.prototype.show=function(t,e){this.beforeShow()&&(this.ok=!1,this.cancel=!1,this.parent=t,this.parentHandler=e,this.mounted||WuxDOM.mount(this),this.root&&this.root.length&&this.root.modal({backdrop:"static",keyboard:!1}))},o.prototype.hide=function(){this.root&&this.root.length&&this.root.modal("hide")},o.prototype.close=function(){this.ok=!1,this.cancel=!1,this.root&&this.root.length&&this.root.modal("hide")},o.prototype.selection=function(t,e){if(!t)return!1;var n=t.getSelectedRows();if(!n||!n.length)return e&&M.showWarning(e),!1;t=t.getSelectedRowsData();return t&&t.length?(null!=this.props&&"number"!=typeof this.props||(n=n[0],this.setProps(n)),this.setState(t[0]),!0):(e&&M.showWarning(e),!1)},o.prototype.beforeShow=function(){return!0},o.prototype.onShown=function(){},o.prototype.onHidden=function(){},o.prototype.render=function(){this.isShown=!1,this.cntRoot=new r(this.id,"modal inmodal fade","",'role="dialog" aria-hidden="true"'),this.cntMain=this.cntRoot.addContainer("","modal-dialog modal-lg",this._style),this.cntContent=this.cntMain.addContainer("","modal-content"),this.cntHeader&&this.cntContent.addContainer(this.cntHeader),this.cntBody&&this.cntContent.addContainer(this.cntBody);for(var t=0,e=this.buttons;t<e.length;t++){var n=e[t];this.footer.add(n)}return this.cntFooter&&this.cntContent.addContainer(this.cntFooter),this.cntRoot},o.prototype.componentDidMount=function(){var e=this;this.root.on("shown.bs.modal",function(t){e.isShown=!0,e.onShown()}),this.root.on("hidden.bs.modal",function(t){e.isShown=!1,e.onHidden(),e.parentHandler&&(e.parentHandler(t),e.parentHandler=null)})},o.prototype.componentWillUnmount=function(){this.isShown=!1,this.btnCloseHeader&&this.btnCloseHeader.unmount(),this.btnCancel&&this.btnCancel.unmount(),this.cntFooter&&this.cntFooter.unmount(),this.cntBody&&this.cntBody.unmount(),this.cntHeader&&this.cntHeader.unmount(),this.cntContent&&this.cntContent.unmount(),this.cntMain&&this.cntMain.unmount(),this.cntRoot&&this.cntRoot.unmount()},o.prototype.buildTitle=function(t){return this.tagTitle||(this.tagTitle="h3"),"<"+this.tagTitle+">"+M.WUtil.toText(t)+"</"+this.tagTitle+">"};var u,n=o;function o(t,e,n,o,i,r,s){void 0===n&&(n=!0),void 0===o&&(o=!0);var a=u.call(this,t,e=void 0===e?"WDialog":e,void 0,i,r,s)||this;return a.buttons=[],a.tagTitle="h3",o&&(n||(a.txtCancel=M.RES.CLOSE),a.buttonCancel()),n&&a.buttonOk(),a.ok=!1,a.cancel=!1,a.isShown=!1,a.id&&"*"!=a.id&&$("#"+a.id).length&&$("#"+a.id).remove(),WuxDOM.onRender(function(t){a.mounted||a.mount(t.element)}),a}M.WDialog=n;p=M.WComponent,__extends(i,p),Object.defineProperty(i.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!1,configurable:!0}),i.prototype.updateState=function(t){p.prototype.updateState.call(this,t=t||""),this.root&&this.root.html(M.buildIcon(this.props,""," ")+t)},i.prototype.for=function(t){return this.forId=M.getId(t),this},i.prototype.blink=function(t){return this.root&&this.root.length&&(this.blinks=t||3,this.highlight()),this},i.prototype.highlight=function(){return this.root&&this.root.length&&this.blinks&&(this.blinks--,this.root.effect("highlight",{},600,this.highlight.bind(this))),this},i.prototype.render=function(){var t=this.state||"";return this.forId?this.buildRoot("label",M.buildIcon(this.props,""," ")+t,'for="'+this.forId+'"',this._classStyle):this.buildRoot(this.rootTag,M.buildIcon(this.props,""," ")+t,null,this._classStyle)},i.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)};var p,n=i;function i(t,e,n,o,i,r){t=p.call(this,t||"*","WLabel",n,o,i,r)||this;return t.rootTag="span",t.updateState(e),t}M.WLabel=n;c=M.WComponent,__extends(d,c),d.prototype.updateState=function(t){c.prototype.updateState.call(this,t),this.root&&this.root.val(t)},d.prototype.onEnterPressed=function(t){this.handlers._enter||(this.handlers._enter=[]),this.handlers._enter.push(t)},d.prototype.render=function(){var t,e="";return this.label&&(e=this.id?'<label for="'+this.id+'">':"<label>",e=0<(t=this.label.lastIndexOf("<br"))?e+this.label.substring(0,t).replace("<","&lt;").replace(">","&gt;")+"</label><br>":e+this.label.replace("<","&lt;").replace(">","&gt;")+"</label> "),"static"==this.props?e+this.build("span",this.state):(t='name="'+this.id+'"',t+=this.props?' type="'+this.props+'"':' type="text"',this.size&&(t+=' size="'+this.size+'"'),this.state&&(t+=' value="'+this.state+'"'),this.placeHolder&&(t+=' placeholder="'+this.placeHolder+'"'),e+this.build(this.rootTag,"",t))},d.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip);var n=this;this.root.keypress(function(t){13==t.which&&(t=this.value,"c"==n.valueType?this.value&&(this.value=M.formatCurr(M.WUtil.toNumber(this.value))):"c5"==n.valueType?this.value&&(this.value=M.formatCurr5(M.WUtil.toNumber(this.value))):"n"==n.valueType||"p"==n.valueType?this.value&&(this.value=M.formatNum(this.value)):"i"==n.valueType&&this.value&&(this.value=M.WUtil.toInt(this.value)),n.trigger("statechange",t),n.trigger("_enter"),n.blurOnEnter&&$(this).blur())}),this.root.blur(function(t){var e=this.value;"c"==n.valueType?this.value&&(this.value=M.formatCurr(M.WUtil.toNumber(this.value))):"c5"==n.valueType?this.value&&(this.value=M.formatCurr5(M.WUtil.toNumber(this.value))):"n"==n.valueType||"p"==n.valueType?this.value&&(this.value=M.formatNum(this.value)):"i"==n.valueType&&this.value&&(this.value=M.WUtil.toInt(this.value)),n.state!=e&&n.trigger("statechange",e)}),this.root.focus(function(t){var e;this.value&&("c"==n.valueType||"c5"==n.valueType?(0<=(e=0<=(e=M.formatNum(this.value)).indexOf(",00")&&e.indexOf(",00")==e.length-3?e.substring(0,e.length-3):e).indexOf(",0")&&e.indexOf(",0")==e.length-2&&(e=e.substring(0,e.length-3)),this.value=e):"n"==n.valueType||"p"==n.valueType?this.value=M.formatNum(this.value):"i"==n.valueType&&(this.value=this.value=M.WUtil.toInt(this.value)),$(this).select())})};var c,n=d;function d(t,e,n,o,i,r){t=c.call(this,t||"*","WInput",e,o,i,r)||this;return t.rootTag="input",t.size=n,t.valueType="s",t.blurOnEnter=!1,t}M.WInput=n;f=M.WComponent,__extends(g,f),g.prototype.updateState=function(t){f.prototype.updateState.call(this,t),this.root&&this.root.val(this.state)},g.prototype.getState=function(){return this.root&&(this.state=M.norm(this.root.val())),this.state},g.prototype.render=function(){return this.props||(this.props=1),this._style?this._style.indexOf("width")<0&&(this._style+=";width:100%"):this._style="width:100%",this._attributes?this._style.indexOf("rows=")<0&&(this._attributes+=' rows="'+this.props+'"'):this._attributes='rows="'+this.props+'"',M.build("textarea","",this._style,this._attributes,this.id,this._classStyle)},g.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip),this.state&&this.root.val(M.den(this.state))};var f,n=g;function g(t,e,n,o,i){t=f.call(this,t||"*","WTextArea",e,n,o,i)||this;return t.rootTag="textarea",e||(t.props=5),t}M.WTextArea=n;b=M.WComponent,__extends(y,b),Object.defineProperty(y.prototype,"text",{get:function(){return!this._text&&this.$label?this.$label.text():this._text},set:function(t){!this._text&&this.$label?this.$label.text(t):(this._text=t,this.mounted&&this.root.html(t))},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"checked",{get:function(){return this.props=this.root.is(":checked"),this.state=this.props?this.value:void 0,this.props},set:function(t){this.setProps(t)},enumerable:!1,configurable:!0}),y.prototype.getState=function(){return this.checked?this.state=this.value:this.state=null,this.state},y.prototype.updateProps=function(t){b.prototype.updateProps.call(this,t),this.state=this.props?this.value:void 0,this.root&&this.root.prop("checked",this.props)},y.prototype.updateState=function(t){"boolean"==typeof t&&(t=t?this.value:void 0),b.prototype.updateState.call(this,t),this.root&&this.root.prop("checked",null!=this.state)},y.prototype.render=function(){var t='name="'+this.id+'" type="checkbox"',e=(t+=this.props?' checked="checked"':"",this._text?"&nbsp;"+this._text:"");return this.build(this.rootTag,e,t)},y.prototype.componentDidMount=function(){var n=this;this._tooltip&&this.root.attr("title",this._tooltip),this.root.change(function(t){var e=n.root.is(":checked");n.trigger("propschange",e),n.trigger("statechange",e?n.value:void 0)})},y.prototype.getWrapper=function(t){return this.wrapper||(this.id?this.$label=this._text?$('<label for="'+this.id+'">'+this._text+"</label>"):$("<label></label>"):this.$label=this._text?$("<label>"+this._text+"</label>"):$("<label></label>"),this._text="",this.wrapper=new M.WContainer(this.subId(),"checkbox",t),this.wrapper.add(this),this.wrapper.add(this.$label),(this.wrapper.stateComp=this).wrapper)};var b,n=y;function y(t,e,n,o,i,r,s){t=b.call(this,t||"*","WCheck",o,i,r,s)||this;return t.rootTag="input",t.value=n||"1",o&&t.updateState(n),t._text=e,t}M.WCheck=n;m=M.WComponent,__extends(_,m),Object.defineProperty(_.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!1,configurable:!0}),_.prototype.setText=function(t,e){null!=e&&(this.props=e),this.setState(t)},_.prototype.render=function(){this._classStyle||(this._classStyle=M.BTN.PRIMARY);var t=this.type?'type="'+this.type+'"':"",e="";return this.state?e+=M.buildIcon(this.props,""," ")+this.state:e+=M.buildIcon(this.props),this.build(this.rootTag,e,t)},_.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},_.prototype.componentWillUpdate=function(t,e){var n="";n+=e?M.buildIcon(this.props,""," ")+e:M.buildIcon(this.props),this.root.html(n)};var m,v=_;function _(t,e,n,o,i,r,s){t=m.call(this,t||"*","WButton",n,o,i,r)||this;return t.updateState(e),t.rootTag="button",t.type=s||"button",t}M.WButton=v;C=M.WComponent,__extends(w,C),Object.defineProperty(w.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"href",{get:function(){return this._href},set:function(t){this._href=t,this.root&&this.root.length&&(t?this.root.attr("href",t):this.root.removeAttr("href"))},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t,this.root&&this.root.length&&(t?this.root.attr("target",t):this.root.removeAttr("target"))},enumerable:!1,configurable:!0}),w.prototype.render=function(){var t="",e=(this._href&&(t+='href="'+this._href+'"'),this._target&&(t&&(t+=" "),t+='target="'+this._target+'"'),"");return this.state?e+=M.buildIcon(this.icon,""," ")+this.state:e+=M.buildIcon(this.icon),this.build(this.rootTag,e,t)},w.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},w.prototype.componentWillUpdate=function(t,e){var n="";n+=e?M.buildIcon(this.icon,""," ")+e:M.buildIcon(this.icon),this.root.html(n)};var C,n=w;function w(t,e,n,o,i,r,s,a){t=C.call(this,t||"*","WLink",n,o,i,r)||this;return t.updateState(e),t.rootTag="a",t._href=s,t._target=a,t}M.WLink=n;x=M.WComponent,__extends(S,x),S.prototype.addTab=function(t,e){var n=new r("","panel-body");return n.name=M.buildIcon(e,""," ")+t,this.tabs.push(n),n},S.prototype.render=function(){null==this.state&&(this.state=0);var t="<div";this._classStyle?t+=' class="tabs-container '+this._classStyle+'"':t+=' class="tabs-container"',t+=' id="'+this.id+'"',this._style&&(t+=' style="'+this._style+'"'),this.attributes&&(t+=" "+this.attributes);for(var t=t+">"+'<ul class="nav nav-tabs">',e=0;e<this.tabs.length;e++){var n=this.tabs[e];e==this.state?t+='<li class="active"><a data-toggle="tab" class="active" href="#'+this.id+"-"+e+'" aria-expanded="true"> '+n.name+"</a></li>":t+='<li><a data-toggle="tab" href="#'+this.id+"-"+e+'"> '+n.name+"</a></li>"}t+='</ul><div class="tab-content">';for(e=0;e<this.tabs.length;e++)e==this.state?t+='<div id="'+this.id+"-"+e+'" class="tab-pane active"></div>':t+='<div id="'+this.id+"-"+e+'" class="tab-pane"></div>';return t+="</div></div>"},S.prototype.componentDidUpdate=function(t,e){$('.nav-tabs a[href="#'+this.id+"-"+this.state+'"]').tab("show")},S.prototype.componentDidMount=function(){if(this.tabs.length){for(var t=0;t<this.tabs.length;t++){var e=this.tabs[t],n=$("#"+this.id+"-"+t);n.length&&e.mount(n)}var o=this;this.root.find('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var e,t=$(t.target).attr("href");t&&0<=(e=t.lastIndexOf("-"))&&o.setState(parseInt(t.substring(e+1)))})}},S.prototype.componentWillUnmount=function(){for(var t=0,e=this.tabs;t<e.length;t++){var n=e[t];n&&n.unmount()}};var x,n=S;function S(t,e,n,o,i){t=x.call(this,t||"*","WTab",i,e,n,o)||this;return t.tabs=[],t}M.WTab=n;O=M.WComponent,__extends(T,O),T.prototype.getProps=function(){var n=this;return this.root&&(this.props=[],this.root.find("option:selected").each(function(t,e){n.props.push($(e).text())})),this.props},T.prototype.select=function(t){return this.root&&this.options&&this.setState(this.options.length>t?this.options[t]:null),this},T.prototype.addOption=function(t,e){if(!t)return this;if(this.options||(this.options=[]),this.options.push(t),!this.mounted)return this;var n=this.buildOptions();return this.root.html(n),e&&this.updateState(t),this},T.prototype.remOption=function(t){if(!t||!this.options)return this;for(var e=-1,n=0;n<this.options.length;n++){var o=this.options[n];if(o)if("string"==typeof t){if("string"==typeof o){if(o==t){e=n;break}}else if(o.id==t){e=n;break}}else if("string"==typeof o){if(o==t.id){e=n;break}}else if(o.id==t.id){e=n;break}}if(0<=e){if(this.options.splice(e,1),!this.mounted)return this;var i=this.buildOptions();this.root.html(i)}return this},T.prototype.setOptions=function(t,e){if(this.options=t,!this.mounted)return this;var n=this.root.val(),o=this.buildOptions();return this.root.html(o),e?this.root.val(n):t&&t.length&&("string"==typeof t[0]?this.trigger("statechange",t[0]):this.trigger("statechange",M.WUtil.getString(t[0],"id"))),this},T.prototype.updateState=function(t){O.prototype.updateState.call(this,t),this.root&&(null==this.state?this.root.val(""):"string"==typeof this.state||"number"==typeof this.state?this.root.val(""+this.state):this.root.val(this.state.id))},T.prototype.render=function(){var t=this.buildOptions(),e='name="'+this.id+'"';return this.multiple&&(e+=' multiple="multiple"'),this.buildRoot("select",t,e)},T.prototype.componentDidMount=function(){var e=this;this._tooltip&&this.root.attr("title",this._tooltip),this.state&&this.root.val(this.state),this.root.on("change",function(t){e.trigger("statechange",e.root.val())})},T.prototype.buildOptions=function(){var t="";this.options||(this.options=[]);for(var e=0,n=this.options;e<n.length;e++){var o=n[e];t+="string"==typeof o?"<option>"+o+"</option>":'<option value="'+o.id+'">'+o.text+"</option>"}return t};var O,n=T;function T(t,e,n,o,i,r){t=O.call(this,t||"*","WSelect",null,o,i,r)||this;return t.rootTag="select",t.options=e,t.multiple=n,t}M.WSelect=n;I=M.WComponent,__extends(W,I),Object.defineProperty(W.prototype,"tooltip",{set:function(t){if(this._tooltip=t,this.internal&&(this.internal.tooltip=t),this.options&&this.options.length)for(var e=0;e<this.options.length;e++){var n=$("#"+this.id+"-"+e);n.length&&this._tooltip&&n.attr("title",this._tooltip)}},enumerable:!1,configurable:!0}),W.prototype.select=function(t){return this.root&&this.options&&this.setState(this.options.length>t?this.options[t]:null),this},W.prototype.render=function(){var t="";if(this.label&&(t=(t+=this.id?'<label for="'+this.id+'">':"<label>")+this.label.replace("<","&lt;").replace(">","&gt;")+"</label> "),!this.options||!this.options.length)return t;void 0===this.state&&(this.state=this.options[0]);for(var e=0;e<this.options.length;e++){var n=this.options[e];"string"==typeof n?M.match(this.state,n)?t+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n+'" name="'+this.id+'" id="'+this.id+"-"+e+'" checked> '+n+"</label>&nbsp;":t+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n+'" name="'+this.id+'" id="'+this.id+"-"+e+'"> '+n+"</label>&nbsp;":M.match(this.state,n)?t+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n.id+'" name="'+this.id+'" id="'+this.id+"-"+e+'" checked> '+n.text+"</label>&nbsp;":t+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n.id+'" name="'+this.id+'" id="'+this.id+"-"+e+'"> '+n.text+"</label>&nbsp;"}return t},W.prototype.componentDidMount=function(){var o=this;if(this.options&&this.options.length)for(var i=this,t=0;t<this.options.length;t++)!function(t){var e=$("#"+i.id+"-"+t);if(!e.length)return;i._tooltip&&e.attr("title",i._tooltip);var n=i.options[t];e.click(function(){o.setState(n)})}(t)},W.prototype.componentDidUpdate=function(t,e){for(var n=-1,o=0;o<this.options.length;o++)if(M.match(this.state,this.options[o])){n=o;break}0<=n&&$("#"+this.id+"-"+n).prop("checked",!0)};var I,L=W;function W(t,e,n,o,i,r){t=I.call(this,t||"*","WRadio",r,n,o,i)||this;return t.options=e,t}M.WRadio=L;R=M.WComponent,__extends(D,R),D.prototype.onSelectionChanged=function(t){this.handlers._selectionchanged||(this.handlers._selectionchanged=[]),this.handlers._selectionchanged.push(t)},D.prototype.onDoubleClick=function(t){this.handlers._doubleclick||(this.handlers._doubleclick=[]),this.handlers._doubleclick.push(t)},D.prototype.onRowPrepared=function(t){this.handlers._rowprepared||(this.handlers._rowprepared=[]),this.handlers._rowprepared.push(t)},D.prototype.onCellClick=function(t){this.handlers._cellclick||(this.handlers._cellclick=[]),this.handlers._cellclick.push(t)},D.prototype.onCellHoverChanged=function(t){this.handlers._cellhover||(this.handlers._cellhover=[]),this.handlers._cellhover.push(t)},D.prototype.clearSelection=function(){if(this.selectedRow=-1,!this.mounted)return this;if(this.root.find("tbody tr").removeClass(this.selClass),!this.handlers._selectionchanged)return this;for(var t=0,e=this.handlers._selectionchanged;t<e.length;t++)(0,e[t])({element:this.root,selectedRowsData:[]});return this},D.prototype.select=function(t){if(this.selectedRow=t&&t.length?t[0]:-1,!this.mounted)return this;this.root.find("tbody tr").removeClass(this.selClass);for(var e=[],n=0,o=t;n<o.length;n++){var i=o[n];this.root.find("tbody tr:eq("+i+")").addClass(this.selClass),this.state&&this.state.length>i&&e.push(this.state[i])}if(!this.handlers._selectionchanged)return this;for(var r=0,s=this.handlers._selectionchanged;r<s.length;r++)(0,s[r])({element:this.root,selectedRowsData:e});return this},D.prototype.selectAll=function(t){if(!this.mounted)return this;if(t&&0<=this.selectedRow)return this.clearSelection();if(this.selectedRow=-1,this.state&&this.state.length&&(this.selectedRow=0),this.root.find("tbody tr").addClass(this.selClass),!this.handlers._selectionchanged)return this;for(var e=0,n=this.handlers._selectionchanged;e<n.length;e++)(0,n[e])({element:this.root,selectedRowsData:this.state});return this},D.prototype.getSelectedRows=function(){return!this.mounted||this.selectedRow<0?[]:[this.selectedRow]},D.prototype.getSelectedRowsData=function(){return!this.mounted||this.selectedRow<0||!this.state||!this.state.length||this.state.length<=this.selectedRow?[]:[this.state[this.selectedRow]]},D.prototype.getFilteredRowsData=function(){return this.state},D.prototype.refresh=function(){return this},D.prototype.getCellValue=function(t,e){if(t<0||e<0)return null;if(!this.state||this.state.length<=t)return null;if(!this.keys||this.keys.length<=e)return null;e=this.keys[e],t=this.state[t];return M.WUtil.getValue(t,e)},D.prototype.getColHeader=function(t){return t<0||!this.header||this.header.length<=t?"":this.header[t]},D.prototype.render=function(){if(this.shouldBuildRoot()){var t="table",e=(this._classStyle&&(t=0<=this._classStyle.indexOf("table ")?this._classStyle:t+" "+this._classStyle),this.style?' style="'+this.style+'"':""),n='<div class="table-responsive"'+M.buildCss(this.divStyle)+'><table id="'+this.id+'" class="'+t+'"'+e+">";if(this.header&&this.header.length){var o=!1;if("string"==typeof this.headStyle?0<this.headStyle.indexOf("text-align")&&(o=!0):this.headStyle&&this.headStyle.a&&(o=!0),!this.hideHeader){n+=o?"<thead><tr>":"<thead><tr"+M.buildCss(this.headStyle)+">";for(var i=-1,r=0,s=this.header;r<s.length;r++){var a=s[r],l=void 0,l=0==++i?this.col0Style||this.colStyle:i==this.header.length-1?this.colLStyle||this.colStyle:o?this.headStyle:this.colStyle,h=this.widths&&this.widths.length>i?this.widths[i]:0;h?this.widthsPerc?n+="<th"+M.buildCss(l,{w:h+"%"})+">"+a+"</th>":n+="<th"+M.buildCss(l,{w:h})+">"+a+"</th>":n+="<th"+M.buildCss(l)+">"+a+"</th>"}n+="</tr></thead>"}}return n=n+"<tbody></tbody>"+"</table></div>"}},D.prototype.componentDidMount=function(){this.buildBody();var s=this;this.root.on("click","tbody tr",function(t){if(s.selectionMode&&"none"!=s.selectionMode){var e=$(this),n=(e.addClass(this.selClass).siblings().removeClass(this.selClass),s.selectedRow=e.index(),s.state&&s.state.length?s.state[s.selectedRow]:void 0);if(s.handlers._selectionchanged)for(var o=0,i=s.handlers._selectionchanged;o<i.length;o++)(0,i[o])({element:s.root,selectedRowsData:[n]})}}),this.root.on("click","tbody tr td",function(t){if(s.handlers._cellclick)for(var e=$(this),n=e.parent().index(),o=e.index(),i=0,r=s.handlers._cellclick;i<r.length;i++)(0,r[i])({element:s.root,rowIndex:n,colIndex:o})}),this.root.on("mouseover","tbody tr td",function(t){if(s.handlers._cellhover)for(var e=$(this),n=e.parent().index(),o=e.index(),i=0,r=s.handlers._cellhover;i<r.length;i++)(0,r[i])({element:s.root,rowIndex:n,colIndex:o})}),this.root.on("dblclick","tbody tr",function(t){if(s.handlers._doubleclick)for(var e=0,n=s.handlers._doubleclick;e<n.length;e++)(0,n[e])({element:s.root})})},D.prototype.componentDidUpdate=function(t,e){this.buildBody()},D.prototype.buildBody=function(){this.selectedRow=-1;var t=this.root.find("tbody");if(t.html(""),this.state&&this.state.length&&this.keys&&this.keys.length)for(var e=-1,n=0,o=this.state;n<o.length;n++){var i=o[n],r=void 0,r=++e==this.state.length-1&&this.footerStyle?$(M.build("tr","",this.footerStyle)):$(M.build("tr","",this.rowStyle));if(t.append(r),this.handlers._rowprepared)for(var s={element:this.root,rowElement:r,data:i,rowIndex:e},a=0,l=this.handlers._rowprepared;a<l.length;a++)(0,l[a])(s);for(var h=-1,u=0,p=this.keys;u<p.length;u++){var c=i[p[u]],d="";switch(null==c&&(c=""),h++,M.WUtil.getItem(this.types,h)){case"w":d="text-center";break;case"c":c=M.formatCurr(c),d="text-right";break;case"c5":c=M.formatCurr5(c),d="text-right";break;case"i":c=M.formatNum(c),d="text-right";break;case"n":c=M.formatNum2(c),d="text-right";break;case"d":c=M.formatDate(c);break;case"t":c=M.formatDateTime(c);break;case"b":c=c?"&check;":"";break;default:"number"==typeof(c="boolean"==typeof(c=c instanceof Date?M.formatDate(c):c)?c?"&check;":"":c)&&(c=M.formatNum2(c),d="text-right")}var f=void 0,g=("string"==typeof(f=0==h?this.col0Style||this.colStyle:h==this.header.length-1&&this.colLStyle||this.colStyle)?0<f.indexOf("text-align")&&(d=""):f&&f.a&&(d=""),this.widths&&this.widths.length>h?this.widths[h]:0),b=this.templates&&this.templates.length>h?this.templates[h]:void 0;if(b)b(_=$("<td"+M.buildCss(f,d,{w:g})+"></td>"),{data:i,text:c}),r.append(_);else if(M.WUtil.hasComponents(c))for(var y=0,m=M.WUtil.toArrayComponent(c);y<m.length;y++){var v=m[y],_=$("<td"+M.buildCss(f,d,{w:g})+"></td>");r.append(_),v.mount(_)}else this.boldNonZero&&0!=c&&"0"!=c&&""!=c?r.append($("<td"+M.buildCss(f,d,{w:g})+"><strong>"+c+"</strong></td>")):r.append($("<td"+M.buildCss(f,d,{w:g})+">"+c+"</td>"))}if(this.header&&this.header.length>this.keys.length)for(var C=0;C<this.header.length-this.keys.length;C++)r.append($("<td"+M.buildCss(this.colStyle)+"></td>"))}};var R,n=D;function D(t,e,n,o,i,r,s){var a=R.call(this,t||"*","WTable",s,o,i,r)||this;if(a.selectedRow=-1,a.rootTag="table",a.header=e,n&&n.length)a.keys=n;else if(a.keys=[],a.header)for(var l=0;l<a.header.length;l++)a.keys.push(l);return a.widths=[],a.templates=[],a.boldNonZero=!1,a.selClass="success",a}M.WTable=n;A=M.WComponent,__extends(E,A),E.prototype.init=function(){return this.rows=[],this.roww=[],this.hiddens=[],this.internals={},this.components=[],this.captions=[],this.dpids=[],this.nextMap={},this.mapTooltips={},this.mapLabelLinks={},this.minValues={},this.maxValues={},this.footer=[],this.currRow=null,this.addRow(),this},E.prototype.focus=function(){if(!this.mounted)return this;var t=this.first(!0);return t&&(t.component?t.component.focus():t.element&&t.element.focus()),this},E.prototype.first=function(t){if(!this.rows)return null;for(var e=0,n=this.rows;e<n.length;e++)for(var o=0,i=n[e];o<i.length;o++){var r=i[o];if(!t)return r;if((null==r.enabled||r.enabled)&&(null==r.readonly||!r.readonly))return r}return null},E.prototype.focusOn=function(t){if(!this.mounted)return this;t=this.getField(t);return t&&(t.component?t.component.focus():t.element&&t.element.focus()),this},E.prototype.onEnterPressed=function(t){t&&(this.handlers._enter||(this.handlers._enter=[]),this.handlers._enter.push(t),this.nextOnEnter=!1)},E.prototype.onEnd=function(t){t&&(this.handlers._end||(this.handlers._end=[]),this.handlers._end.push(t))},E.prototype.onChangeDate=function(t){t&&(this.handlers._changedate||(this.handlers._changedate=[]),this.handlers._changedate.push(t))},E.prototype.addToFooter=function(t,e){return(t||this.footer)&&(null!=e&&(this.footerSep=e),this.footer.push(t)),this},E.prototype.addRow=function(t,e,n,o,i){return void 0===i&&(i="row"),this.currRow&&!this.currRow.length?this.roww[this.roww.length-1]={classStyle:t,style:e,id:n,attributes:M.attributes(o),type:i}:(this.currRow=new Array,this.rows.push(this.currRow),this.roww.push({classStyle:t,style:e,id:n,attributes:M.attributes(o),type:i})),this},E.prototype.addTextField=function(t,e,n){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Text,readonly:n}),this},E.prototype.addNoteField=function(t,e,n,o){return n=n||3,this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Note,attributes:'rows="'+n+'"',readonly:o}),this},E.prototype.addCurrencyField=function(t,e,n){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Text,readonly:n,valueType:"c",style:{a:"right"}}),this},E.prototype.addCurrency5Field=function(t,e,n){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Text,readonly:n,valueType:"c5",style:{a:"right"}}),this},E.prototype.addIntegerField=function(t,e,n){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Text,readonly:n,valueType:"i"}),this},E.prototype.addDecimalField=function(t,e,n){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Text,readonly:n,valueType:"n"}),this},E.prototype.addDateField=function(t,e,n,o,i){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Date,readonly:n,valueType:"d",minValue:o,maxValue:i}),this},E.prototype.addOptionsField=function(t,e,n,o,i){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Select,readonly:i,options:n,attributes:o}),this},E.prototype.addBooleanField=function(t,e){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.CheckBox}),this},E.prototype.addBlankField=function(t,e,n,o,i,r){return this.currRow.push({id:o,label:t,type:M.WInputType.Blank,classStyle:e,style:n,attributes:i,placeholder:r}),this},E.prototype.addRadioField=function(t,e,n){n=new L(this.subId(t),n);return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Radio,component:n}),this},E.prototype.addPasswordField=function(t,e,n){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Password,readonly:n}),this},E.prototype.addEmailField=function(t,e,n){return this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Email,readonly:n}),this},E.prototype.addComponent=function(t,e,n,o){return n&&(t?(n.id=this.subId(t),this.currRow.push({id:this.subId(t),label:e,type:M.WInputType.Component,component:n,readonly:o}),n instanceof M.WInput&&(n.classStyle||(n.classStyle=M.CSS.FORM_CTRL))):(n.id="",this.currRow.push({id:"",label:e,type:M.WInputType.Component,component:n,readonly:o})),this.components.push(n)),this},E.prototype.addCaption=function(t,e,n,o){if(t)return t=new M.WLabel("",t,e,n,o),this.currRow.push({id:"",label:"",type:M.WInputType.Component,component:t,readonly:!0}),this.components.push(t),this.captions.push(t),this},E.prototype.addInternalField=function(t,e){return this.internals[t]=e=void 0===e?null:e,this},E.prototype.addHiddenField=function(t,e){return this.hiddens.push({id:this.subId(t),type:M.WInputType.Hidden,value:e}),this},E.prototype.setTooltip=function(t,e){t=this.getField(t);return t&&(e?this.mapTooltips[t.id]=e:delete this.mapTooltips[t.id]),this},E.prototype.setLabelLinks=function(t,e){t=this.getField(t);return t&&(e&&e.length?this.mapLabelLinks[t.id]=e:delete this.mapLabelLinks[t.id]),this},E.prototype.setReadOnly=function(t,e){if("string"==typeof t){if(!(o=this.getField(t)))return this;o.readonly=e,this.mounted&&(o.component?o.component.enabled=!e:(i=$("#"+o.id),"select"==M.getTagName(i)?e?i.prop("disabled",!0):i.prop("disabled",!1):i.prop("readonly",e)))}else for(var n=0;n<this.rows.length;n++)for(var o,i,r=this.rows[n],s=0;s<r.length;s++)(o=r[s]).readonly=t,this.mounted&&(o.component?o.component.enabled=!t:(i=$("#"+o.id),"select"==M.getTagName(i)?t?i.prop("disabled",!0):i.prop("disabled",!1):i.prop("readonly",t)));return this.trigger("propschange"),this},Object.defineProperty(E.prototype,"enabled",{set:function(t){this._enabled=t;for(var e=0;e<this.rows.length;e++)for(var n=this.rows[e],o=0;o<n.length;o++){var i=n[o];i.enabled=t,this.mounted&&(i.component?i.component.enabled=t:$("#"+i.id).prop("disabled",!t))}},enumerable:!1,configurable:!0}),E.prototype.setEnabled=function(t,e){if("string"==typeof t){var n=this.getField(t);if(!n)return this;n.enabled=e,this.mounted&&(n.component?n.component.enabled=e:$("#"+n.id).prop("disabled",!e))}else this.enabled=t;return this.trigger("propschange"),this},E.prototype.setVisible=function(t,e){t=this.getField(t);return t&&(t.visible=e,this.mounted&&(t.component?t.component.visible=e:e?$("#"+t.id).show():$("#"+t.id).hide(),t.label&&(e?$('label[for="'+t.id+'"]').show():$('label[for="'+t.id+'"]').hide())),this.trigger("propschange")),this},E.prototype.setLabelCss=function(t,e){var t=this.getField(t);return t&&(t.labelCss=e,this.mounted&&(t=$('label[for="'+t.id+'"]')).length&&M.setCss(t,e)),this},E.prototype.setLabelText=function(t,e){var t=this.getField(t);return t&&(t.label=e,this.mounted&&(t=$('label[for="'+t.id+'"]')).length&&t.html(e)),this},E.prototype.setSpanField=function(t,e){t=this.getField(t);return t&&(t.span=e),this},E.prototype.getField=function(t){if(t)for(var e=0==t.indexOf(this.id+"-")?t:this.subId(t),n=0;n<this.rows.length;n++)for(var o=this.rows[n],i=0;i<o.length;i++){var r=o[i];if(r.id==e)return r}},E.prototype.onMount=function(t,e){t=this.getField(t);return t&&(t.onmount=e),this},E.prototype.onFocus=function(t,e){t=this.getField(t);return t&&(t.onfocus=e),this},E.prototype.onBlur=function(t,e){t=this.getField(t);return t&&(t.onblur=e),this},E.prototype.getStateOf=function(t){t=this.getField(t);return t&&t.component?t.component.getState():null},E.prototype.getPropsOf=function(t){t=this.getField(t);return t&&t.component?t.component.getProps():null},E.prototype.next=function(t){if(t){var e=0==t.indexOf(this.id+"-")?t:this.subId(t);if(this.nextMap){t=this.nextMap[this.ripId(e)];if(t){t=this.getField(t);if(t)return t}}for(var n=!1,o=0;o<this.rows.length;o++)for(var i=this.rows[o],r=0;r<i.length;r++){var s=i[r];if(n)return s;s.id==e&&(n=!0)}}},E.prototype.setMandatory=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!this.rows)return this;for(var n=[],o=0,i=t;o<i.length;o++){var r=i[o],r=0==r.indexOf(this.id+"-")?r:this.subId(r);n.push(r)}for(var s=0;s<this.rows.length;s++)for(var a=this.rows[s],l=0;l<a.length;l++){var h=a[l];0<=n.indexOf(h.id)?h.required=!0:h.required=!1}return this},E.prototype.checkMandatory=function(t,e,n){for(var o=(o=this.getState())||{},i="",r="",s=!1,a=0;a<this.rows.length;a++)for(var l=this.rows[a],h=0;h<l.length;h++){var u=l[h],p=this.ripId(u.id),c=o[p];u.required&&(null==c||""==c?(i+=t?","+u.label:","+p,r=r||p):s=!0)}return n&&s?"":(r&&e&&this.focusOn(r),i&&i.substring(1))},E.prototype.getState=function(){return this.state=this.autoValidate?this.validate():this.getValues(),this.state},E.prototype.render=function(){return this.buildRoot(this.rootTag)},E.prototype.componentDidMount=function(){var l=this;this.inputClass||(this.inputClass=M.CSS.FORM_CTRL),this.minValues={},this.maxValues={},this.dpids=[];for(var t=0;t<this.rows.length;t++){for(var e,n=this.roww[t],o="<div",i=(n?((e=M.cls(n.type,n.classStyle,n.style))&&(o+=' class="'+e+'"'),(e=M.style(n.style))&&(o+=' style="'+e+'"'),n.id&&(o+=' id="'+n.id+'"'),n.attributes&&(o+=" "+n.attributes)):o+=' class="row"',o+="></div>",$(o)),r=(this.root.append(i),this.rows[t]),s=0,a=0;a<r.length;a++)(h=r[a]).type!==M.WInputType.Hidden&&(s+=h.span&&0<h.span?h.span:1);for(a=0;a<r.length;a++){var h=r[a];if(h.id&&(h.minValue&&(this.minValues[h.id]=h.minValue),h.maxValue&&(this.maxValues[h.id]=h.maxValue)),h.type!==M.WInputType.Hidden){var u=Math.floor(12/s),u=(1==(u=u<1?1:u)&&s<11&&(0==a||a==s-1)&&(u=2),h.span&&0<h.span&&(u*=h.span),$('<div class="col-md-'+u+'"></div>')),p=(i.append(u),$('<div class="form-group"></div>'));if(u.append(p),h.label){var c,d,u="",f="";if(h.labelCss?((c=M.cls(h.labelCss))&&(u+=' class="'+c+'"'),(d=M.style(h.labelCss))&&(u+=' style="'+d+'"')):h.required&&((c=M.cls(M.CSS.FIELD_REQUIRED))&&(u+=' class="'+c+'"'),(d=M.style(M.CSS.FIELD_REQUIRED))&&(u+=' style="'+d+'"'),f=" *"),h.id&&this.mapTooltips[h.id]?p.append($('<label for="'+h.id+'" title="'+this.mapTooltips[h.id]+'"'+u+">"+h.label+f+"</label>")):h.id?p.append($('<label for="'+h.id+'" title="'+h.label+'"'+u+">"+h.label+f+"</label>")):p.append($('<label title="'+h.label+'"'+u+">"+h.label+f+"</label>")),h.id&&this.mapLabelLinks[h.id])for(var g=0,b=this.mapLabelLinks[h.id];g<b.length;g++){var y=b[g],m=$('<span style="padding-left:8px;"></span>');p.append(m),y.mount(m)}}switch(h.type){case M.WInputType.Blank:h.element=$(M.build("div",h.placeholder,h.style,h.attributes,h.id,h.classStyle));break;case M.WInputType.Text:var v='<input type="text" name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'" ';h.readonly&&(v+="readonly "),0==h.enabled&&(v+="disabled "),h.style&&(v+=' style="'+M.style(h.style)+'"'),v+="/>",h.element=$(v);break;case M.WInputType.Note:v='<textarea name="'+h.id+'" id="'+h.id+'" class="form-control" ';h.attributes&&(v+=h.attributes+" "),h.readonly&&(v+="readonly "),0==h.enabled&&(v+="disabled "),h.style&&(v+=' style="'+M.style(h.style)+'"'),v+="></textarea>",h.element=$(v);break;case M.WInputType.Date:this.dpids.push(h.id);var _='<div class="input-group" id="igd-'+h.id+'">',_=(_+='<span class="input-group-addon">'+M.buildIcon(M.WIcon.CALENDAR)+"</span> ")+('<input type="text" name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'" ');h.readonly&&(_+="readonly "),0==h.enabled&&(_+="disabled "),_+="/></div>",h.element=$(_);break;case M.WInputType.CheckBox:this.checkboxStyle||(_=Math.round(.8*parseInt(this.root.css("font-size"))),(isNaN(_)||_<16)&&(_=16),this.checkboxStyle="height:"+_+"px;"),2<this.checkboxStyle.length?h.element=$('<input type="checkbox" name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'" style="'+this.checkboxStyle+'"/>'):h.element=$('<input type="checkbox" name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'"/>');break;case M.WInputType.Radio:h.component&&h.component.mount(p);break;case M.WInputType.Select:var C="";if(h.attributes?(C+='<select name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'" '+h.attributes,!h.readonly&&0!=h.enabled||(C+=" disabled")):(C+='<select name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'"',!h.readonly&&0!=h.enabled||(C+="disabled")),C+=">",h.options&&0<h.options.length)for(var w=0;w<h.options.length;w++){var x=h.options[w];C+="string"==typeof x?"<option>"+x+"</option>":'<option value="'+x.id+'">'+x.text+"</option>"}C+="</select>",h.element=$(C);break;case M.WInputType.Email:var S='<input type="text" name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'" ';h.readonly&&(S+="readonly "),0==h.enabled&&(S+="disabled "),h.style&&(S+=' style="'+M.style(h.style)+'"'),S+="/>",h.element=$(S);break;case M.WInputType.Password:S='<input type="password" name="'+h.id+'" id="'+h.id+'" class="'+this.inputClass+'" ';h.readonly&&(S+="readonly "),0==h.enabled&&(S+="disabled "),h.style&&(S+=' style="'+M.style(h.style)+'"'),S+="/>",h.element=$(S);break;case M.WInputType.Component:h.component&&(0!=h.enabled&&!h.readonly||(h.component.enabled=!1),h.component.mount(p),h.onmount&&h.onmount(h),h.onfocus&&h.component.on("focus",h.onfocus),h.onblur&&h.component.on("blur",h.onblur))}h.element&&(p.append(h.element),h.type==M.WInputType.Text&&("c"==h.valueType||"c5"==h.valueType?(h.element.focus(function(t){var e;this.value&&(0<=(e=0<=(e=M.formatNum(this.value)).indexOf(",00")&&e.indexOf(",00")==e.length-3?e.substring(0,e.length-3):e).indexOf(",0")&&e.indexOf(",0")==e.length-2&&(e=e.substring(0,e.length-3)),this.value=e,$(this).select())}),"c"==h.valueType?h.element.blur(function(t){this.value&&(this.value=M.formatCurr(M.WUtil.toNumber(this.value)))}):h.element.blur(function(t){this.value&&(this.value=M.formatCurr5(M.WUtil.toNumber(this.value)))})):"n"==h.valueType?(h.element.focus(function(t){this.value&&(this.value=M.formatNum(this.value),$(this).select())}),h.element.blur(function(t){this.value&&(this.value=M.formatNum(this.value))})):"i"==h.valueType?(h.element.focus(function(t){this.value&&(this.value=M.WUtil.toInt(this.value),$(this).select())}),h.element.blur(function(t){this.value&&(this.value=M.WUtil.toInt(this.value))})):h.element.focus(function(t){$(this).select()})),null==h.visible||h.visible||(h.element.hide(),h.label&&$('label[for="'+h.id+'"]').hide()),h.onmount&&h.onmount(h),h.onfocus&&h.element.focus(h.onfocus),h.onblur&&h.element.blur(h.onblur))}}}for(var O=0,T=this.hiddens;O<T.length;O++)null==(h=T[O]).value&&(h.value=""),this.root.append('<input type="hidden" name="'+h.id+'" id="'+h.id+'" value="'+h.value+'">');if(this.footer&&0<this.footer.length){var I=M.style(this.footerStyle),W=(this.footerClass||(this.footerClass="col-md-12"),I=I?' style="'+I+'"':' style="text-align:right;"',this.footerSep&&("string"==typeof this.footerSep?"<"==(W=this.footerSep.charAt(0))?this.root.append(this.footerSep):M.WUtil.isNumeric(W)&&this.root.append('<div style="height:'+this.footerSep+'px;"></div>'):this.root.append('<div style="height:'+this.footerSep+'px;"></div>')),$('<div class="row"></div>')),R=(this.root.append(W),$('<div class="'+this.footerClass+'"'+I+"></div>"));W.append(R);for(var D=0,A=this.footer;D<A.length;D++){var E=A[D];"string"==typeof E&&0<E.length?R.append($(E)):E instanceof M.WComponent?E.mount(R):R.append(E)}}for(var k=this,N=0,L=this.dpids;N<L.length;N++)!function(a){var t=M.WUtil.getDate(k.minValues,a);$("#"+a).datepicker({language:M.global.locale,todayBtn:"linked",keyboardNavigation:!1,forceParse:!1,calendarWeeks:!0,autoclose:!0,minDate:t}).on("changeDate",function(t){if(l.handlers._changedate)for(var e=0,n=l.handlers._changedate;e<n.length;e++)(0,n[e])(t);var o,i,r=M.WUtil.getDate(l.minValues,a),s=M.WUtil.getDate(l.maxValues,a);!r&&!s||!(o=M.WUtil.getDate(t,"date"))||(o=M.WUtil.toInt(o))<19000101||(19000101<=(i=M.WUtil.toInt(r))&&o<i&&(M.showWarning(M.RES.ERR_DATE),$(t.target).datepicker("setDate",r)),19000101<=(i=M.WUtil.toInt(s))&&i<o&&(M.showWarning(M.RES.ERR_DATE),$(t.target).datepicker("setDate",s)))})}(L[N]);"object"==typeof this.state&&this.updateView(),this.root.find("input").keypress(function(t){if(13==t.which){for(var t=$(t.target).attr("id"),e=l.next(t);e&&!l.isFocusable(e);)e=l.next(e.id);e&&l.nextOnEnter?(e.component?e.component.focus():e.element&&("DIV"==e.element.prop("tagName")?e.element.find("input"):e.element).focus(),l.stateChangeOnBlur||(l.lastChanged=l.ripId(t),l.trigger("statechange"))):(l.lastChanged=l.ripId(t),l.trigger("statechange")),l.trigger("_enter",l.ripId(t)),e||l.trigger("_end",l.ripId(t))}}),this.stateChangeOnBlur&&this.root.find("input").blur(function(t){l.lastChanged=l.ripId($(t.target).attr("id")),l.trigger("statechange")}),this.root.on("change","select",function(t){var e=(new Date).getTime();l.lastTs&&e-l.lastTs<200||(l.lastTs=e,l.lastChanged=l.ripId($(t.target).attr("id")),l.trigger("statechange"))})},E.prototype.isFocusable=function(t){return!!t&&(!t.readonly&&!(null!=t.enabled&&!t.enabled))},E.prototype.updateState=function(t){A.prototype.updateState.call(this,t),this.mounted&&(!t||$.isEmptyObject(t)?this.clear():this.updateView())},E.prototype.isBlank=function(t){if(t)return 0!==(i=this.getValue(t))&&(!i||!(""+i).trim());for(var e=0;e<this.rows.length;e++)for(var n=this.rows[e],o=0;o<n.length;o++){var i,r=n[o];if(0==(i=this.getValue(r)))return!1;if(i)return!1;if((""+i).trim())return!1}return!0},E.prototype.isZero=function(t){t=this.getValue(t);return!t||("0"==t||!(""+t).trim())},E.prototype.match=function(t,e){t=this.getValue(t);return M.WUtil.toString(t)==M.WUtil.toString(e)},E.prototype.transferTo=function(t,e,n){if(t instanceof M.WFormPanel){t.clear();for(var o=A.prototype.transferTo.call(this,t,e),i=0;i<this.rows.length;i++)for(var r=this.rows[i],s=0;s<r.length;s++){var a,l=r[s];l.component&&((a=t.getField(this.ripId(l.id)))&&a.component&&(o=o&&l.component.transferTo(a.component)))}n&&n()}else o=A.prototype.transferTo.call(this,t,e,n);return o},E.prototype.clear=function(){this.debug&&console.log("WUX.WFormPanel.clear");for(var t,e=0;e<this.components.length;e++)this.components[e].id&&this.components[e].setState(null);for(t in this.internals)this.internals.hasOwnProperty(t)&&(this.internals[t]=null);if(!this.root)return this;var n=this.root[0];if(!n||!n.elements)return this;for(var o=0;o<n.elements.length;o++){var i=n.elements[o];switch(i.type){case"checkbox":case"radio":i.checked=!1;break;case"select-one":case"select-multiple":i.selectedIndex=-1;break;default:i.value=""}}if(this.dpids)for(var r=0,s=this.dpids;r<s.length;r++){var a=s[r];$("#"+a).datepicker("setDate",null)}return this},E.prototype.select=function(t,e){if(!t)return this;var n=this.getField(t);if(!n||!n.component)return this;var o=n.component.select;return"function"==typeof o?o.bind(n.component)(e):console.error("WFormPanel.select("+t+","+e+") not applicable."),this},E.prototype.setValue=function(t,e,n){if(void 0===n&&(n=!0),this.debug&&console.log("WUX.WFormPanel.setValue("+t+","+e+","+n+")"),!t)return this;var o=this.subId(t);if(n&&(this.state||(this.state={}),this.state[t]=e),void 0!==this.internals[t])return this.internals[t]=e=void 0===e?null:e,this;for(var i=0,r=this.components;i<r.length;i++){var s=r[i];if(s.id==o)return s.setState(e),this}if(!this.root||!this.root.length)return this;if("number"==typeof e&&(e=M.formatNum(e)),!(this.dpids&&0<=this.dpids.indexOf(o))){var a=this.root.find("[name="+o+"]");if(!(a=a.length?a:$("#"+o)).length)return this;switch(null==e&&(e=""),a.attr("type")){case"checkbox":case"radio":a.prop("checked",e);break;default:e instanceof Date?a.val(M.formatDate(e)):Array.isArray(e)?a.val(e):a.val(M.den(e.toString()))}return this}$("#"+o).datepicker("setDate",M.WUtil.toDate(e))},E.prototype.getValue=function(t){if(t){for(var e,t="string"==typeof t?(e=this.subId(t),t):(e=t.id,t.id),n=0,o=this.components;n<o.length;n++){var i=o[n];if(i.id==e)return i.getState()}if(void 0!==this.internals[t])return this.internals[t];if(this.root&&this.root.length){t=this.root.find("[name="+e+"]");if((t=t.length?t:$("#"+e)).length){var r=t.get(0);if(r)switch(r.type){case"checkbox":return r.checked;case"select-multiple":for(var s=[],a=0;a<r.length;a++)s.push(r.options[a].value);return s}return t.val()}}}},E.prototype.getValues=function(t){if(!this.root||!this.root.length)return{};var e,n,o={};for(e in this.internals)this.internals.hasOwnProperty(e)&&(null!=(n=this.internals[e])&&(o[e]=n));var i=this.root[0];if(!i||!i.elements)return o;for(var r=0;r<i.elements.length;r++){var s=i.elements[r];if(s.name&&s.value){var a=s.name;switch(s.type){case"checkbox":o[this.ripId(a)]=s.checked;break;case"radio":s.checked&&(o[this.ripId(a)]=s.value);break;case"select-one":o[this.ripId(a)]=s.options[s.selectedIndex].value;break;case"select-multiple":for(var l=[],h=0;h<s.length;h++)s.options[h].selected&&l.push(s.options[h].value);o[this.ripId(a)]=l;break;case"text":case"textarea":o[this.ripId(a)]=M.norm(s.value);break;default:o[this.ripId(a)]=s.value}}}for(var u=0,p=this.components;u<p.length;u++){var c,d=p[u];!d.id||(c=null)!=(c=t?M.format(d):d.getState())&&(o[this.ripId(d.id)]=c)}return o},E.prototype.updateView=function(){if(this.debug&&console.log("WUX.WFormPanel.updateView()"),this.state)for(var t in this.state)this.setValue(t,this.state[t],!1);else this.clear()},E.prototype.validate=function(){for(var t=this.getValues(),e=0;e<this.rows.length;e++)for(var n=this.rows[e],o=0;o<n.length;o++){var i=n[o],r=i.id,s=this.ripId(r);if(i.required&&null==t[s])throw new Error(i.label+": obbligatorio");if(i.size&&null!=t[s]&&t[s].length>i.size)throw new Error(i.label+": supera "+i.size+" caratteri");if(i.type&&null!=t[s]){var a=null;switch(i.type==M.WInputType.Date&&(t[s]=M.WUtil.toDate(t[s])),i.type){case M.WInputType.Number:new RegExp("^\\d+\\.\\d{1,2}$|^\\d*$").test(t[s])||(a=i.label+": "+t[s]+" non numerico");break;case M.WInputType.Integer:new RegExp("^\\d*$").test(t[s])||(a=i.label+": "+t[s]+" non intero");break;case M.WInputType.Email:new RegExp(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/).test(t[s])||(a=i.label+": "+t[s]+" email non valida")}if(a)throw new Error(a)}}return t};var A,n=E;function E(t,e,n,o){t=A.call(this,t||"*","WFormPanel",o)||this;return t.rootTag="form",t._attributes=n?'role="form" name="'+t.id+'" action="'+n+'"':'role="form" name="'+t.id+'" action="javascript:void(0);"',t.stateChangeOnBlur=!1,t.inputClass=M.CSS.FORM_CTRL,t.title=e,t.nextOnEnter=!0,t.autoValidate=!1,t.init(),t}M.WFormPanel=n;k=M.WComponent,__extends(N,k),N.prototype.onShow=function(t){this.handlers._onshow||(this.handlers._onshow=[]),this.handlers._onshow.push(t)},N.prototype.onHide=function(t){this.handlers._onhide||(this.handlers._onhide=[]),this.handlers._onhide.push(t)},N.prototype.onClose=function(t){this.handlers._onclose||(this.handlers._onclose=[]),this.handlers._onclose.push(t)},Object.defineProperty(N.prototype,"header",{get:function(){var e=this;return this.cntHeader||(this.cntHeader=new r("","modal-header",this.headerStyle),this.btnCloseHeader=new v(this.subId("bhc"),'<span aria-hidden="true" tabIndex="-1">&times;</span><span class="sr-only">Close</span>',void 0,"close",{op:.6}),this.btnCloseHeader.on("click",function(t){e.close()}),this.cntHeader.add(this.btnCloseHeader),this.cntHeader)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"body",{get:function(){return this.cntBody||(this.cntBody=new r("",M.cls(this._classStyle)),this.cntBody)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"container",{get:function(){if(this.cntRoot)return this.cntRoot;var t="",e={};return this.width&&(e.w=this.width),this.height&&(e.h=this.height),this.background&&(e.bg=this.background),this.color&&(e.c=this.color),t="top"==this.position?this.gap?(e.ml=M.WUtil.getNumber(M.global.window_top,"ml")+this.gap,M.css(M.global.window_top,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)",t:this.gap},this._style,e)):M.css(M.global.window_top,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)"},this._style,e):this.gap?(e.ml=M.WUtil.getNumber(M.global.window_bottom,"ml")+this.gap,M.css(M.global.window_bottom,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)",bt:this.gap},this._style,e)):M.css(M.global.window_bottom,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)"},this._style,e),this.cntRoot=new r(this.id,this._classStyle,t,this._attributes),this.cntRoot},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.cntHeader?(this._title=t,this.cntHeader.getRoot().children(this.tagTitle+":first").text(t)):(this._title=t,this.header.add(this.buildTitle(t)))},enumerable:!1,configurable:!0}),N.prototype.show=function(t){if(this.beforeShow()&&(this.parent=t,this.mounted||WuxDOM.mount(this),this.root&&this.root.length&&(this.isShown=!0,this.isClosed=!1,this.root.show()),this.handlers._onshow))for(var e=0,n=this.handlers._onshow;e<n.length;e++)(0,n[e])(this.createEvent("_onshow"))},N.prototype.hide=function(){if(this.isShown=!1,this.root&&this.root.length&&this.root.hide(),this.handlers._onhide)for(var t=0,e=this.handlers._onhide;t<e.length;t++)(0,e[t])(this.createEvent("_onhide"))},N.prototype.close=function(){if(this.isClosed=!0,this.handlers._onclose)for(var t=0,e=this.handlers._onclose;t<e.length;t++)(0,e[t])(this.createEvent("_onclose"));this.hide()},N.prototype.scroll=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=4),!t||!this.root)return 0;t=t instanceof M.WComponent?t.getRoot():t;if("top"==this.position){var o=$(document).scrollTop(),i=(a=t.offset().top)-o-2,r=this.root.height();if(i<(r=e&&r<e?e:r))return o<(s=i-r)?$(document).scrollTop(0):$(document).scrollTop(o-s),s}else{var s,o=$(document).scrollTop(),i=((a=t.offset().top)||(i=t.position())&&(a=i.top),t.height()),t=a+(i=i||18)-o+2,a=$(window).height(),r=this.root.height(),i=a-(r=e&&r<e?e:r);if(i<t)return s=t-i+n,$(document).scrollTop(o+s),s}return 0},N.prototype.scrollY=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=4),"top"==this.position){var o=$(document).scrollTop(),i=t-2,r=this.root.height();if(i<(r=e&&r<e?e:r))return o<(s=i-r)?$(document).scrollTop(0):$(document).scrollTop(o-s),s}else{var s,o=$(document).scrollTop(),i=t+n/2+2,t=$(window).height(),r=this.root.height(),t=t-(r=e&&r<e?e:r);if(t<i)return s=i-t+n,$(document).scrollTop(o+s),s}return 0},N.prototype.beforeShow=function(){return!0},N.prototype.onShown=function(){},N.prototype.onHidden=function(){},N.prototype.render=function(){return this.isShown=!1,this.isClosed=!1,this.cntHeader&&this.container.addContainer(this.cntHeader),this.cntBody&&this.container.addContainer(this.cntBody),this.cntRoot},N.prototype.componentWillUnmount=function(){this.isShown=!1,this.btnCloseHeader&&this.btnCloseHeader.unmount(),this.cntBody&&this.cntBody.unmount(),this.cntHeader&&this.cntHeader.unmount(),this.cntRoot&&this.cntRoot.unmount()},N.prototype.buildTitle=function(t){if(null==t)return"";if(this.tagTitle||(this.tagTitle="h3"),this.titleStyle){var e=M.style(this.titleStyle);if(e)return"<"+this.tagTitle+' style="'+e+'">'+M.WUtil.toText(t)+"</"+this.tagTitle+">"}return"<"+this.tagTitle+">"+M.WUtil.toText(t)+"</"+this.tagTitle+">"},N.DEF_HEADER_STYLE={p:5,a:"center"};var k,n=N;function N(t,e,n,o,i){var r=k.call(this,t||"*",e=void 0===e?"WWindow":e,i,"","",o)||this;return r.position=n,r.position||(r.position="bottom"),r.headerStyle=N.DEF_HEADER_STYLE,r.id&&"*"!=r.id&&$("#"+r.id).length&&$("#"+r.id).remove(),WuxDOM.onRender(function(t){r.mounted||r.mount(t.element)}),r}M.WWindow=n}(WUX=WUX||{});