var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length
for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s]
return r},__extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)}
return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()
if("undefined"==typeof jQuery)throw new Error("WUX requires jQuery");+function(t){t.fn.wuxComponent=function(t){var e=this.data("wuxComponent")
return e||(t instanceof WUX.WComponent?(this.data("wuxComponent",t),t):(null==t&&(t=!0),t?(e=new WUX.WComponent(this),this.data("wuxComponent",e),e):void 0))}}(jQuery)
var WuxDOM=function(){function t(){}return t.onRender=function(e){t.onRenderHandlers.push(e)},t.onUnmount=function(e){t.onUnmountHandlers.push(e)},t.render=function(e,n,r,i){WUX.debug&&console.log("WuxDOM.render "+WUX.str(e)+" on "+WUX.str(n)+"..."),$(document).ready(function(){WUX.global.init(function(){n||(n=t.lastCtx?t.lastCtx:$("#view-root")),r&&r(n)
var o=t.mount(e,n)
if(t.lastCtx=o,i&&i(n),t.onRenderHandlers.length>0){for(var s=e instanceof WUX.WComponent?e:null,a={component:s,element:o,target:o.get(0),type:"render"},l=0,h=t.onRenderHandlers;l<h.length;l++){(0,h[l])(a)}t.onRenderHandlers=[]}})})},t.mount=function(e,n){if(n||(n=t.lastCtx?t.lastCtx:$("#view-root")),WUX.debug&&console.log("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(n)+"..."),null==e)return void console.error("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(n)+" -> invalid component")
var r="string"==typeof n?n.indexOf("#")<0?$("#"+n):$(n):n
return r.length?(t.lastCtx=r,e instanceof WUX.WComponent?(e.mount(r),r.wuxComponent(e)):r.append(e),WUX.debug&&console.log("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(n)+" completed."),r):void console.error("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(n)+" -> context unavailable")},t.unmount=function(e){e||(e=t.lastCtx?t.lastCtx:$("#view-root")),WUX.debug&&console.log("WuxDOM.unmount "+WUX.str(e)+"...")
var n="string"==typeof e?e.indexOf("#")<0?$("#"+e):$(e):e
if(!n.length)return void console.error("WuxDOM.unmount "+WUX.str(e)+" -> node unavailable")
var r=n.wuxComponent(!1)
if(r&&r.unmount(),n.html(""),WUX.debug&&console.log("WuxDOM.unmount "+WUX.str(e)+" completed."),t.onUnmountHandlers.length>0){for(var i={component:r,element:n,target:n.get(0),type:"unmount"},o=0,s=t.onUnmountHandlers;o<s.length;o++){(0,s[o])(i)}t.onUnmountHandlers=[]}return n},t.replace=function(e,n){var r
if(n||(n=e,e=void 0),e)if("string"==typeof e){var i=WUX.getComponent(e)
i||(r=i.getContext(),i.unmount())}else e instanceof WUX.WComponent?(r=e.getContext(),e.unmount()):(r=e.parent())&&r.html("")
else r=t.unmount()
return r||(r=$("#view-root")),r.length?t.mount(n,r):void console.error("WuxDOM.replace "+WUX.str(r)+" -> node unavailable")},t.onRenderHandlers=[],t.onUnmountHandlers=[],t}(),WUX
!function(t){function e(t){if(t){if(t instanceof jQuery)return t.attr("id")
if(t instanceof M)return t.id
if("string"==typeof t&&t.indexOf("<")<0)return 0==t.indexOf("#")?t.substring(1):t
if("object"==typeof t&&!t.id)return""+t.id
var e=$(t),n=e.attr("id")
if(!n){var r=e.prop("tagName")
"i"!=r&&"I"!=r||(n=e.parent().attr("id"))}return n}}function n(t,n){var r=e(t)
if(!r)return""
var i=r.indexOf("-")
return i<0?r:n?r.substring(i+1):r.substring(0,i)}function r(t){var n=e(t)
if(!n)return""
var r=n.lastIndexOf("-")
if(r<0)return n
if(r>0){if("-"==n.charAt(r-1))return n.substring(r)}return n.substring(r+1)}function i(t){if(t){var e=$("#"+t)
if(e.length)return e.wuxComponent(!1)}}function o(t){return t&&t.parent?o(t.parent):t}function s(t,e){if(t){var n=$("#"+t)
if(n.length){var r=n.wuxComponent(!1)
if(r)return r.setProps(e),r}}}function a(t,e){if(!t)return e
var n=$("#"+t)
if(!n.length)return e
var r=n.wuxComponent(!1)
if(!r)return e
var i=r.getProps()
return null==i?e:i}function l(t,e){if(t){var n=$("#"+t)
if(n.length){var r=n.wuxComponent(!1)
if(r)return r.setState(e),r}}}function h(t,e){if(!t)return e
var n=$("#"+t)
if(!n.length)return e
var r=n.wuxComponent(!1)
if(!r)return e
var i=r.getState()
return null==i?e:i}function u(t){if(!t)return null
var e=t.lastIndexOf(".")
if(e>0){var n=t.substring(0,e)
if(window[n]){var r=t.substring(e+1)
for(var i in window[n])if(i==r)return new window[n][i]
return null}}var o=window[t]
return o&&o.prototype?Object.create(o.prototype):null}function p(t,n){if("string"==typeof t&&"string"==typeof n)return t==n
if("string"==typeof t||"string"==typeof n)return!1
var r=e(t),i=e(n)
return r&&i&&r==i}function c(t){if(!t)return["",$("<span></span>"),""]
if("string"==typeof t){if("<"!=t.charAt(0)||">"!=t.charAt(t.length-1)){var e=t.indexOf("<")
if(e<0)return["",$("<span>"+t.replace(">","&gt;")+"</span>"),""]
var n=t.lastIndexOf(">")
return n<0?["",$("<span>"+t.replace("<","&lt;")+"</span>"),""]:[t.substring(0,e),$(t.substring(e,n+1)),t.substring(n+1)]}return["",$(t),""]}return t instanceof jQuery?["",t,""]:["",$("<span>"+t+"</span>"),""]}function d(t){if(!t)return["","",""]
if(" "==t)return["","&nbsp;",""]
var e=" "==t.charAt(0)?"&nbsp;":"",n=t.length>1&&" "==t.charAt(t.length-1)?"&nbsp;":"",r=t.trim().split("<>")
return!r||r.length<2?[e,t.trim(),n]:(e+=r[0],2==r.length?[e,r[1],""]:(n+=r[2],[e,r[1],n]))}function f(t){if(t instanceof M){var e=t.name,n=t.id
return e||(e="WComponent"),n?e+"("+n+")":e}if(t instanceof jQuery){if(t.length){var r=t.attr("id")?" id="+t.attr("id"):""
return t.selector?'$("'+t.selector+'")':"$(<"+t.prop("tagName")+r+">)"}return'$("'+t.selector+'").length=0'}return"object"==typeof t?JSON.stringify(t):t+""}function g(e){if(!e)return""
if(e instanceof M){var n=e.rootTag
if(n)return n.toLowerCase()
var r=e.getRoot()
return r?"":t.getTagName(r)}if(!(e instanceof jQuery)){var i=""+e
if("<"==i.charAt(0)){var o=i.indexOf(" ")
if(o<0&&(o=i.indexOf(">")),o>0){var n=i.substring(1,o).toLowerCase()
return"/"==n.charAt(n.length-1)?n.substring(0,n.length-1):n}return""}return"#"==i.charAt(0)?t.getTagName($(i)):t.getTagName($("#"+i))}if(e.length){var n=e.prop("tagName")
return n?(""+n).toLowerCase():""}return""}function b(t,e){return e?null==t?"string"==typeof e?""==e:!e.id:"object"==typeof t?"string"==typeof e?e==t.id:e.id==t.id:"string"==typeof e?e==t:e.id==t:!t}function y(t){if(!t)return 0
var e=""+t,n=0,r=e.length,i=0
if(r>0)for(;i<r;)n=(n<<5)-n+e.charCodeAt(i++)|0
return n}function m(t){var e=v(t),n={}
if(!e)return n
for(var r=e.split(";"),i=0,o=r;i<o.length;i++){var s=o[i],a=s.split(":")
a.length<2||(n[a[0].trim()]=a[1].trim())}return n}function v(t){var e=""
return t?"string"==typeof t?t.indexOf(":")<=0?"":";"!=t.charAt(t.length-1)?t+";":t:(t.s&&(e+=C(t.s)),t.fs&&(e+="font-style:"+t.fs+";"),t.fw&&(e+="font-weight:"+t.fw+";"),t.tt&&(e+="text-transform:"+t.tt+";"),t.tr&&(e+="transform:"+t.tr+";"),t.fl&&(e+="float:"+t.fl+";"),t.cl&&(e+="clear:"+t.cl+";"),t.a&&(e+="text-align:"+t.a+";"),t.c&&(e+="color:"+t.c+";"),t.v&&(e+="vertical-align:"+t.v+";"),t.d&&(e+="display:"+t.d+";"),t.z&&(e+="z-index:"+t.z+";"),t.lh&&(e+="line-height:"+t.lh+";"),t.ps&&(e+="position:"+t.ps+";"),t.o&&(e+="overflow:"+t.o+";"),t.ox&&(e+="overflow-x:"+t.ox+";"),t.oy&&(e+="overflow-y:"+t.oy+";"),null!=t.op&&(e+="opacity:"+t.op+";"),null!=t.ol&&(e+="outline:"+t.ol+";"),t.cr&&(e+="cursor:"+t.cr+";"),t.cn&&(e+="content:"+t.cn+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-webkit"+t.k+";":"-webkit-"+t.k+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-moz"+t.k+";":"-moz-"+t.k+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-o"+t.k+";":"-o-"+t.k+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-ms"+t.k+";":"-ms-"+t.k+";"),t.bs&&(e+="box-shadow:"+t.bs+";"),t.bz&&(e+="box-sizing:"+t.bz+";"),t.b&&(e+=t.b.indexOf(":")>0?C("border"+t.b):t.b.match(/^(|none|inherit|initial|unset)$/)?"border:"+t.b+";":t.b.indexOf(" ")>0?"border:"+t.b+";":"border:1px solid "+t.b+";"),t.bc&&(e+="border-collapse:"+t.bc+";"),null!=t.br&&(e+="number"==typeof t.br?"border-radius:"+t.br+"px;":"border-radius:"+t.br+";"),null!=t.bsp&&(e+="number"==typeof t.bsp?"border-spacing:"+t.bsp+"px;":"border-spacing:"+t.bsp+";"),null!=t.m&&(e+="number"==typeof t.m?"margin:"+t.m+"px;":t.m.indexOf(":")>0?C("margin"+t.m):"margin:"+t.m+";"),null!=t.mt&&(e+="number"==typeof t.mt?"margin-top:"+t.mt+"px;":"margin-top:"+t.mt+";"),null!=t.mr&&(e+="number"==typeof t.mr?"margin-right:"+t.mr+"px;":"margin-right:"+t.mr+";"),null!=t.mb&&(e+="number"==typeof t.mb?"margin-bottom:"+t.mb+"px;":"margin-bottom:"+t.mb+";"),null!=t.ml&&(e+="number"==typeof t.ml?"margin-left:"+t.ml+"px;":"margin-left:"+t.ml+";"),null!=t.p&&(e+="number"==typeof t.p?"padding:"+t.p+"px;":t.p.indexOf(":")>0?C("padding"+t.p):"padding:"+t.p+";"),null!=t.pt&&(e+="number"==typeof t.pt?"padding-top:"+t.pt+"px;":"padding-top:"+t.pt+";"),null!=t.pr&&(e+="number"==typeof t.pr?"padding-right:"+t.pr+"px;":"padding-right:"+t.pr+";"),null!=t.pb&&(e+="number"==typeof t.pb?"padding-bottom:"+t.pb+"px;":"padding-bottom:"+t.pb+";"),null!=t.pl&&(e+="number"==typeof t.pl?"padding-left:"+t.pl+"px;":"padding-left:"+t.pl+";"),null!=t.f&&(e+="number"==typeof t.f?"font-size:"+t.f+"px;":t.f.indexOf(":")>0?C("font"+t.f):"font-size:"+t.f+";"),t.bg&&(e+=t.bg.indexOf(":")>0?C("background"+t.bg):t.bg.indexOf("url")>=0?"background:"+t.bg+";":"background-color:"+t.bg+";"),t.bgi&&(e+="background-image:"+t.bgi+";"),t.bgp&&(e+="background-position:"+t.bgp+";"),t.bgr&&(e+="background-repeat:"+t.bgr+";"),t.text&&(e+=t.text.indexOf(":")>0?C("text"+t.text):"text-decoration:"+t.text+";"),null!=t.l&&(e+="number"==typeof t.l?"left:"+t.l+"px;":"left:"+t.l+";"),null!=t.r&&(e+="number"==typeof t.r?"right:"+t.r+"px;":"right:"+t.r+";"),null!=t.t&&(e+="number"==typeof t.t?"top:"+t.t+"px;":"top:"+t.t+";"),null!=t.bt&&(e+="number"==typeof t.bt?"bottom:"+t.bt+"px;":"bottom:"+t.bt+";"),t.w&&(e+="number"==typeof t.w?"width:"+t.w+"px;":"width:"+t.w+";"),t.h&&(e+="number"==typeof t.h?"height:"+t.h+"px;":"height:"+t.h+";"),t.minw&&(e+="number"==typeof t.minw?"min-width:"+t.minw+"px;":"min-width:"+t.minw+";"),t.maxw&&(e+="number"==typeof t.maxw?"max-width:"+t.maxw+"px;":"max-width:"+t.maxw+";"),t.minh&&(e+="number"==typeof t.minh?"min-height:"+t.minh+"px;":"min-height:"+t.minh+";"),t.maxh&&(e+="number"==typeof t.maxh?"max-height:"+t.maxh+"px;":"max-height:"+t.maxh+";"),t.ws&&(e+="white-space:"+t.ws+";"),e):e}function _(t,e,n,r){return e&&n?t?r&&t.indexOf(e+":")>=0?C(t):C(t)+e+":"+n+";":e+":"+n+";":C(t)}function C(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||0==t.length)return""
for(var n="",r={},i=!0,o=0;o<t.length;o++){var s=t[o]
s&&("string"==typeof s?(i||(n+=v(r),r={},i=!0),s.indexOf(":")>0&&(n+=s,";"!=s.charAt(s.length-1)&&(n+=";"))):($.extend(r,s),i=!1))}return i||(n+=v(r)),n}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||!t.length)return""
for(var n="",r=0;r<t.length;r++){var i=t[r]
if(i){var o="string"==typeof i?i:i.n
o&&(o.indexOf(":")>0||(n+=o+" "))}}return n.trim()}function x(t){if(!t)return""
if("string"==typeof t)return t
if("object"==typeof t){var e=""
for(var n in t)e+=n+'="'+t[n]+'" '
return e.trim()}return""}function S(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]
if(!e||!e.length)return""
for(var r=t?"<ul"+T(t)+">":"<ul>",i=0;i<e.length;i++){var o=e[i]
null!=o&&(r+="<li>"+o+"</li>")}return r+="</ul>"}function O(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r]
if(!n||!n.length)return""
var i=""
i=null!=e?t?"<ol"+T(t)+' start="'+e+'">':'<ol start="'+e+'">':t?"<ol"+T(t)+">":"<ol>"
for(var o=0;o<n.length;o++){var s=n[o]
null!=s&&(i+="<li>"+s+"</li>")}return i+="</ol>"}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||!t.length)return""
var n=w.apply(void 0,t),r=C.apply(void 0,t),i=""
return n&&(i+=' class="'+n+'"'),r&&(i+=' style="'+r+'"'),i}function I(t,e){if(!t||!e)return t
for(var n=t.split(" "),r="",i=0,o=n;i<o.length;i++){var s=o[i]
s!=e&&(r+=s+" ")}return r.trim()}function W(t,e){if(!t||!e)return t
for(var n=t.split(" "),r=!1,i="",o=0,s=n;o<s.length;o++){var a=s[o]
a!=e?i+=a+" ":r=!0}return r?i.trim():i.trim()+" "+e}function R(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]
if(!t||!e||!e.length)return t
if(t instanceof M)t.css.apply(t,e)
else if(t instanceof jQuery){if(!t.length)return t
var r=C.apply(void 0,e),i=w.apply(void 0,e)
i&&t.addClass(i),r&&t.css(m(r))}return t}function D(t,e,n,r,i,o){if(!t)return""
e||(e=""),n||(n="")
var s=o?' title="'+o+'"':""
return i=i?" "+i:"",t.indexOf(".")>0?e+'<img src="'+t+'"'+s+">"+n:!r||r<2?e+'<i class="fa '+t+i+'"'+s+"></i>"+n:(r>5&&(r=5),e+'<i class="fa '+t+" fa-"+r+"x"+i+'"'+s+"></i>"+n)}function A(e,n,r,i,o,s){e||(e="div")
var a,l
"string"==typeof r?r.indexOf(":")>0?l=r:a=r:r&&(r.n&&(a=r.n),l=t.style(r)),s&&(a?a+=" "+s:a=s)
var h="<"+e
o&&(h+=' id="'+o+'"'),a&&(h+=' class="'+a+'"'),l&&(h+=' style="'+l+'"')
var u=t.attributes(i)
u&&(h+=" "+u),h+=">"
var p=d(n)
return h+=p[1],"input"==e?p[0]+h+p[2]:(h+="</"+e+">",p[0]+h+p[2])}function E(e,n,r,i){if(!e||!n)return e
var o=t.cls(n.classStyle,n.style),s=t.style(n.style),a=n.type?n.type:"div",l="<"+a
n.id&&(l+=' id="'+n.id+'"'),o&&(l+=' class="'+o+'"'),s&&(l+=' style="'+s+'"')
var h=t.attributes(x)
h&&(l+=" "+h),n.title&&(l+=' title="'+n.title+'"'),l+=">",l+="</"+a+">"
var u=$(l)
return n.element=u,r&&e.append(r),e.append(u),i&&e.append(i),n.wrapper?t.addWrapper(u,n.wrapper,n.begin,n.end):(n.begin&&u.append(n.begin),n.end&&u.append(n.end),u)}function k(e,n){if(e){if("string"==typeof e){if(e.indexOf("<")>=0)return
e.indexOf("#")<0&&(e="#"+e)
var r=t.getComponent(e)
if(r){if(void 0===n)return r.getState()
r.setState(n)}else{if(void 0===n)return $(e).val()
$(e).val(n)}}else if(e instanceof M){if(void 0===n)return e.getState()
e.setState(n)}else if(e instanceof jQuery){if(void 0===n)return e.val()
e.val(n)}else{if(void 0===n)return $(e).val()
$(e).val(n)}return n}}function L(e,n){if(void 0===n&&(n="div"),e){if("string"==typeof e){if(e.indexOf("<")>=0)return
return e.indexOf("#")<0&&(e="#"+e),t.getContainer($(e))}if(e instanceof M){var r=e.getContext()
if(r){var i=r.closest(n)
if(i&&i.length)return i}return r}var i=e.parent().closest(n)
return i&&i.length?i:e.parent()}}function N(t,e,n,r){if(void 0===e&&(e=!0),void 0===n&&(n=!1),t){if(r&&"object"==typeof r){var i=""
for(var o in r)if(r.hasOwnProperty(o)){var s=r[o]
i+="&"+encodeURIComponent(o)+"="+encodeURIComponent(s)}i&&(t.indexOf("?")>0?t+=i:t+="?"+i.substring(1))}n?window.open(t,"_blank"):e?window.location.assign(t):window.location.replace(t)}}t.debug=!1,t.registry=[],t.version="1.0.0"
var M=function(){function e(e,n,r,i,o,s){if(this.mounted=!1,this.debug=t.debug,this.forceOnChange=!1,this.rootTag="div",this.subSeq=0,this.dontTrigger=!1,this._visible=!0,this._enabled=!0,this.handlers={},this.cuid=Math.floor(1e9*Math.random()),e instanceof jQuery)this.root=e,this.root&&this.root.length&&(this.mounted=!0),this.debug&&console.log("["+f(this)+"] new wrapper root="+f(this.root))
else{"string"==typeof e&&(this.id="*"==e?"w"+this.cuid:e),this.name=n||"WComponent",this._classStyle=i
var a=t.cls(o)
a&&(this._classStyle=this._classStyle?this._classStyle+" "+a:a),this._style=t.style(o),this._attributes=t.attributes(s),this.debug&&console.log("["+f(this)+"] new"),this.debug&&console.log("["+f(this)+"] updateProps",r),this.updateProps(r)}}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.internal?this.internal.visible:this._visible},set:function(t){this._visible=t,this.internal&&(this.internal.visible=t),this.root&&this.root.length&&(this._visible?this.root.show():this.root.hide())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.internal?this.internal.enabled:this._enabled},set:function(t){this._enabled=t,this.internal&&(this.internal.enabled=t),this.root&&this.root.length&&this.root.prop("disabled",!this._enabled)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.internal?this.internal.style:this._style},set:function(e){this._style=t.css(this._baseStyle,e),this.internal&&(this.internal.style=e),this.root&&this.root.length&&this.root.attr("style",this._style)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classStyle",{get:function(){return this.internal?this.internal.classStyle:this._classStyle},set:function(e){this.internal&&(this.internal.classStyle=e)
var n=!1,r=!1
e&&e.length>1&&"!"==e.charAt(0)?(e=e.substring(1),n=!0):e&&e.length>1&&"?"==e.charAt(0)&&(e=e.substring(1),r=!0),this._classStyle=n?t.removeClass(this._classStyle,e):r?t.toggleClass(this._classStyle,e):t.cls(this._baseClass,e),this.root&&this.root.length&&(n?this.root.removeClass(e):r?this.root.toggleClass(e):this.root.addClass(this._classStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.internal?this.internal.attributes:this._attributes},set:function(t){this._attributes=t,this.internal&&(this.internal.attributes=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.internal?this.internal.tooltip:this._tooltip},set:function(t){this._tooltip=t,this.internal&&(this.internal.tooltip=t),this.root&&this.root.length&&this.root.attr("title",this._tooltip)},enumerable:!0,configurable:!0}),e.prototype.css=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||0==t.length)return this
var n=w.apply(void 0,t)
n&&(this.classStyle=n)
var r=C.apply(void 0,t)
return r&&(this.style=r),this},e.prototype.focus=function(){return this.internal&&this.internal.focus(),this.root&&this.root.length&&this.root.focus(),this},e.prototype.blur=function(){return this.internal&&this.internal.blur(),this.root&&this.root.length&&this.root.blur(),this},e.prototype.forceUpdate=function(t){return this.update(this.props,this.state,!1,!1,!0,t),this},e.prototype.getContext=function(){return this.context},e.prototype.getRoot=function(){if(!this.root&&this.internal)return this.internal.getRoot()
if(!this.root){if(this.id){var t=$("#"+this.id)
if(t.length)return t}return this.context}return this.root},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t,e,n){return this.debug&&console.log("["+f(this)+"] setState",t),this.update(this.props,t,!1,!0,this.forceOnChange||e,n),this},e.prototype.getProps=function(){return this.props},e.prototype.setProps=function(t,e,n){return this.debug&&console.log("["+f(this)+"] setProps",t),this.update(t,this.state,!0,!1,this.forceOnChange||e,n),this},e.prototype.on=function(t,e){if(!t)return this
for(var n=t.split(" "),r=0,i=n;r<i.length;r++){var o=i[r]
this.handlers[o]||(this.handlers[o]=[]),this.handlers[o].push(e)}return this.internal&&this.internal.on(t,e),this.root&&this.root.length&&this.root.on(t,e),this},e.prototype.off=function(t){if(t)for(var e=t.split(" "),n=0,r=e;n<r.length;n++){var i=r[n]
delete this.handlers[i]}else this.handlers={}
return this.internal&&this.internal.off(t),this.root&&this.root.length&&this.root.off(t),this},e.prototype.trigger=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i]
if(this.debug&&console.log("["+f(this)+"] trigger",t,r),t){var o=r&&r.length>0?r[0]:void 0
if("_"==t.charAt(0)||"mount"==t||"unmount"==t||"statechange"==t||"propschange"==t){if(void 0!==o&&("statechange"==t?this.state!=r[0]&&(this.state=r[0],this.debug&&console.log("["+f(this)+"] trigger set state",this.state)):"propschange"==t&&this.props!=r[0]&&(this.props=r[0],this.debug&&console.log("["+f(this)+"] trigger set props",this.props))),!this.handlers||!this.handlers[t])return this
for(var s=this.createEvent(t,o),a=0,l=this.handlers[t];a<l.length;a++){(0,l[a])(s)}}else this.root&&this.root.length&&(this.debug&&console.log("["+f(this)+"] trigger "+t+" on root="+f(this.root)),(e=this.root).trigger.apply(e,__spreadArrays([t],r)))
return this.internal&&(this.debug&&console.log("["+f(this)+"] trigger "+t+" on internal="+f(this.internal)),(n=this.internal).trigger.apply(n,__spreadArrays([t],r))),this}},e.prototype.unmount=function(){if(this.debug&&console.log("["+f(this)+"] unmount ctx="+f(this.context)+" root="+f(this.root),this.state,this.props),this.componentWillUnmount(),this.internal&&this.internal.unmount(),this.internal=void 0,this.root&&this.root.length&&this.root.remove(),this.root=void 0,this.id){var e=t.registry.indexOf(this.id)
e>=0&&t.registry.splice(e,1)}return this.mounted=!1,this.trigger("unmount"),this},e.prototype.mount=function(n){this.debug&&console.log("["+f(this)+"] mount ctx="+f(n)+" root="+f(this.root),this.state,this.props),this.id||this.root&&this.root.length&&(this.id=this.root.attr("id")),n&&n.length&&(this.context=n),this.context||this.root&&this.root.length&&(this.context=this.root.parent(),this.context||(this.context=this.root))
try{if(this.mounted&&this.unmount(),this.mounted=!1,!this.context||!this.context.length){var r=$("#"+this.id)
r.length&&(this.context=r)}if(this.debug&&console.log("["+f(this)+"] componentWillMount ctx="+f(n)+" root="+f(this.root)),this.componentWillMount(),this.context&&this.context.length){this.debug&&console.log("["+f(this)+"] render ctx="+f(n)+" root="+f(this.root))
var i=this.render()
if(void 0!==i&&null!==i)if(i instanceof e){if(this.debug&&console.log("["+f(this)+"] render -> "+f(i)),this.internal=i,i.parent||(i.parent=this),i.mount(this.context),!this.root)if(this.id){var r=$("#"+this.id)
this.root=r.length?r:this.internal.getRoot()}else this.root=this.context}else if(i instanceof jQuery)this.context.append(i),this.root||(this.root=i)
else{var o=c(i),s=o[0],a=o[1],l=o[2]
s&&this.context.append(s),this.context.append(a),l&&this.context.append(l),this.root||(this.root=this.id?$("#"+this.id):a)}else this.internal&&this.internal.mount(this.context),this.root||(this.root=this.id?$("#"+this.id):this.context)}if(this._visible||(this.internal?this.internal.visible=!1:this.root.hide()),this._enabled||(this.internal?this.internal.enabled=!1:this.root.prop("disabled",!0)),this.debug&&console.log("["+f(this)+"] componentDidMount ctx="+f(n)+" root="+f(this.root)),this.componentDidMount(),this.root&&this.root.length)for(var h in this.handlers)if(h&&"_"!=h.charAt(0)&&"mount"!=h&&"unmount"!=h&&"statechange"!=h&&"propschange"!=h)for(var u=0,p=this.handlers[h];u<p.length;u++){var d=p[u]
this.root.on(h,d)}if(this.root.wuxComponent(this),this.mounted=!0,this.id&&(!this.internal||this.internal.id!=this.id)){if(t.registry.indexOf(this.id)>=0){var g=t.getComponent(this.id)
g&&g.cuid!=this.cuid&&console.error("["+f(this)+"] id already used by "+f(g))}else t.registry.push(this.id)}this.trigger("mount")}catch(t){var b=f(this)+" "+f(this.context)
console.error("["+f(this)+"] mount error "+b,t),this.componentDidCatch(t,b)}return this},e.prototype.componentWillUnmount=function(){},e.prototype.componentWillMount=function(){},e.prototype.render=function(){return this.buildRoot(this.rootTag)},e.prototype.componentDidMount=function(){},e.prototype.componentDidCatch=function(t,e){},e.prototype.shouldComponentUpdate=function(t,e){return"object"==typeof t||"object"==typeof e||(this.props!=t||this.state!=e)},e.prototype.componentWillUpdate=function(t,e){},e.prototype.componentDidUpdate=function(t,e){},e.prototype.updateProps=function(t){this.props=t},e.prototype.updateState=function(t){this.state=t},e.prototype.update=function(t,e,n,r,i,o){void 0===i&&(i=!1),this.debug&&console.log("["+f(this)+"] update",t,e,"propsChange="+n+",stateChange="+r+",force="+i),t=void 0===t?this.props:t
var s=this.props,a=this.state
if(this.dontTrigger=!1,this.mounted){if(i||this.shouldComponentUpdate(t,e)){try{this.debug&&console.log("["+f(this)+"] componentWillUpdate",t,e),this.componentWillUpdate(t,e),n&&(this.debug&&console.log("["+f(this)+"] updateProps",t),this.updateProps(t)),r&&(this.debug&&console.log("["+f(this)+"] updateState",e),this.updateState(e)),i&&this.mount(),this.debug&&console.log("["+f(this)+"] componentDidUpdate",s,a),this.componentDidUpdate(s,a),n&&!this.dontTrigger&&this.trigger("propschange"),r&&!this.dontTrigger&&this.trigger("statechange")}catch(t){return this.componentDidCatch(t,f(this)+"|"+f(this.context)),!1}o&&o()}}else n&&(this.debug&&console.log("["+f(this)+"] updateProps",t),this.updateProps(t),this.dontTrigger||this.trigger("propschange")),r&&(this.debug&&console.log("["+f(this)+"] updateState",e),this.updateState(e),this.dontTrigger||this.trigger("statechange"))
return!0},e.prototype.createEvent=function(t,e){var n=this.root&&this.root.length?this.root.get(0):this.root
return{component:this,element:this.root,target:n,type:t,data:e}},e.prototype.shouldBuildRoot=function(){if(this.internal)return!1
if(this.root&&this.root.length)return!1
if(this.context&&this.context.length){var t=this.context.attr("id")
if(!t&&t==this.id)return!1}return!0},e.prototype.buildRoot=function(t,e,n,r,i,o,s){return this.debug&&console.log("["+f(this)+"] buildRoot",t,e,n,r,i,o,s),this.shouldBuildRoot()?(this.debug&&console.log("["+f(this)+"] shouldBuildRoot() -> true"),this.build(t,e,n,r,i,o,s)):void(this.debug&&console.log("["+f(this)+"] shouldBuildRoot() -> false"))},e.prototype.build=function(e,n,r,i,o,s,a){e||(e="div"),void 0===i&&(i=this._classStyle),void 0===o&&(o=this._style),void 0===s&&(s=this._attributes),void 0===a&&(a=this.id)
var l="<"+e
a&&(l+=' id="'+a+'"'),i&&(l+=' class="'+i+'"'),o&&(l+=' style="'+o+'"')
var h=t.attributes(s)
h&&(l+=" "+h)
var u=t.attributes(r)
u&&(l+=" "+u),l+=">"
var p=d(null==n?this.make():n)
return l+=p[1],"input"==e?p[0]+l+p[2]:(l+="</"+e+">",p[0]+l+p[2])},e.prototype.make=function(){return""},e.prototype.subId=function(t,n){if(t instanceof e){var r=t.id
return r&&this.id?0!=r.indexOf(this.id+"-")?r:r.substring(this.id.length+1):r}return this.id&&"*"!=this.id||(this.id="w"+this.cuid),t&&"*"!=t||(t=(this.subSeq++).toString()),n||0==n?this.id+"-"+t+"-"+n:this.id+"-"+t},e.prototype.ripId=function(t){return t&&this.id&&0==t.indexOf(this.id)&&t.length>this.id.length+1?t.substring(this.id.length+1):t},e.prototype.transferTo=function(t,e,n){return this.debug&&console.log("["+f(this)+"] transferTo "+f(t)),!!t&&(t.setState(this.getState(),e,n),!0)},e}()
t.WComponent=M
!function(t){t.Text="text",t.Number="number",t.Password="password",t.CheckBox="checkbox",t.Radio="radio",t.Date="date",t.DateTime="datetime",t.Time="time",t.File="file",t.Image="image",t.Color="color",t.Email="email",t.Url="url",t.Month="month",t.Week="week",t.Search="search",t.Hidden="hidden",t.Note="note",t.Select="select",t.Static="static",t.Component="component",t.Blank="blank",t.Link="link",t.Integer="integer",t.Cron="crontab",t.TreeSelect="tree",t.Ftp="ftp"}(t.WInputType||(t.WInputType={}))
var U=function(){function e(){}return e.toArrayComponent=function(t){if(!t)return[]
if(Array.isArray(t)&&t.length)return t[0]instanceof M?t:[]
var e=[]
return t instanceof M&&e.push(t),e},e.hasComponents=function(t){return!!t&&(Array.isArray(t)&&t.length?t[0]instanceof M:t instanceof M)},e.toArray=function(t){if(t instanceof M&&(t=t.getState()),null==t)return[]
if(Array.isArray(t))return t
var e=[]
return e.push(t),e},e.toArrayNumber=function(t,n){if(t instanceof M&&(t=t.getState()),null==t)return[]
var r=[]
if(Array.isArray(t))for(var i=0,o=t;i<o.length;i++){var s=o[i],a=e.toNumber(s)
n&&!a||r.push(a)}else{var a=e.toNumber(t)
if(n&&!a)return r
r.push(a)}return r},e.toArrayString=function(t,n){if(t instanceof M&&(t=t.getState()),null==t)return[]
var r=[]
if(Array.isArray(t))for(var i=0,o=t;i<o.length;i++){var s=o[i],a=e.toString(s)
n&&!a||r.push(a)}else{var a=e.toString(t)
if(n&&!a)return r
r.push(e.toString(t))}return r},e.splitNumbers=function(t,n){if(!t)return[]
for(var r=e.toString(t),i=r.split(n),o=[],s=0,a=i;s<a.length;s++){var l=a[s]
o.push(e.toNumber(l))}return o},e.toObject=function(t,e){return t instanceof M&&(t=t.getState()),null==t?e:"object"==typeof t?t:e},e.toString=function(n,r){return void 0===r&&(r=""),n instanceof M&&(n=n.getState()),null==n?r:"string"==typeof n?n:n instanceof Date?t.formatDate(n):"object"==typeof n&&void 0!=n.id?e.toString(n.id,r):Array.isArray(n)&&n.length?e.toString(n[0],r):""+n},e.toText=function(t,n){return void 0===n&&(n=""),e.toString(t,n).replace("<","&lt;").replace(">","&gt;")},e.toNumber=function(t,n){if(void 0===n&&(n=0),t instanceof M&&(t=t.getState()),null==t)return n
if("number"==typeof t)return t
if(t instanceof Date)return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()
if("object"==typeof t&&void 0!=t.id)return e.toNumber(t.id,n)
if(Array.isArray(t)&&t.length)return e.toNumber(t[0],n)
var r=(""+t).trim()
r.indexOf(".")>=0&&r.indexOf(",")>=0&&(r=r.replace(".","")),r=r.replace(",",".")
var i=r.indexOf(".")>=n?parseFloat(r):parseInt(r)
return isNaN(i)?n:i},e.toInt=function(t,n){if(void 0===n&&(n=0),t instanceof M&&(t=t.getState()),null==t)return n
if("number"==typeof t)return Math.floor(t)
if(t instanceof Date)return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()
if("object"==typeof t&&void 0!=t.id)return e.toInt(t.id,n)
if(Array.isArray(t)&&t.length)return e.toInt(t[0],n)
var r=(""+t).replace(",","."),i=parseInt(r)
return isNaN(i)?n:i},e.toIntTime=function(t,n){if(void 0===n&&(n=0),t instanceof M&&(t=t.getState()),null==t)return n
if(t instanceof Date)return 100*t.getHours()+t.getMinutes()
if(Array.isArray(t)&&t.length)return e.toIntTime(t[0],n)
var r=(""+t).replace(":","").replace(".","").replace(",",""),i=parseInt(r)
return isNaN(i)?n:i},e.isNumeric=function(t){return!isNaN(t)},e.checkEmail=function(t){if(!t)return""
var n=e.toString(t)
if(!n)return""
if(n.length<5)return""
var r=n.indexOf("@")
return r<=0?"":n.lastIndexOf(".")<r?"":n.trim().toLowerCase()},e.starts=function(t,n){return!(!t||null==n)&&0==e.toString(t).indexOf(n)},e.ends=function(t,n){if(!t||null==n)return!1
var r=e.toString(t),i=r.lastIndexOf(n)
return!(i<0)&&i==r.length-n.length},e.isEmpty=function(t){if(!t)return!0
if(Array.isArray(t)&&!t.length)return!0
if("object"==typeof t){for(var e in t)if(t.hasOwnProperty(e))return!1
return!0}return!1},e.toBoolean=function(e,n){return void 0===n&&(n=!1),e instanceof t.WCheck&&(e=e.getProps()),e instanceof M&&(e=e.getState()),null==e?n:"boolean"==typeof e?e:"string"==typeof e&&e.length?"1YyTtSs".indexOf(e.charAt(0))>=0:!!n},e.toDate=function(t,e){if(t instanceof M&&(t=t.getState()),null==t)return e
if(t instanceof Date)return t
if("number"==typeof t)return t<10000101?e:new Date(t/1e4,t%1e4/100-1,t%1e4%100)
if("string"==typeof t){if(t.length<8)return e
var n=t.indexOf(",")
if(n>=0&&(t=t.substring(n+1)),t.indexOf("-")>3)return new Date(t.trim())
if(this.isNumeric(t)){var r=parseInt(t)
return r<10000101?e:new Date(r/1e4,r%1e4/100-1,r%1e4%100)}return new Date(t.trim().replace(/(\d{1,2}).(\d{1,2}).(\d{4})/,"$3-$2-$1"))}return e},e.getWeek=function(t){var n
n=t instanceof Date?new Date(t.getTime()):e.toDate(t),n||(n=new Date),n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7)
var r=new Date(n.getFullYear(),0,4)
return 1+Math.round(((n.getTime()-r.getTime())/864e5-3+(r.getDay()+6)%7)/7)},e.getParam=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&")
var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),r=n.exec(e)
return r&&r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):""},e.size=function(t){if(!t)return 0
if(Array.isArray(t))return t.length
if("object"==typeof t){var e=0
for(var n in t)t.hasOwnProperty(n)&&e++
return e}return 0},e.setValue=function(t,e,n){return"object"==typeof t&&(t[e]=n),t},e.getValue=function(t,n,r){if(!n)return r
if(Array.isArray(t)&&t.length)return"-1"==n?e.getLast(t,r):e.isNumeric(n)?e.getItem(t,e.toInt(n),r):e.getValue(t[0],n,r)
if("object"==typeof t){var i=n.indexOf(".")
if(null==t[n]&&i>0){var o=n.substring(0,i)
return null==t[o]?r:e.getValue(t[o],n.substring(i+1),r)}return null==t[n]?r:t[n]}return r},e.getItem=function(t,e,n){if(e<0)return n
if(Array.isArray(t)){if(t.length>e){var r=t[e]
return null==r?n:r}return n}return n},e.getEntity=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
if(!t)return null
var i
if(Array.isArray(t)){var o=t[0]
return o?(i={id:o},i.text=e.toString(t[1]),null!=t[2]&&(i.code=t[2]),null!=t[3]&&(i.group=t[3]),null!=t[4]&&(i.type=t[4]),null!=t[5]&&(i.date=e.toDate(t[5])),null!=t[6]&&(i.reference=t[6]),null!=t[7]&&(i.value=e.toNumber(t[7])),i):null}if(!n||!n.length)return null
if(n[0]){var o=e.getValue(t,n[0])
if(!o)return null
i={id:o}}return i?(n[1]&&(i.text=e.getString(t,n[1])),n[2]&&(i.code=e.getValue(t,n[2])),n[3]&&(i.group=e.getValue(t,n[3])),n[4]&&(i.type=e.getValue(t,n[4])),n[5]&&(i.date=e.getDate(t,n[5])),n[6]&&(i.reference=e.getValue(t,n[6])),n[7]&&(i.value=e.getNumber(t,n[7])),i):null},e.toEntity=function(t,n){if(!t||!n||!n.id)return null
var r={id:e.getValue(t,n.id)}
return n.text&&(r.text=e.getString(t,n.text)),n.code&&(r.code=e.getValue(t,n.code)),n.group&&(r.group=e.getValue(t,n.group)),n.type&&(r.type=e.getValue(t,n.type)),n.reference&&(r.reference=e.getValue(t,n.reference)),n.enabled&&(r.enabled=e.getBoolean(t,n.enabled)),n.marked&&(r.marked=e.getBoolean(t,n.marked)),n.date&&(r.date=e.getDate(t,n.date)),n.notBefore&&(r.notBefore=e.getDate(t,n.notBefore)),n.expires&&(r.expires=e.getDate(t,n.expires)),n.icon&&(r.icon=e.getString(t,n.icon)),n.color&&(r.color=e.getString(t,n.color)),n.value&&(r.value=e.getNumber(t,n.value)),r},e.getFirst=function(t,e){if(Array.isArray(t)){if(t.length>0){var n=t[0]
return null==n?e:n}return e}return e},e.getLast=function(t,e){if(Array.isArray(t)){if(t.length>0){var n=t[t.length-1]
return null==n?e:n}return e}return e},e.toCode=function(t,e){return void 0===e&&(e=""),t instanceof M&&(t=t.getState()),null==t?e:"string"==typeof t?t:"object"==typeof t&&void 0!=t.code?t.code:Array.isArray(t)&&t.length?t.length>1?t[1]:t[0]:t},e.toDesc=function(t,n){return void 0===n&&(n=""),t instanceof M&&(t=t.getState()),null==t?n:"string"==typeof t?t:"object"==typeof t&&void 0!=t.text?e.toString(t.text,n):Array.isArray(t)&&t.length?e.toString(t[t.length-1],n):e.toString(t,n)},e.getNumber=function(t,n,r){return e.toNumber(e.getValue(t,n,r))},e.getInt=function(t,n,r){return e.toInt(e.getValue(t,n,r))},e.getString=function(n,r,i,o){var s=e.getValue(n,r)
return null==s?i:o?"?"==o?"number"==typeof s?t.formatNum(s):e.toString(s):"c"==o?t.formatCurr(s):"c5"==o?t.formatCurr5(s):"n"==o?t.formatNum(s):"n2"==o?t.formatNum2(s):"m"==o?t.formatMonth(s):"d"==o?t.formatDate(s):"dt"==o?t.formatDateTime(s):"t"==o?t.formatTime(s):e.toString(s):e.toString(s)},e.getText=function(t,n,r){return e.toText(e.getValue(t,n,r))},e.getBoolean=function(t,n,r){return e.toBoolean(e.getValue(t,n,r))},e.getDate=function(t,n,r){return e.toDate(e.getValue(t,n,r))},e.getArray=function(t,n){return e.toArray(e.getValue(t,n))},e.getArrayNumber=function(t,n,r){return e.toArrayNumber(e.getValue(t,n),r)},e.getArrayString=function(t,n,r){return e.toArrayString(e.getValue(t,n),r)},e.getCode=function(t,n,r){return e.toCode(e.getValue(t,n,r))},e.getDesc=function(t,n,r){return e.toDesc(e.getValue(t,n,r))},e.getObject=function(t,n,r){var i=e.toObject(e.getValue(t,n))
return!i&&r?{}:i},e.sort=function(t,n,r){if(void 0===n&&(n=!0),!t)return[]
var i=e.toArray(t)
if(!r){var o=i.sort()
return n?o:o.reverse()}var s=i.sort(function(t,n){var i=e.getValue(t,r),o=e.getValue(n,r)
return i<o?-1:i>o?1:0})
return n?s:s.reverse()},e.find=function(t,n,r){if(!t||!n)return null
for(var i=e.toArray(t),o=0,s=i;o<s.length;o++){var a=s[o],l=e.getValue(a,n)
if(l instanceof Date&&r instanceof Date&&l.getTime()==r.getTime())return a
if(l==r)return a}return null},e.indexOf=function(t,n,r){if(!t||!n)return-1
for(var i=e.toArray(t),o=0;o<i.length;o++){var s=e.getValue(i[o],n)
if(s instanceof Date&&r instanceof Date&&s.getTime()==r.getTime())return o
if(s==r)return o}return-1},e.isSameDate=function(t,e){return this.toNumber(t)==this.toNumber(e)},e.indexOfDate=function(t,n){if(!t||!n)return-1
for(var r=e.toNumber(n),i=0;i<t.length;i++)if(t[i]){var o=e.toNumber(t[i])
if(o==r)return i}return-1},e.round2=function(t){if(null==t)return 0
var n=e.toNumber(t)
return Math.round(100*n)/100},e.floor2=function(t){if(null==t)return 0
var n=e.toNumber(t)
return Math.floor(100*n)/100},e.ceil2=function(t){if(null==t)return 0
var n=e.toNumber(t)
return Math.ceil(100*n)/100},e.compare2=function(t,n){if(!t&&!n)return 0
var r=Math.round(100*e.toNumber(t)),i=Math.round(100*e.toNumber(n))
return r==i?0:r>i?1:-1},e.compare5=function(t,n){if(!t&&!n)return 0
var r=Math.round(1e4*e.toNumber(t)),i=Math.round(1e4*e.toNumber(n))
return r==i?0:r>i?1:-1},e.getCurrDate=function(t,e,n,r,i){var o=new Date
return o.setHours(0,0,0,0),t&&o.setDate(o.getDate()+t),e&&o.setMonth(o.getMonth()+e),n&&o.setFullYear(o.getFullYear()+n),r&&o.setDate(1),i&&(o.setMonth(o.getMonth()+1),o.setDate(0)),o},e.calcDate=function(t,e,n,r,i,o){return t=t?new Date(t.getTime()):new Date,t.setHours(0,0,0,0),e&&t.setDate(t.getDate()+e),n&&t.setMonth(t.getMonth()+n),r&&t.setFullYear(t.getFullYear()+r),i&&t.setDate(1),o&&(t.setMonth(t.getMonth()+1),t.setDate(0)),t},e.timestamp=function(t){var n=t?e.toDate(t):new Date
n||(n=new Date)
var r=""+n.getFullYear(),i=n.getMonth()+1,o=i<10?"0"+i:""+i,s=n.getDate(),a=s<10?"0"+s:""+s,l=n.getHours(),h=l<10?"0"+l:""+l,u=n.getMinutes(),p=u<10?"0"+u:""+u,c=n.getSeconds()
return r+o+a+h+p+(c<10?"0"+c:""+c)},e.nvl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(t&&t){for(var n=0,r=t;n<r.length;n++){var i=r[n]
if(!i)return i}return t[0]}},e.eqValues=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r]
if(!t&&!e)return!0
if(!t||!e)return!1
for(var i=0,o=n;i<o.length;i++){var s=o[i]
if(t[s]!=e[s])return!1}return!0},e.cat=function(t,n,r,i,o){var s=e.toString(t),a=e.toString(n),l=e.toString(r),h=e.toString(i),u=e.toString(o),p=""
return s&&(p+=s,l&&(p+=l)),a&&(h&&(p+=h),p+=a,u&&(p+=u)),p},e.col=function(t,n,r){var i=[]
if(!t||!t.length)return i
for(var o=0,s=t;o<s.length;o++){var a=s[o]
i.push(e.getItem(a,n,r))}return i},e.getSortedKeys=function(t){if(!t)return[]
var e=[]
for(var n in t)t.hasOwnProperty(n)&&e.push(n)
return e.sort()},e.diffMinutes=function(t,n){var r=e.toDate(t),i=e.toDate(n)
return r||(r=new Date),i||(i=new Date),(r.getTime()-i.getTime())/6e4},e.diffHours=function(t,n){var r=e.toDate(t),i=e.toDate(n)
return r||(r=new Date),i||(i=new Date),(r.getTime()-i.getTime())/36e5},e.diffDays=function(t,n){var r=e.toDate(t),i=e.toDate(n)
r||(r=new Date),i||(i=new Date)
var o=r.getTime()-i.getTime(),s=o/864e5,a=o%864e5,l=a/6e4,h=s
return l>12&&h++,h},e}()
t.WUtil=U,t.getId=e,t.firstSub=n,t.lastSub=r,t.getComponent=i,t.getRootComponent=o,t.setProps=s,t.getProps=a,t.setState=l,t.getState=h,t.newInstance=u,t.same=p,t.parse=c,t.divide=d,t.str=f,t.getTagName=g,t.match=b,t.hashCode=y,t.styleObj=m,t.style=v,t.addStyle=_,t.css=C,t.cls=w,t.attributes=x,t.ul=S,t.ol=O,t.buildCss=T,t.removeClass=I,t.toggleClass=W,t.setCss=R,t.buildIcon=D,t.build=A,t.addWrapper=E,t.val=k,t.getContainer=L,t.openURL=N}(WUX||(WUX={}))
var WUX
!function(t){function e(t,e,n,r){_showMessage(t,e,n,r)}function n(t,e,n,r){_showInfo(t,e,n,r)}function r(t,e,n){_showSuccess(t,e,n)}function i(t,e,n){_showWarning(t,e,n)}function o(t,e,n){_showError(t,e,n)}function s(t,e){_confirm(t,e)}function a(t,e,n){_getInput(t,e,n)}function l(){return $("#ptitle")}function h(){return $("#pbreadcrumb")}function u(){return $("#pheader")}function p(){return $("#pfooter")}function c(){return $("#side-menu")}function d(){return $("#view-root")}function f(t){}function g(){}function b(e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),!e)return""
var i=t.WUtil.toDate(e)
if(!i)return""
var o=i.getMonth()+1,s=o<10?"0"+o:""+o,a=i.getDate()<10?"0"+i.getDate():""+i.getDate()
return n?t.formatDay(i.getDay(),r)+", "+a+"/"+s+"/"+i.getFullYear():a+"/"+s+"/"+i.getFullYear()}function y(e,n,r,i){if(void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),!e)return""
var o=t.WUtil.toDate(e)
if(!o)return""
var s=o.getMonth()+1,a=s<10?"0"+s:""+s,l=o.getDate()<10?"0"+o.getDate():""+o.getDate(),h=o.getHours()<10?"0"+o.getHours():""+o.getHours(),u=o.getMinutes()<10?"0"+o.getMinutes():""+o.getMinutes()
if(n){var p=o.getSeconds()<10?"0"+o.getSeconds():""+o.getSeconds()
return r?t.formatDay(o.getDay(),i)+", "+l+"/"+a+"/"+o.getFullYear()+" "+h+":"+u+":"+p:l+"/"+a+"/"+o.getFullYear()+" "+h+":"+u+":"+p}return r?t.formatDay(o.getDay(),i)+", "+l+"/"+a+"/"+o.getFullYear()+" "+h+":"+u:l+"/"+a+"/"+o.getFullYear()+" "+h+":"+u}function m(t,e){if(void 0===e&&(e=!1),null==t)return""
if("number"==typeof t){if(e){var n=Math.floor(t/1e4),r=Math.floor(t%1e4/100),i=t%1e4%100,o=r<10?"0"+r:""+r,s=i<10?"0"+i:""+i
return n+":"+o+":"+s}var n=Math.floor(t/100),r=t%100,o=r<10?"0"+r:""+r
return n+":"+o}if("string"==typeof t)return t.indexOf(":")>0?t:t.length<3?t+":00":t.length>=5?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4):t.substring(0,2)+":"+t.substring(2)
if(t instanceof Date){var a=t.getHours()<10?"0"+t.getHours():""+t.getHours(),l=t.getMinutes()<10?"0"+t.getMinutes():""+t.getMinutes()
if(e){var s=t.getSeconds()<10?"0"+t.getSeconds():""+t.getSeconds()
return a+":"+l+":"+s}return a+":"+l}return""}function v(e,n,r,i){if(""===e||null==e)return""
var o=t.WUtil.toNumber(e),s=(""+Math.round(100*o)/100).replace(".",",")
return null!=n&&0!=o?null!=i&&o<0?i.replace("$",s):n.replace("$",s):null!=r&&0==o?r.replace("$",s):s}function _(e,n,r,i){if(""===e||null==e)return""
var o=t.WUtil.toNumber(e),s=(""+o).replace(".",",")
return null!=n&&0!=o?null!=i&&o<0?"l"==i?o.toLocaleString("it-IT"):i.replace("$",s):"l"==n?o.toLocaleString("it-IT"):n.replace("$",s):null!=r&&0==o?r.replace("$",s):s}function C(e,n,r,i){if(""===e||null==e)return""
var o=t.WUtil.toNumber(e),s=(Math.round(100*o)/100).toLocaleString("it-IT"),a=s.indexOf(",")
return a<0&&(s+=",00"),a==s.length-2&&(s+="0"),null!=n&&0!=o?null!=i&&o<0?i.replace("$",s):n.replace("$",s):null!=r&&0==o?r.replace("$",s):s}function w(e,n,r,i){if(""===e||null==e)return""
var o=t.WUtil.toNumber(e),s=(""+Math.round(1e5*o)/1e5).replace(".",","),a=s.indexOf(",")
if(a<0&&(s+=",00"),a==s.length-2&&(s+="0"),a>0){for(var l=s.substring(0,a),h=s.substring(a),u="",p=1;p<=l.length;p++)p>3&&(p-1)%3==0&&(u="."+u),u=l.charAt(l.length-p)+u
s=u+h}return null!=n&&0!=o?null!=i&&o<0?i.replace("$",s):n.replace("$",s):null!=r&&0==o?r.replace("$",s):s}function x(t){return null==t?"":t?"S":"N"}function S(e){if(null==e)return""
if("string"==typeof e)return e
if("boolean"==typeof e)return t.formatBoolean(e)
if("number"==typeof e){return(""+e).indexOf(".")>=0?t.formatCurr(e):t.formatNum(e)}if(e instanceof Date)return t.formatDate(e)
if(e instanceof t.WComponent){if(e instanceof t.WCheck)return e.checked?e.text:""
if("select"==e.rootTag){var n=e.getProps()
if(Array.isArray(n)&&n.length>1){for(var r="",i=0,o=n;i<o.length;i++){var s=o[i],a=""+s
if(a)if(a.length>9){var l=a.indexOf(" -")
l>0&&(a=a.substring(0,l).trim()),r+=","+a}else r+=","+a}return r.length&&(r=r.substring(1)),r}var a=""+e.getProps()
return a||(a=e.getState()),t.format(a)}return t.format(e.getState())}return""+e}function O(t,e){switch(t){case 0:return e?"Domenica":"Dom"
case 1:return e?"Luned&igrave;":"Lun"
case 2:return e?"Marted&igrave;":"Mar"
case 3:return e?"Mercoled&igrave;":"Mer"
case 4:return e?"Giove&igrave;":"Gio"
case 5:return e?"Venerd&igrave;":"Ven"
case 6:return e?"Sabato":"Sab"}return""}function T(t,e,n){switch(t>100&&(n=Math.floor(t/100),t%=100),n=n?" "+n:"",t){case 1:return e?"Gennaio"+n:"Gen"+n
case 2:return e?"Febbraio"+n:"Feb"+n
case 3:return e?"Marzo"+n:"Mar"+n
case 4:return e?"Aprile"+n:"Apr"+n
case 5:return e?"Maggio"+n:"Mag"+n
case 6:return e?"Giugno"+n:"Giu"+n
case 7:return e?"Luglio"+n:"Lug"+n
case 8:return e?"Agosto"+n:"Ago"+n
case 9:return e?"Settembre"+n:"Set"+n
case 10:return e?"Ottobre"+n:"Ott"+n
case 11:return e?"Novembre"+n:"Nov"+n
case 12:return e?"Dicembre"+n:"Dic"+n}return""}function I(e){if(!e)return 0
if("number"==typeof e)return e>0&&e<13?e:0
var n=(""+e).toLowerCase()
if(n.length>3&&(n=n.substring(0,3)),"gen"==n)return 1
if("feb"==n)return 2
if("mar"==n)return 3
if("apr"==n)return 4
if("mag"==n)return 5
if("giu"==n)return 6
if("lug"==n)return 7
if("ago"==n)return 8
if("set"==n)return 9
if("ott"==n)return 10
if("nov"==n)return 11
if("dic"==n)return 12
var r=t.WUtil.toInt(n)
return r>0&&r<13?r:0}function W(t){return t?(t=""+t,t=t.replace("À","A'").replace("È","E'").replace("Ì","I'").replace("Ò","O'").replace("Ù","U'"),t=t.replace("à","a'").replace("è","e'").replace("ì","i'").replace("ò","o'").replace("ù","u'"),t=t.replace("á","a`").replace("é","e`").replace("í","i`").replace("ó","o`").replace("ú","u`"),t=t.replace("€","E").replace("ª","a").replace("°","o")):""}function R(t){return t?(t=""+t,t=t.replace("A'","À").replace("E'","È").replace("I'","Ì").replace("O'","Ò").replace("U'","Ù"),t=t.replace("a'","à").replace("e'","è").replace("i'","ì").replace("o'","ò").replace("u'","ù"),t=t.replace("a`","á").replace("e`","é").replace("i`","í").replace("o`","ó").replace("u`","ú"),t=t.replace(" pò"," po'")):""}function D(t){return t?(t=""+t,t=t.replace("&Agrave;","A'").replace("&Egrave;","E'").replace("&Igrave;","I'").replace("&Ograve;","O'").replace("&Ugrave;","U'"),t=t.replace("&agrave;","a'").replace("&egrave;","e'").replace("&igrave;","i'").replace("&ograve;","o'").replace("&ugrave;","u'"),t=t.replace("&aacute;","a`").replace("&eacute;","e`").replace("&iacute;","i`").replace("&oacute;","o`").replace("&uacute;","u`"),t=t.replace("&euro;","E").replace("&nbsp;"," ").replace("&amp;","&").replace("&gt;",">").replace("&lt;","<").replace("&quot;",'"')):""}function A(t){if(!t)return""
for(var e=""+t,n="",r=0,i=0;i<e.length;i++){r=r>=N.length-1?0:r+1
var o=e.charCodeAt(i),s=N.charCodeAt(r),a=o
o>=32&&o<=126&&(a-=s)<32&&(a=127+a-32),n+=String.fromCharCode(a)}return n}function E(t){if(!t)return""
for(var e=""+t,n="",r=0,i=0;i<e.length;i++){r=r>=N.length-1?0:r+1
var o=e.charCodeAt(i),s=N.charCodeAt(r),a=o
o>=32&&o<=126&&(a+=s)>126&&(a=31+a-126),n+=String.fromCharCode(a)}return n}var k={},L={}
t.global={locale:"it",main_class:"container-fluid",con_class:"container",box_class:"ibox",box_header:"ibox-title",box_title:"<h5>$</h5>",box_tools:"ibox-tools",box_content:"ibox-content",box_footer:"ibox-footer",chart_bg0:"rgba(26,179,148,0.5)",chart_bg1:"rgba(220,220,220,0.5)",chart_bg2:"rgba(160,220,255,0.5)",chart_bc0:"rgba(26,179,148,0.7)",chart_bc1:"rgba(220,220,220,0.7)",chart_bc2:"rgba(160,220,255,0.7)",chart_p0:"rgba(26,179,148,1)",chart_p1:"rgba(220,220,220,1)",chart_p2:"rgba(160,220,255,1)",area:{b:"-radius:8px",m:"0px 0px 0px 0px",p:"16px 7px 5px 7px",bg:"white"},area_title:{b:"none",f:14,fw:"bold",w:"unset",ps:"relative",t:12,l:0,m:0},section:{b:"#e7eaec",m:"2px 0px 4px 0px",p:"8px 8px 8px 8px",bg:"#fafafa"},section_title:{b:"none",f:16,fw:"600",w:"unset",m:"-bottom:2px",tt:"uppercase"},window_top:{ps:"fixed",t:0,bg:"#ffffff",ml:-10,p:"0 10px",z:1001},window_bottom:{ps:"fixed",bt:0,bg:"#ffffff",ml:-10,p:"0 10px",z:1001},init:function(e){t.debug&&console.log("[WUX] global.init..."),t.debug&&console.log("[WUX] global.init completed"),e&&e()},setData:function(t,e,n){if(void 0===n&&(n=!1),t||(t="global"),k[t]=e,!n&&L[t])for(var r=0,i=L[t];r<i.length;r++){var o=i[r]
o(e)}},getData:function(t,e){t||(t="global")
var n=k[t]
return null==n?e:n},onDataChanged:function(t,e){t||(t="global"),L[t]||(L[t]=[]),L[t].push(e)}},t.showMessage=e,t.showInfo=n,t.showSuccess=r,t.showWarning=i,t.showError=o,t.confirm=s,t.getInput=a,t.getPageTitle=l,t.getBreadcrump=h,t.getPageHeader=u,t.getPageFooter=p,t.getPageMenu=c,t.getViewRoot=d,t.sticky=f,t.stickyRefresh=g,t.formatDate=b,t.formatDateTime=y,t.formatTime=m,t.formatNum2=v,t.formatNum=_,t.formatCurr=C,t.formatCurr5=w,t.formatBoolean=x,t.format=S,t.formatDay=O,t.formatMonth=T,t.decodeMonth=I,t.norm=W,t.den=R,t.text=D
var N="@D:=E?('B;F)<=A>C@?):D';@=B<?C;)E:'@=?A(B<=;(?@>E:"
t.encrypt=A,t.decrypt=E
!function(t){t.PRIMARY="btn btn-primary",t.SECONDARY="btn btn-secondary",t.SUCCESS="btn btn-success",t.DANGER="btn btn-danger",t.WARNING="btn btn-warning",t.INFO="btn btn-info",t.LIGHT="btn btn-light",t.DARK="btn btn-dark",t.LINK="btn btn-link",t.WHITE="btn btn-white",t.SM_PRIMARY="btn btn-sm btn-primary btn-block",t.SM_DEFAULT="btn btn-sm btn-default btn-block",t.SM_SECONDARY="btn btn-sm btn-secondary btn-block",t.SM_INFO="btn btn-sm btn-info btn-block",t.SM_DANGER="btn btn-sm btn-danger btn-block",t.SM_WHITE="btn btn-sm btn-white btn-block",t.ACT_PRIMARY="btn btn-sm btn-primary",t.ACT_DEFAULT="btn btn-sm btn-default",t.ACT_SECONDARY="btn btn-sm btn-secondary",t.ACT_INFO="btn btn-sm btn-info",t.ACT_DANGER="btn btn-sm btn-danger",t.ACT_WHITE="btn btn-sm btn-white",t.ACT_OUTLINE_PRIMARY="btn btn-sm btn-primary btn-outline",t.ACT_OUTLINE_DEFAULT="btn btn-sm btn-default btn-outline",t.ACT_OUTLINE_INFO="btn btn-sm btn-info btn-outline",t.ACT_OUTLINE_DANGER="btn btn-sm btn-danger btn-outline"}(t.BTN||(t.BTN={}))
var M=function(){function t(){}return t.NORMAL={bg:"#ffffff"},t.ERROR={bg:"#fce6e8"},t.WARNING={bg:"#fef3e6"},t.SUCCESS={bg:"#d1f0ea"},t.INFO={bg:"#ddedf6"},t.COMPLETED={bg:"#eeeeee"},t.MARKED={bg:"#fff0be"},t.BTN_MED={w:110,f:12,a:"left"},t.BTN_SMALL={w:90,f:12,a:"left"},t.STACK_BTNS={pt:2,pb:2,a:"center"},t.LINE_BTNS={pl:2,pr:2,a:"center"},t.FORM_CTRL="form-control",t.FORM_CTRL_SM="form-control input-sm",t.FIELD_REQUIRED={c:"#676a96"},t.FIELD_CRITICAL={c:"#aa6a6c"},t.FIELD_INTERNAL={c:"#aa6a6c"},t.LABEL_NOTICE={c:"#aa6a6c",fw:"bold"},t.LABEL_INFO={c:"#676a96",fw:"bold"},t}()
t.CSS=M
!function(t){t.LARGE="fa-lg ",t.ADDRESS_CARD="fa-address-card",t.ANGLE_DOUBLE_LEFT="fa-angle-double-left",t.ANGLE_DOUBLE_RIGHT="fa-angle-double-right",t.ANGLE_LEFT="fa-angle-left",t.ANGLE_RIGHT="fa-angle-right",t.ARROW_CIRCLE_DOWN="fa-arrow-circle-down",t.ARROW_CIRCLE_LEFT="fa-arrow-circle-left",t.ARROW_CIRCLE_O_DOWN="fa-arrow-circle-o-down",t.ARROW_CIRCLE_O_LEFT="fa-arrow-circle-o-left",t.ARROW_CIRCLE_O_RIGHT="fa-arrow-circle-o-right",t.ARROW_CIRCLE_O_UP="fa-arrow-circle-o-up",t.ARROW_CIRCLE_RIGHT="fa-arrow-circle-right",t.ARROW_CIRCLE_UP="fa-arrow-circle-up",t.ARROW_DOWN="fa-arrow-down",t.ARROW_LEFT="fa-arrow-left",t.ARROW_RIGHT="fa-arrow-right",t.ARROW_UP="fa-arrow-up",t.BOLT="fa-bolt",t.BACKWARD="fa-backward",t.BOOKMARK="fa-bookmark",t.BOOKMARK_O="fa-bookmark-o",t.CALENDAR="fa-calendar",t.CALCULATOR="fa-calculator",t.CHAIN="fa-chain",t.CHAIN_BROKEN="fa-chain-broken",t.CHECK="fa-check",t.CHECK_CIRCLE="fa-check-circle",t.CHECK_CIRCLE_O="fa-check-circle-o",t.CHECK_SQUARE="fa-check-square",t.CHECK_SQUARE_O="fa-check-square-o",t.CHEVRON_DOWN="fa-chevron-down",t.CHEVRON_UP="fa-chevron-up",t.CLOCK_O="fa-clock-o",t.CLOSE="fa-close",t.COG="fa-cog",t.COMMENT="fa-comment",t.COMMENTS_O="fa-comments-o",t.COPY="fa-copy",t.CUT="fa-cut",t.DATABASE="fa-database",t.EDIT="fa-edit",t.ENVELOPE_O="fa-envelope-o",t.EXCHANGE="fa-exchange",t.FILE="fa-file",t.FILE_O="fa-file-o",t.FILE_CODE_O="fa-file-code-o",t.FILE_PDF_O="fa-file-pdf-o",t.FILE_TEXT_O="fa-file-text-o",t.FILES="fa-files-o",t.FILTER="fa-filter",t.FOLDER="fa-folder",t.FOLDER_O="fa-folder-o",t.FOLDER_OPEN="fa-folder-open",t.FOLDER_OPEN_O="fa-folder-open-o",t.FORWARD="fa-forward",t.GRADUATION_CAP="fa-graduation-cap",t.INFO_CIRCLE="fa-info-circle",t.LIFE_RING="fa-life-ring",t.LINK="fa-link",t.LEGAL="fa-legal",t.LIST="fa-list",t.MINUS="fa-minus",t.MINUS_SQUARE_O="fa-minus-square-o",t.PASTE="fa-paste",t.PENCIL="fa-pencil",t.PIE_CHART="fa-pie-chart",t.PLUS="fa-plus",t.PLUS_SQUARE_O="fa-plus-square-o",t.PRINT="fa-print",t.QUESTION_CIRCLE="fa-question-circle",t.RANDOM="fa-random",t.RECYCLE="fa-recycle",t.REFRESH="fa-refresh",t.SEARCH="fa-search",t.SEARCH_MINUS="fa-search-minus",t.SEARCH_PLUS="fa-search-plus",t.SEND="fa-send",t.SHARE_SQUARE_O="fa-share-square-o",t.SHOPPING_CART="fa-shopping-cart",t.SIGN_IN="fa-sign-in",t.SIGN_OUT="fa-sign-out",t.SQUARE="fa-square",t.SQUARE_O="fa-square-o",t.TH_LIST="fa-th-list",t.THUMBS_O_DOWN="fa-thumbs-o-down",t.THUMBS_O_UP="fa-thumbs-o-up",t.TIMES="fa-times",t.TIMES_CIRCLE="fa-times-circle",t.TOGGLE_OFF="fa-toggle-off",t.TOGGLE_ON="fa-toggle-on",t.TRASH="fa-trash",t.TRUCK="fa-truck",t.UNDO="fa-undo",t.UPLOAD="fa-upload",t.USER="fa-user",t.USER_O="fa-user-o",t.USERS="fa-users",t.WARNING="fa-warning",t.WIFI="fa-wifi",t.WRENCH="fa-wrench"}(t.WIcon||(t.WIcon={}))
var U=function(){function t(){}return t.OK="OK",t.CLOSE="Chiudi",t.CANCEL="Annulla",t.ERR_DATE="Data non ammessa.",t}()
t.RES=U}(WUX||(WUX={}))
var WUX
!function(t){var e=function(e){function n(n,r,i,o,s,a,l){var h=e.call(this,n,"WContainer",a,r,t.style(i),o)||this
return h.inline=!1,h.components=[],h.inline=s,l&&(h._classStyle=h._classStyle?h._classStyle+" "+l:l),h.rootTag=s?"span":"div","aside"==a&&(h.rootTag="aside"),h}return __extends(n,e),n.create=function(t){if(!t)return new n
var e=t.type?"<"+t.type+">":"",r=new n(t.id,t.classStyle,t.style,t.attributes,!1,e)
return r.wrapper=t.wrapper,r},n.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.stateComp&&this.stateComp.setState(this.state)},n.prototype.getState=function(){return this.stateComp&&(this.state=this.stateComp.getState()),this.state},n.prototype.on=function(t,n){return e.prototype.on.call(this,t,n),"statechange"==t&&this.stateComp&&this.stateComp.on("statechange",n),this},n.prototype.off=function(t){return e.prototype.off.call(this,t),"statechange"==t&&this.stateComp&&this.stateComp.off("statechange"),this},n.prototype.trigger=function(t){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i]
return e.prototype.trigger.apply(this,__spreadArrays([t],r)),"statechange"==t&&this.stateComp&&(n=this.stateComp).trigger.apply(n,__spreadArrays(["statechange"],r)),this},n.prototype.setLayout=function(t){this.layoutManager=t},n.prototype.section=function(e,n,r){return this.legend=e,this.fieldsetStyle=n?t.css(t.global.section,n):t.global.section,this.legendStyle=r?t.css(t.global.section_title,r):t.global.section_title,this},n.prototype.area=function(e,n,r){return this.legend=e,this.fieldsetStyle=n?t.css(t.global.area,n):t.global.area,this.legendStyle=r?t.css(t.global.area_title,r):t.global.area_title,this},n.prototype.end=function(){return this.parent instanceof n?this.parent.end():this},n.prototype.grid=function(){return"row"==this.props&&this.parent instanceof n?this.parent:this.parent instanceof n?this.parent.grid():this},n.prototype.row=function(){if("row"==this.props)return this
if(!this.parent){if(!this.components||!this.components.length)return this
for(var t=this.components.length-1;t>=0;t--){var e=this.components[t]
if(e instanceof n&&"row"==e.getProps())return e}return this}return this.parent instanceof n?this.parent.row():this},n.prototype.col=function(){return"col"==this.props?this:this.parent instanceof n?this.parent.col():this},n.prototype.addDiv=function(e,n,r,i){if("number"==typeof e){if(e<1)return this
var o=t.build("div",n,{h:e,n:r})
return this.add($(o))}var o=t.build("div",n,e,r,i)
return this.add($(o))},n.prototype.addSpan=function(e,n,r,i){if("number"==typeof e){var o=t.build("span",n,{w:e,d:"inline-block",a:"center",n:r})
return this.add($(o))}var o=t.build("span",n,e,r,i)
return this.add($(o))},n.prototype.addGroup=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]
if(t){var r=this.addContainer(t)
if(!e||!e.length)return this
for(var i=0,o=e;i<o.length;i++){var s=o[i]
r.add(s)}return this}if(!e||!e.length)return this
for(var a=0,l=e;a<l.length;a++){var s=l[a]
this.add(s)}return this},n.prototype.add=function(e,n){if(!e)return this
e instanceof t.WComponent&&(e.parent||(e.parent=this))
var r
return"string"==typeof e&&e.length>0&&"<"==e.charAt(0)&&">"==e.charAt(e.length-1)&&(r=$(e)),r||(r=e),this.components.push(r),this.layoutManager&&this.layoutManager.addLayoutComponent(r,n),this},n.prototype.remove=function(t){if(t<0&&(t=this.components.length+t),!(t<0||t>=this.components.length)){var e=this.components.splice(t,1)
return this.layoutManager&&e.length&&this.layoutManager.removeLayoutComponent(e[0]),this}},n.prototype.removeAll=function(){if(this.layoutManager)for(var e=0,n=this.components;e<n.length;e++){var r=n[e]
this.layoutManager.removeLayoutComponent(r)}if(this.mounted){this.parent=null
for(var i=0,o=this.components;i<o.length;i++){var s=o[i]
s instanceof t.WComponent&&s.unmount()}}return this.components=[],this},n.prototype.addRow=function(t,e,r,i){var o=null==t?"row":t,s=new n(r,o,e,i,!1,"row")
return s.name=s.name+"_row",this.grid().addContainer(s)},n.prototype.addCol=function(e,r,i,o){t.WUtil.isNumeric(e)&&(e="col-md-"+e)
var s=null==e?"col":e,a=new n(i,s,r,o,!1,"col")
return a.name=a.name+"_col",this.row().addContainer(a)},n.prototype.addASide=function(t,e,r,i){var o=new n(r,t,e,i,!1,"aside")
return o.name=o.name+"_aside",this.end().addContainer(o)},n.prototype.addBox=function(t,e,n,i,o){var s=new r(i,t,e,n,o)
return this.addContainer(s),s},n.prototype.addText=function(e,n,r,i,o,s){if(!e||!e.length)return this
var a=""
if(n){var l=n.indexOf(" ")
a=l>0?n.substring(0,l):n}for(var h="",u=0,p=e;u<p.length;u++){var c=p[u]
if(c&&c.length>3){var d=c.substring(0,3)
if("<ul"==d||"<ol"==d||"<li"==d||"<di"==d){h+=c
continue}}h+=n&&"br"!=n?"<"+n+">"+c+"</"+a+">":c+"<br>"}return r||i||o||s?this.add(t.build("div",h,i,s,o,r)):this.add(h),this},n.prototype.findBox=function(t){var e=""
t&&t.length>1&&"#"==t.charAt(0)&&(e=t.substring(1))
for(var i=0,o=this.components;i<o.length;i++){var s=o[i]
if(s instanceof r)if(e){if(s.id==e)return s}else{if(!t)return s
if(s.title==t||s.id==t)return s}else if(s instanceof n){var a=s.findBox(t)
if(!a)return a}}return null},n.prototype.addStack=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i]
if(!r||0==r.length)return this
for(var o=t.style(e),s=t.cls(e),a=0;a<r.length;a++){var l=new n(this.subId(),s,o).add(r[a])
l.name=l.name+"_stack_"+a,this.addContainer(l)}return this},n.prototype.addLine=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i]
if(!r||0==r.length)return this
for(var o=t.style(e),s=t.cls(e),a=0;a<r.length;a++){var l=r[a],h=this.subId(),u=void 0
u=s||o?s?new n(h,s,null,null,!0).add(l):new n(h,"",o,null,!0).add(l):new n(h,"",null,null,!0).add(l),u.name=u.name+"_line_"+a,this.addContainer(u)}return this},n.prototype.addContainer=function(e,r,i,o,s,a){if(e instanceof n)return null==this._classStyle&&e._classStyle&&0==e._classStyle.indexOf("row")&&(this.parent instanceof n?this._classStyle=t.global.con_class:this._classStyle=t.global.main_class),e.parent=this,e.layoutManager||(e.layoutManager=this.layoutManager),this.components.push(e),this.layoutManager&&this.layoutManager.addLayoutComponent(e,r),e
if("string"==typeof e){var l=new n(e,r,i,o,s,a)
return l.layoutManager||(l.layoutManager=this.layoutManager),this.components.push(l),this.layoutManager&&this.layoutManager.addLayoutComponent(l),l}if(!e)return this
var h=n.create(e)
return h.parent=this,h.layoutManager=this.layoutManager,this.components.push(h),this.layoutManager&&this.layoutManager.addLayoutComponent(h,r),h},n.prototype.render=function(){return this.parent||this._classStyle||this._style?this.build(this.rootTag):this.buildRoot(this.rootTag)},n.prototype.make=function(){if(null==this.legend)return""
var e=this.fieldsetStyle?' style="'+t.style(this.fieldsetStyle)+'"':"",n=this.legendStyle?' style="'+t.style(this.legendStyle)+'"':""
return'<fieldset id="'+this.subId("fs")+'"'+e+"><legend"+n+">"+this.legend+"</legend></fieldset>"},n.prototype.componentDidMount=function(){var e=this.root
if(null!=this.legend){var n=$("#"+this.subId("fs"))
n&&n.length&&(e=n)}if(this.wrapper&&(e=t.addWrapper(e,this.wrapper)),this.layoutManager)return void this.layoutManager.layoutContainer(this,e)
for(var r=0,i=this.components;r<i.length;r++){var o=i[r]
o instanceof t.WComponent?o.mount(e):e.append(o)}},n.prototype.componentWillUnmount=function(){for(var e=0,n=this.components;e<n.length;e++){var r=n[e]
r instanceof t.WComponent&&r.unmount()}},n.prototype.rebuild=function(){var e=this.root
if(null!=this.legend){var n=$("#"+this.subId("fs"))
n&&n.length&&(e=n)}if(e.empty(),this.wrapper&&(e=t.addWrapper(e,this.wrapper)),this.layoutManager)return void this.layoutManager.layoutContainer(this,e)
for(var r=0,i=this.components;r<i.length;r++){var o=i[r]
o instanceof t.WComponent?o.mount(e):e.append(o)}return this},n}(t.WComponent)
t.WContainer=e
var n=function(){function e(){this.mapConstraints={},this.mapComponents={}}return e.prototype.addLayoutComponent=function(e,n){if(e&&n){var r=t.getId(e)
r&&(this.mapConstraints[r]=n,this.mapComponents[n]=e)}},e.prototype.removeLayoutComponent=function(e){var n=t.getId(e)
if(n){var r=this.mapConstraints[n]
delete this.mapConstraints[n],r&&delete this.mapComponents[r]}},e.prototype.layoutContainer=function(e,n){for(var r=t.getId(this.currComp),i=0,o=e.components;i<o.length;i++){var s=o[i],a=t.getId(s),l=!1
a&&a!=r&&this.mapConstraints[a]&&(l=!0),s instanceof t.WComponent?(l&&(s.visible=!1),s.mount(n)):s instanceof jQuery&&l&&s.hide()}},e.prototype.show=function(e,n){var r=this.mapComponents[n]
r&&(this.currComp instanceof t.WComponent?this.currComp.visible=!1:this.currComp instanceof jQuery&&this.currComp.show(),r instanceof t.WComponent?(r.visible=!0,this.currComp=r):this.currComp instanceof jQuery?(r.show(),this.currComp=r):this.currComp=void 0)},e}()
t.WCardLayout=n
var r=function(n){function r(e,r,i,o,s){var a=n.call(this,e,t.global.box_class,o,s,!1,"box")||this
return a.TOOL_COLLAPSE="collapse-link",a.TOOL_CLOSE="close-link",a.TOOL_FILTER="filter-link",a.name="WBox",a._addClassStyle=i,a.title=r,a}return __extends(r,n),Object.defineProperty(r.prototype,"title",{get:function(){return this._title},set:function(e){this._title&&this.header.remove(0),this._title=e,e&&("<"!=e.charAt(0)&&t.global.box_title?this.header.add(t.global.box_title.replace("$",e)):this.header.add(e))},enumerable:!0,configurable:!0}),r.prototype.addTool=function(n,r,i,o){var s=this
if(!n)return this
if("string"==typeof n){r||(r=t.WIcon.WRENCH),this.cntls||(this.cntls=new e("",t.global.box_tools),this.header.add(this.cntls),this.tools={})
var a=$('<a class="'+n+'">'+t.buildIcon(r)+"</a>")
this.cntls.add(a),this.tools[n]=a,o?n==this.TOOL_COLLAPSE?this.handlers["_"+this.TOOL_COLLAPSE]=[function(t){s.collapse(o)}]:this.handlers["_"+n]=[o]:(n==this.TOOL_COLLAPSE&&(this.handlers["_"+this.TOOL_COLLAPSE]=[function(t){s.collapse()}]),n==this.TOOL_CLOSE&&(this.handlers["_"+this.TOOL_CLOSE]=[function(t){s.close()}]))}else this.header.add(n)
return this},r.prototype.addCollapse=function(e){return this.addTool(this.TOOL_COLLAPSE,t.WIcon.CHEVRON_UP,"",e),this},r.prototype.addClose=function(e){return this.addTool(this.TOOL_CLOSE,t.WIcon.TIMES,"",e),this},r.prototype.addFilter=function(e){return this.addTool(this.TOOL_FILTER,t.WIcon.FILTER,"",e),this},Object.defineProperty(r.prototype,"header",{get:function(){return this._header?this._header:this._header=new e("",t.cls(t.global.box_header,this._addClassStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"footer",{get:function(){return this._footer?this._footer:this._footer=new e("",t.cls(t.global.box_footer,this._addClassStyle))},enumerable:!0,configurable:!0}),r.prototype.componentDidMount=function(){this._header&&this._header.mount(this.root)
var e=$(this.build("div","","",t.cls(t.global.box_content,this._addClassStyle),void 0,null))
this.root.append(e)
for(var n=0,r=this.components;n<r.length;n++){var i=r[n]
i instanceof t.WComponent?i.mount(e):e.append(i)}if(this._footer&&this._footer.mount(this.root),this.tools)for(var o in this.tools){var s=this.handlers["_"+o]
if(s&&s.length)for(var a=0,l=s;a<l.length;a++){var h=l[a]
this.tools[o].click(h)}}},r.prototype.componentWillUnmount=function(){n.prototype.componentWillUnmount.call(this),this._header&&this._header.unmount(),this._footer&&this._footer.unmount()},r.prototype.end=function(){return this.parent instanceof e?this.parent:this},r.prototype.addRow=function(t,n,r,i){var o=null==t?"row":t,s=new e(r,o,n,i,!1,"row")
return s.name=s.name+"_row",this.content.addContainer(s)},r.prototype.collapse=function(e){if(!this.root)return this
if(e){e(this.createEvent("_"+this.TOOL_COLLAPSE,{collapsed:this.isCollapsed()}))}this.tools&&this.tools[this.TOOL_COLLAPSE]&&this.tools[this.TOOL_COLLAPSE].find("i").toggleClass(t.WIcon.CHEVRON_UP).toggleClass(t.WIcon.CHEVRON_DOWN)
var n=this.root
return n.children(".ibox-content").slideToggle(200),n.toggleClass("").toggleClass("border-bottom"),setTimeout(function(){n.resize(),n.find("[id^=map-]").resize()},50),this},r.prototype.expand=function(t){return this.isCollapsed()&&this.collapse(t),this},r.prototype.isCollapsed=function(){return!!this.root&&this.tools[this.TOOL_COLLAPSE].find("i").hasClass(t.WIcon.CHEVRON_DOWN)},r.prototype.close=function(){if(!this.root)return this
this.root.remove()},r}(e)
t.WBox=r
var i=function(n){function r(e,r,i,o,s,a,l){void 0===r&&(r="WDialog"),void 0===i&&(i=!0),void 0===o&&(o=!0)
var h=n.call(this,e,r,void 0,s,a,l)||this
return h.buttons=[],h.tagTitle="h3",o&&(i||(h.txtCancel=t.RES.CLOSE),h.buttonCancel()),i&&h.buttonOk(),h.ok=!1,h.cancel=!1,h.isShown=!1,h.id&&"*"!=h.id&&$("#"+h.id).length&&$("#"+h.id).remove(),WuxDOM.onRender(function(t){h.mounted||h.mount(t.element)}),h}return __extends(r,n),r.prototype.onShownModal=function(t){this.on("shown.bs.modal",t)},r.prototype.onHiddenModal=function(t){this.on("hidden.bs.modal",t)},Object.defineProperty(r.prototype,"header",{get:function(){return this.cntHeader?this.cntHeader:(this.cntHeader=new e("","modal-header"),this.btnCloseHeader=new h(this.subId("bhc"),'<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>',void 0,"close","",'data-dismiss="modal"'),this.cntHeader.add(this.btnCloseHeader),this.cntHeader)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"body",{get:function(){return this.cntBody?this.cntBody:(this.cntBody=new e("",t.cls("modal-body",this._classStyle),"",this._attributes),this.cntBody)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"footer",{get:function(){return this.cntFooter?this.cntFooter:(this.cntFooter=new e("","modal-footer"),this.cntFooter)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.cntHeader?(this._title=t,this.cntHeader.getRoot().children(this.tagTitle+":first").text(t)):(this._title=t,this.header.add(this.buildTitle(t)))},enumerable:!0,configurable:!0}),r.prototype.onClickOk=function(){return!0},r.prototype.onClickCancel=function(){return!0},r.prototype.buildBtnOK=function(){return new h(this.subId("bfo"),t.RES.OK,"",t.BTN.INFO+" button-sm","","")},r.prototype.buildBtnCancel=function(){return this.txtCancel?new h(this.subId("bfc"),this.txtCancel,"",t.BTN.SECONDARY+" button-sm","",""):new h(this.subId("bfc"),t.RES.CANCEL,"",t.BTN.SECONDARY+" button-sm","","")},r.prototype.buttonOk=function(){var t=this
if(this.btnOK)return this.btnOK
this.btnOK=this.buildBtnOK(),this.btnOK.on("click",function(e){t.onClickOk()&&(t.ok=!0,t.cancel=!1,t.root.modal("hide"))}),this.buttons.push(this.btnOK)},r.prototype.buttonCancel=function(){var t=this
if(this.btnCancel)return this.btnCancel
this.btnCancel=this.buildBtnCancel(),this.btnCancel.on("click",function(e){t.onClickCancel()&&(t.ok=!1,t.cancel=!0,t.root.modal("hide"))}),this.buttons.push(this.btnCancel)},r.prototype.show=function(t,e){this.beforeShow()&&(this.ok=!1,this.cancel=!1,this.parent=t,this.parentHandler=e,this.mounted||WuxDOM.mount(this),this.root&&this.root.length&&this.root.modal({backdrop:"static",keyboard:!1}))},r.prototype.hide=function(){this.root&&this.root.length&&this.root.modal("hide")},r.prototype.close=function(){this.ok=!1,this.cancel=!1,this.root&&this.root.length&&this.root.modal("hide")},r.prototype.selection=function(e,n){if(!e)return!1
var r=e.getSelectedRows()
if(!r||!r.length)return n&&t.showWarning(n),!1
var i=e.getSelectedRowsData()
if(!i||!i.length)return n&&t.showWarning(n),!1
if(null==this.props||"number"==typeof this.props){var o=r[0]
this.setProps(o)}return this.setState(i[0]),!0},r.prototype.beforeShow=function(){return!0},r.prototype.onShown=function(){},r.prototype.onHidden=function(){},r.prototype.render=function(){this.isShown=!1,this.cntRoot=new e(this.id,"modal inmodal fade","",'role="dialog" aria-hidden="true"'),this.cntMain=this.cntRoot.addContainer("","modal-dialog modal-lg",this._style),this.cntContent=this.cntMain.addContainer("","modal-content"),this.cntHeader&&this.cntContent.addContainer(this.cntHeader),this.cntBody&&this.cntContent.addContainer(this.cntBody)
for(var t=0,n=this.buttons;t<n.length;t++){var r=n[t]
this.footer.add(r)}return this.cntFooter&&this.cntContent.addContainer(this.cntFooter),this.cntRoot},r.prototype.componentDidMount=function(){var t=this
this.root.on("shown.bs.modal",function(e){t.isShown=!0,t.onShown()}),this.root.on("hidden.bs.modal",function(e){t.isShown=!1,t.onHidden(),t.parentHandler&&(t.parentHandler(e),t.parentHandler=null)})},r.prototype.componentWillUnmount=function(){this.isShown=!1,this.btnCloseHeader&&this.btnCloseHeader.unmount(),this.btnCancel&&this.btnCancel.unmount(),this.cntFooter&&this.cntFooter.unmount(),this.cntBody&&this.cntBody.unmount(),this.cntHeader&&this.cntHeader.unmount(),this.cntContent&&this.cntContent.unmount(),this.cntMain&&this.cntMain.unmount(),this.cntRoot&&this.cntRoot.unmount()},r.prototype.buildTitle=function(e){return this.tagTitle||(this.tagTitle="h3"),"<"+this.tagTitle+">"+t.WUtil.toText(e)+"</"+this.tagTitle+">"},r}(t.WComponent)
t.WDialog=i
var o=function(e){function n(t,n,r,i,o,s){var a=e.call(this,t,"WLabel",r,i,o,s)||this
return a.rootTag="span",a.updateState(n),a}return __extends(n,e),Object.defineProperty(n.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!0,configurable:!0}),n.prototype.updateState=function(n){n||(n=""),e.prototype.updateState.call(this,n),this.root&&this.root.html(t.buildIcon(this.props,""," ")+n)},n.prototype.for=function(e){return this.forId=t.getId(e),this},n.prototype.blink=function(t){return this.root&&this.root.length?(this.blinks=t||3,this.highlight(),this):this},n.prototype.highlight=function(){return this.root&&this.root.length?(this.blinks&&(this.blinks--,this.root.effect("highlight",{},600,this.highlight.bind(this))),this):this},n.prototype.render=function(){var e=this.state?this.state:""
return this.forId?this.buildRoot("label",t.buildIcon(this.props,""," ")+e,'for="'+this.forId+'"',this._classStyle):this.buildRoot(this.rootTag,t.buildIcon(this.props,""," ")+e,null,this._classStyle)},n.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},n}(t.WComponent)
t.WLabel=o
var s=function(e){function n(t,n,r,i,o,s){var a=e.call(this,t||"*","WInput",n,i,o,s)||this
return a.rootTag="input",a.size=r,a.valueType="s",a.blurOnEnter=!1,a}return __extends(n,e),n.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.root&&this.root.val(t)},n.prototype.onEnterPressed=function(t){this.handlers._enter||(this.handlers._enter=[]),this.handlers._enter.push(t)},n.prototype.render=function(){var t=""
if(this.label){t=this.id?'<label for="'+this.id+'">':"<label>"
var e=this.label.lastIndexOf("<br")
e>0?(t+=this.label.substring(0,e).replace("<","&lt;").replace(">","&gt;"),t+="</label><br>"):(t+=this.label.replace("<","&lt;").replace(">","&gt;"),t+="</label> ")}if("static"==this.props)return t+this.build("span",this.state)
var n='name="'+this.id+'"'
return n+=this.props?' type="'+this.props+'"':' type="text"',this.size&&(n+=' size="'+this.size+'"'),this.state&&(n+=' value="'+this.state+'"'),this.placeHolder&&(n+=' placeholder="'+this.placeHolder+'"'),t+this.build(this.rootTag,"",n)},n.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)
var e=this
this.root.keypress(function(n){if(13==n.which){var r=this.value
"c"==e.valueType?this.value&&(this.value=t.formatCurr(t.WUtil.toNumber(this.value))):"c5"==e.valueType?this.value&&(this.value=t.formatCurr5(t.WUtil.toNumber(this.value))):"n"==e.valueType||"p"==e.valueType?this.value&&(this.value=t.formatNum(this.value)):"i"==e.valueType&&this.value&&(this.value=t.WUtil.toInt(this.value)),e.trigger("statechange",r),e.trigger("_enter"),e.blurOnEnter&&$(this).blur()}}),this.root.blur(function(n){var r=this.value
"c"==e.valueType?this.value&&(this.value=t.formatCurr(t.WUtil.toNumber(this.value))):"c5"==e.valueType?this.value&&(this.value=t.formatCurr5(t.WUtil.toNumber(this.value))):"n"==e.valueType||"p"==e.valueType?this.value&&(this.value=t.formatNum(this.value)):"i"==e.valueType&&this.value&&(this.value=t.WUtil.toInt(this.value)),e.state!=r&&e.trigger("statechange",r)}),this.root.focus(function(n){if(this.value){if("c"==e.valueType||"c5"==e.valueType){var r=t.formatNum(this.value)
r.indexOf(",00")>=0&&r.indexOf(",00")==r.length-3&&(r=r.substring(0,r.length-3)),r.indexOf(",0")>=0&&r.indexOf(",0")==r.length-2&&(r=r.substring(0,r.length-3)),this.value=r}else"n"==e.valueType||"p"==e.valueType?this.value=t.formatNum(this.value):"i"==e.valueType&&(this.value=this.value=t.WUtil.toInt(this.value))
$(this).select()}})},n}(t.WComponent)
t.WInput=s
var a=function(e){function n(t,n,r,i,o){var s=e.call(this,t||"*","WTextArea",n,r,i,o)||this
return s.rootTag="textarea",n||(s.props=5),s}return __extends(n,e),n.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.root&&this.root.val(this.state)},n.prototype.getState=function(){return this.root&&(this.state=t.norm(this.root.val())),this.state},n.prototype.render=function(){return this.props||(this.props=1),this._style?this._style.indexOf("width")<0&&(this._style+=";width:100%"):this._style="width:100%",this._attributes?this._style.indexOf("rows=")<0&&(this._attributes+=' rows="'+this.props+'"'):this._attributes='rows="'+this.props+'"',t.build("textarea","",this._style,this._attributes,this.id,this._classStyle)},n.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip),this.state&&this.root.val(t.den(this.state))},n}(t.WComponent)
t.WTextArea=a
var l=function(e){function n(t,n,r,i,o,s,a){var l=e.call(this,t||"*","WCheck",i,o,s,a)||this
return l.rootTag="input",l.value=r||"1",i&&l.updateState(r),l._text=n,l}return __extends(n,e),Object.defineProperty(n.prototype,"text",{get:function(){return!this._text&&this.$label?this.$label.text():this._text},set:function(t){if(!this._text&&this.$label)return void this.$label.text(t)
this._text=t,this.mounted&&this.root.html(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"checked",{get:function(){return this.props=this.root.is(":checked"),this.state=this.props?this.value:void 0,this.props},set:function(t){this.setProps(t)},enumerable:!0,configurable:!0}),n.prototype.getState=function(){return this.checked?this.state=this.value:this.state=null,this.state},n.prototype.updateProps=function(t){e.prototype.updateProps.call(this,t),this.state=this.props?this.value:void 0,this.root&&this.root.prop("checked",this.props)},n.prototype.updateState=function(t){"boolean"==typeof t&&(t=t?this.value:void 0),e.prototype.updateState.call(this,t),this.root&&this.root.prop("checked",void 0!=this.state)},n.prototype.render=function(){var t='name="'+this.id+'" type="checkbox"'
t+=this.props?' checked="checked"':""
var e=this._text?"&nbsp;"+this._text:""
return this.build(this.rootTag,e,t)},n.prototype.componentDidMount=function(){var t=this
this._tooltip&&this.root.attr("title",this._tooltip),this.root.change(function(e){var n=t.root.is(":checked")
t.trigger("propschange",n),t.trigger("statechange",n?t.value:void 0)})},n.prototype.getWrapper=function(e){return this.wrapper?this.wrapper:(this.id?this.$label=this._text?$('<label for="'+this.id+'">'+this._text+"</label>"):$("<label></label>"):this.$label=this._text?$("<label>"+this._text+"</label>"):$("<label></label>"),this._text="",this.wrapper=new t.WContainer(this.subId(),"checkbox",e),this.wrapper.add(this),this.wrapper.add(this.$label),this.wrapper.stateComp=this,this.wrapper)},n}(t.WComponent)
t.WCheck=l
var h=function(e){function n(t,n,r,i,o,s,a){var l=e.call(this,t,"WButton",r,i,o,s)||this
return l.updateState(n),l.rootTag="button",l.type=a||"button",l}return __extends(n,e),Object.defineProperty(n.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!0,configurable:!0}),n.prototype.setText=function(t,e){null!=e&&(this.props=e),this.setState(t)},n.prototype.render=function(){this._classStyle||(this._classStyle=t.BTN.PRIMARY)
var e=this.type?'type="'+this.type+'"':"",n=""
return this.state?n+=t.buildIcon(this.props,""," ")+this.state:n+=t.buildIcon(this.props),this.build(this.rootTag,n,e)},n.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},n.prototype.componentWillUpdate=function(e,n){var r=""
r+=n?t.buildIcon(this.props,""," ")+n:t.buildIcon(this.props),this.root.html(r)},n}(t.WComponent)
t.WButton=h
var u=function(e){function n(t,n,r,i,o,s,a,l){var h=e.call(this,t,"WLink",r,i,o,s)||this
return h.updateState(n),h.rootTag="a",h._href=a,h._target=l,h}return __extends(n,e),Object.defineProperty(n.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"href",{get:function(){return this._href},set:function(t){this._href=t,this.root&&this.root.length&&(t?this.root.attr("href",t):this.root.removeAttr("href"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t,this.root&&this.root.length&&(t?this.root.attr("target",t):this.root.removeAttr("target"))},enumerable:!0,configurable:!0}),n.prototype.render=function(){var e=""
this._href&&(e+='href="'+this._href+'"'),this._target&&(e&&(e+=" "),e+='target="'+this._target+'"')
var n=""
return this.state?n+=t.buildIcon(this.icon,""," ")+this.state:n+=t.buildIcon(this.icon),this.build(this.rootTag,n,e)},n.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},n.prototype.componentWillUpdate=function(e,n){var r=""
r+=n?t.buildIcon(this.icon,""," ")+n:t.buildIcon(this.icon),this.root.html(r)},n}(t.WComponent)
t.WLink=u
var p=function(n){function r(t,e,r,i,o){var s=n.call(this,t,"WTab",o,e,r,i)||this
return s.tabs=[],s}return __extends(r,n),r.prototype.addTab=function(n,r){var i=new e("","panel-body")
return i.name=t.buildIcon(r,""," ")+n,this.tabs.push(i),i},r.prototype.render=function(){null==this.state&&(this.state=0)
var t="<div"
this._classStyle?t+=' class="tabs-container '+this._classStyle+'"':t+=' class="tabs-container"',t+=' id="'+this.id+'"',this._style&&(t+=' style="'+this._style+'"'),this.attributes&&(t+=" "+this.attributes),t+=">",t+='<ul class="nav nav-tabs">'
for(var e=0;e<this.tabs.length;e++){var n=this.tabs[e]
e==this.state?t+='<li class="active"><a data-toggle="tab" href="#'+this.id+"-"+e+'"> '+n.name+"</a></li>":t+='<li><a data-toggle="tab" href="#'+this.id+"-"+e+'"> '+n.name+"</a></li>"}t+="</ul>",t+='<div class="tab-content">'
for(var e=0;e<this.tabs.length;e++)e==this.state?t+='<div id="'+this.id+"-"+e+'" class="tab-pane active"></div>':t+='<div id="'+this.id+"-"+e+'" class="tab-pane"></div>'
return t+="</div></div>"},r.prototype.componentDidUpdate=function(t,e){$('.nav-tabs a[href="#'+this.id+"-"+this.state+'"]').tab("show")},r.prototype.componentDidMount=function(){if(this.tabs.length){for(var t=0;t<this.tabs.length;t++){var e=this.tabs[t],n=$("#"+this.id+"-"+t)
n.length&&e.mount(n)}var r=this
this.root.find('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var e=$(t.target).attr("href")
if(e){var n=e.lastIndexOf("-")
n>=0&&r.setState(parseInt(e.substring(n+1)))}})}},r.prototype.componentWillUnmount=function(){for(var t=0,e=this.tabs;t<e.length;t++){var n=e[t]
n&&n.unmount()}},r}(t.WComponent)
t.WTab=p
var c=function(e){function n(t,n,r,i,o,s){var a=e.call(this,t||"*","WSelect",null,i,o,s)||this
return a.rootTag="select",a.options=n,a.multiple=r,a}return __extends(n,e),n.prototype.getProps=function(){var t=this
return this.root?(this.props=[],this.root.find("option:selected").each(function(e,n){t.props.push($(n).text())}),this.props):this.props},n.prototype.select=function(t){return this.root&&this.options?(this.setState(this.options.length>t?this.options[t]:null),this):this},n.prototype.addOption=function(t,e){if(!t)return this
if(this.options||(this.options=[]),this.options.push(t),!this.mounted)return this
var n=this.buildOptions()
return this.root.html(n),e&&this.updateState(t),this},n.prototype.remOption=function(t){if(!t||!this.options)return this
for(var e=-1,n=0;n<this.options.length;n++){var r=this.options[n]
if(r)if("string"==typeof t){if("string"==typeof r){if(r==t){e=n
break}}else if(r.id==t){e=n
break}}else if("string"==typeof r){if(r==t.id){e=n
break}}else if(r.id==t.id){e=n
break}}if(e>=0){if(this.options.splice(e,1),!this.mounted)return this
var i=this.buildOptions()
this.root.html(i)}return this},n.prototype.setOptions=function(e,n){if(this.options=e,!this.mounted)return this
var r=this.root.val(),i=this.buildOptions()
return this.root.html(i),n?this.root.val(r):e&&e.length&&("string"==typeof e[0]?this.trigger("statechange",e[0]):this.trigger("statechange",t.WUtil.getString(e[0],"id"))),this},n.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.root&&(null==this.state?this.root.val(""):"string"==typeof this.state||"number"==typeof this.state?this.root.val(""+this.state):this.root.val(this.state.id))},n.prototype.render=function(){var t=this.buildOptions(),e='name="'+this.id+'"'
return this.multiple&&(e+=' multiple="multiple"'),this.buildRoot("select",t,e)},n.prototype.componentDidMount=function(){var t=this
this._tooltip&&this.root.attr("title",this._tooltip),this.state&&this.root.val(this.state),this.root.on("change",function(e){t.trigger("statechange",t.root.val())})},n.prototype.buildOptions=function(){var t=""
this.options||(this.options=[])
for(var e=0,n=this.options;e<n.length;e++){var r=n[e]
t+="string"==typeof r?"<option>"+r+"</option>":'<option value="'+r.id+'">'+r.text+"</option>"}return t},n}(t.WComponent)
t.WSelect=c
var d=function(e){function n(t,n,r,i,o,s){var a=e.call(this,t||"*","WRadio",s,r,i,o)||this
return a.options=n,a}return __extends(n,e),Object.defineProperty(n.prototype,"tooltip",{set:function(t){if(this._tooltip=t,this.internal&&(this.internal.tooltip=t),this.options&&this.options.length)for(var e=0;e<this.options.length;e++){var n=$("#"+this.id+"-"+e)
n.length&&(this._tooltip&&n.attr("title",this._tooltip))}},enumerable:!0,configurable:!0}),n.prototype.select=function(t){return this.root&&this.options?(this.setState(this.options.length>t?this.options[t]:null),this):this},n.prototype.render=function(){var e=""
if(this.label&&(e+=this.id?'<label for="'+this.id+'">':"<label>",e+=this.label.replace("<","&lt;").replace(">","&gt;"),e+="</label> "),!this.options||!this.options.length)return e
void 0===this.state&&(this.state=this.options[0])
for(var n=0;n<this.options.length;n++){var r=this.options[n]
"string"==typeof r?t.match(this.state,r)?e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+r+'" name="'+this.id+'" id="'+this.id+"-"+n+'" checked> '+r+"</label>&nbsp;":e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+r+'" name="'+this.id+'" id="'+this.id+"-"+n+'"> '+r+"</label>&nbsp;":t.match(this.state,r)?e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+r.id+'" name="'+this.id+'" id="'+this.id+"-"+n+'" checked> '+r.text+"</label>&nbsp;":e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+r.id+'" name="'+this.id+'" id="'+this.id+"-"+n+'"> '+r.text+"</label>&nbsp;"}return e},n.prototype.componentDidMount=function(){var t=this
if(this.options&&this.options.length)for(var e=this,n=0;n<this.options.length;n++)!function(n){var r=$("#"+e.id+"-"+n)
if(!r.length)return"continue"
e._tooltip&&r.attr("title",e._tooltip)
var i=e.options[n]
r.click(function(){t.setState(i)})}(n)},n.prototype.componentDidUpdate=function(e,n){for(var r=-1,i=0;i<this.options.length;i++)if(t.match(this.state,this.options[i])){r=i
break}r>=0&&$("#"+this.id+"-"+r).prop("checked",!0)},n}(t.WComponent)
t.WRadio=d
var f=function(e){function n(t,n,r,i,o,s,a){var l=e.call(this,t||"*","WTable",a,i,o,s)||this
if(l.selectedRow=-1,l.rootTag="table",l.header=n,r&&r.length)l.keys=r
else if(l.keys=[],l.header)for(var h=0;h<l.header.length;h++)l.keys.push(h)
return l.widths=[],l.templates=[],l.boldNonZero=!1,l.selClass="success",l}return __extends(n,e),n.prototype.onSelectionChanged=function(t){this.handlers._selectionchanged||(this.handlers._selectionchanged=[]),this.handlers._selectionchanged.push(t)},n.prototype.onDoubleClick=function(t){this.handlers._doubleclick||(this.handlers._doubleclick=[]),this.handlers._doubleclick.push(t)},n.prototype.onRowPrepared=function(t){this.handlers._rowprepared||(this.handlers._rowprepared=[]),this.handlers._rowprepared.push(t)},n.prototype.onCellClick=function(t){this.handlers._cellclick||(this.handlers._cellclick=[]),this.handlers._cellclick.push(t)},n.prototype.onCellHoverChanged=function(t){this.handlers._cellhover||(this.handlers._cellhover=[]),this.handlers._cellhover.push(t)},n.prototype.clearSelection=function(){if(this.selectedRow=-1,!this.mounted)return this
if(this.root.find("tbody tr").removeClass("success"),!this.handlers._selectionchanged)return this
for(var t=0,e=this.handlers._selectionchanged;t<e.length;t++){(0,e[t])({element:this.root,selectedRowsData:[]})}return this},n.prototype.select=function(t){if(this.selectedRow=t&&t.length?t[0]:-1,!this.mounted)return this
this.root.find("tbody tr").removeClass("success")
for(var e=0,n=t;e<n.length;e++){var r=n[e]
this.root.find("tbody tr:eq("+r+")").addClass("success")}if(!this.handlers._selectionchanged)return this
for(var i=0,o=this.handlers._selectionchanged;i<o.length;i++){(0,o[i])({element:this.root,selectedRowsData:[]})}return this},n.prototype.selectAll=function(t){if(!this.mounted)return this
if(this.root.find("tbody tr").addClass("success"),!this.handlers._selectionchanged)return this
for(var e=0,n=this.handlers._selectionchanged;e<n.length;e++){(0,n[e])({element:this.root,selectedRowsData:[]})}return this},n.prototype.getSelectedRows=function(){return this.mounted?this.selectedRow<0?[]:[this.selectedRow]:[]},n.prototype.getSelectedRowsData=function(){return this.mounted?this.selectedRow<0?[]:this.state&&this.state.length?this.state.length<=this.selectedRow?[]:this.state[this.selectedRow]:[]:[]},n.prototype.getFilteredRowsData=function(){return this.state},n.prototype.refresh=function(){return this},n.prototype.getCellValue=function(e,n){if(e<0||n<0)return null
if(!this.state||this.state.length<=e)return null
if(!this.keys||this.keys.length<=n)return null
var r=this.keys[n],i=this.state[e]
return t.WUtil.getValue(i,r)},n.prototype.getColHeader=function(t){return t<0?"":!this.header||this.header.length<=t?"":this.header[t]},n.prototype.render=function(){if(this.shouldBuildRoot()){var e="table"
this._classStyle&&(e=this._classStyle.indexOf("table ")>=0?this._classStyle:e+" "+this._classStyle)
var n=this.style?' style="'+this.style+'"':"",r='<div class="table-responsive"><table id="'+this.id+'" class="'+e+'"'+n+">"
if(this.header&&this.header.length){var i=!1
if("string"==typeof this.headStyle?this.headStyle.indexOf("text-align")>0&&(i=!0):this.headStyle&&this.headStyle.a&&(i=!0),!this.hideHeader){r+=i?"<thead><tr>":"<thead><tr"+t.buildCss(this.headStyle)+">"
for(var o=-1,s=0,a=this.header;s<a.length;s++){var l=a[s]
o++
var h=void 0
h=0==o?this.col0Style?this.col0Style:this.colStyle:o==this.header.length-1?this.colLStyle?this.colLStyle:this.colStyle:i?this.headStyle:this.colStyle
var u=this.widths&&this.widths.length>o?this.widths[o]:0
u?this.widthsPerc?r+="<th"+t.buildCss(h,{w:u+"%"})+">"+l+"</th>":r+="<th"+t.buildCss(h,{w:u})+">"+l+"</th>":r+="<th"+t.buildCss(h)+">"+l+"</th>"}r+="</tr></thead>"}}return r+="<tbody></tbody>",r+="</table></div>"}},n.prototype.componentDidMount=function(){this.buildBody()
var t=this
this.root.on("click","tbody tr",function(e){if(t.handlers._selectionchanged){if(!t.selectionMode||"none"==t.selectionMode)return}else if(!t.selectionMode||"none"==t.selectionMode)return
var n=$(this)
n.addClass("success").siblings().removeClass("success"),t.selectedRow=n.index()
var r=t.state&&t.state.length?t.state[t.selectedRow]:void 0
if(t.handlers._selectionchanged)for(var i=0,o=t.handlers._selectionchanged;i<o.length;i++){var s=o[i]
s({element:t.root,selectedRowsData:[r]})}}),this.root.on("click","tbody tr td",function(e){if(t.handlers._cellclick)for(var n=$(this),r=n.parent().index(),i=n.index(),o=0,s=t.handlers._cellclick;o<s.length;o++){var a=s[o]
a({element:t.root,rowIndex:r,colIndex:i})}}),this.root.on("mouseover","tbody tr td",function(e){if(t.handlers._cellhover)for(var n=$(this),r=n.parent().index(),i=n.index(),o=0,s=t.handlers._cellhover;o<s.length;o++){var a=s[o]
a({element:t.root,rowIndex:r,colIndex:i})}}),this.root.on("dblclick","tbody tr",function(e){if(t.handlers._doubleclick)for(var n=0,r=t.handlers._doubleclick;n<r.length;n++){var i=r[n]
i({element:t.root})}})},n.prototype.componentDidUpdate=function(t,e){this.buildBody()},n.prototype.buildBody=function(){this.selectedRow=-1
var e=this.root.find("tbody")
if(e.html(""),this.state&&this.state.length&&this.keys&&this.keys.length)for(var n=-1,r=0,i=this.state;r<i.length;r++){var o=i[r]
n++
var s=void 0
if(s=n==this.state.length-1&&this.footerStyle?$(t.build("tr","",this.footerStyle)):$(t.build("tr","",this.rowStyle)),e.append(s),this.handlers._rowprepared)for(var a={element:this.root,rowElement:s,data:o,rowIndex:n},l=0,h=this.handlers._rowprepared;l<h.length;l++){var u=h[l]
u(a)}for(var p=-1,c=0,d=this.keys;c<d.length;c++){var f=d[c],g=o[f],b=""
null==g&&(g=""),p++
var y=t.WUtil.getItem(this.types,p)
switch(y){case"w":b="text-center"
break
case"c":g=t.formatCurr(g),b="text-right"
break
case"c5":g=t.formatCurr5(g),b="text-right"
break
case"i":g=t.formatNum(g),b="text-right"
break
case"n":g=t.formatNum2(g),b="text-right"
break
case"d":g=t.formatDate(g)
break
case"t":g=t.formatDateTime(g)
break
case"b":g=g?"&check;":""
break
default:g instanceof Date&&(g=t.formatDate(g)),"boolean"==typeof g&&(g=g?"&check;":""),"number"==typeof g&&(g=t.formatNum2(g),b="text-right")}var m=void 0
m=0==p?this.col0Style?this.col0Style:this.colStyle:p==this.header.length-1&&this.colLStyle?this.colLStyle:this.colStyle,"string"==typeof m?m.indexOf("text-align")>0&&(b=""):m&&m.a&&(b="")
var v=this.widths&&this.widths.length>p?this.widths[p]:0,_=this.templates&&this.templates.length>p?this.templates[p]:void 0
if(_){var C=$("<td"+t.buildCss(m,b,{w:v})+"></td>")
_(C,{data:o,text:g}),s.append(C)}else if(t.WUtil.hasComponents(g))for(var w=t.WUtil.toArrayComponent(g),x=0,S=w;x<S.length;x++){var O=S[x],C=$("<td"+t.buildCss(m,b,{w:v})+"></td>")
s.append(C),O.mount(C)}else this.boldNonZero&&0!=g&&"0"!=g&&""!=g?s.append($("<td"+t.buildCss(m,b,{w:v})+"><strong>"+g+"</strong></td>")):s.append($("<td"+t.buildCss(m,b,{w:v})+">"+g+"</td>"))}if(this.header&&this.header.length>this.keys.length)for(var T=0;T<this.header.length-this.keys.length;T++)s.append($("<td"+t.buildCss(this.colStyle)+"></td>"))}},n}(t.WComponent)
t.WTable=f
var g=function(e){function n(n,r,i,o){var s=e.call(this,n,"WFormPanel",o)||this
return s.rootTag="form",s._attributes=i?'role="form" name="'+s.id+'" action="'+i+'"':'role="form" name="'+s.id+'" action="javascript:void(0);"',s.stateChangeOnBlur=!1,s.inputClass=t.CSS.FORM_CTRL,s.title=r,s.nextOnEnter=!0,s.autoValidate=!1,s.init(),s}return __extends(n,e),n.prototype.init=function(){return this.rows=[],this.roww=[],this.hiddens=[],this.internals={},this.components=[],this.captions=[],this.dpids=[],this.nextMap={},this.mapTooltips={},this.mapLabelLinks={},this.minValues={},this.maxValues={},this.footer=[],this.currRow=null,this.addRow(),this},n.prototype.focus=function(){if(!this.mounted)return this
var t=this.first(!0)
return t&&(t.component?t.component.focus():t.element&&t.element.focus()),this},n.prototype.first=function(t){if(!this.rows)return null
for(var e=0,n=this.rows;e<n.length;e++)for(var r=n[e],i=0,o=r;i<o.length;i++){var s=o[i]
if(!t)return s
if((null==s.enabled||s.enabled)&&(null==s.readonly||!s.readonly))return s}return null},n.prototype.focusOn=function(t){if(!this.mounted)return this
var e=this.getField(t)
return e?(e.component?e.component.focus():e.element&&e.element.focus(),this):this},n.prototype.onEnterPressed=function(t){t&&(this.handlers._enter||(this.handlers._enter=[]),this.handlers._enter.push(t),this.nextOnEnter=!1)},n.prototype.onEnd=function(t){t&&(this.handlers._end||(this.handlers._end=[]),this.handlers._end.push(t))},n.prototype.onChangeDate=function(t){t&&(this.handlers._changedate||(this.handlers._changedate=[]),this.handlers._changedate.push(t))},n.prototype.addToFooter=function(t,e){return t||this.footer?(void 0!=e&&(this.footerSep=e),this.footer.push(t),this):this},n.prototype.addRow=function(e,n,r,i,o){return void 0===o&&(o="row"),this.currRow&&!this.currRow.length?(this.roww[this.roww.length-1]={classStyle:e,style:n,id:r,attributes:t.attributes(i),type:o},this):(this.currRow=new Array,this.rows.push(this.currRow),this.roww.push({classStyle:e,style:n,id:r,attributes:t.attributes(i),type:o}),this)},n.prototype.addTextField=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Text,readonly:r}),this},n.prototype.addNoteField=function(e,n,r,i){return r||(r=3),this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Note,attributes:'rows="'+r+'"',readonly:i}),this},n.prototype.addCurrencyField=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Text,readonly:r,valueType:"c",style:{a:"right"}}),this},n.prototype.addCurrency5Field=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Text,readonly:r,valueType:"c5",style:{a:"right"}}),this},n.prototype.addIntegerField=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Text,readonly:r,valueType:"i"}),this},n.prototype.addDecimalField=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Text,readonly:r,valueType:"n"}),this},n.prototype.addDateField=function(e,n,r,i,o){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Date,readonly:r,valueType:"d",minValue:i,maxValue:o}),this},n.prototype.addOptionsField=function(e,n,r,i,o){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Select,readonly:o,options:r,attributes:i}),this},n.prototype.addBooleanField=function(e,n){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.CheckBox}),this},n.prototype.addBlankField=function(e,n,r,i,o,s){return this.currRow.push({id:i,label:e,type:t.WInputType.Blank,classStyle:n,style:r,attributes:o,placeholder:s}),this},n.prototype.addRadioField=function(e,n,r){var i=new d(this.subId(e),r)
return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Radio,component:i}),this},n.prototype.addPasswordField=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Password,readonly:r}),this},n.prototype.addEmailField=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Email,readonly:r}),this},n.prototype.addFtpField=function(e,n,r){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Ftp,readonly:r}),this},n.prototype.addCronField=function(e,n,r,i){return this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Cron,readonly:r,value:i}),this},n.prototype.addComponent=function(e,n,r,i){if(r)return e?(r.id=this.subId(e),this.currRow.push({id:this.subId(e),label:n,type:t.WInputType.Component,component:r,readonly:i}),r instanceof t.WInput&&(r.classStyle||(r.classStyle=t.CSS.FORM_CTRL))):(r.id="",this.currRow.push({id:"",label:n,type:t.WInputType.Component,component:r,readonly:i})),this.components.push(r),this},n.prototype.addCaption=function(e,n,r,i){if(e){var o=new t.WLabel("",e,n,r,i)
return this.currRow.push({id:"",label:"",type:t.WInputType.Component,component:o,readonly:!0}),this.components.push(o),this.captions.push(o),this}},n.prototype.addInternalField=function(t,e){return void 0===e&&(e=null),this.internals[t]=e,this},n.prototype.addHiddenField=function(e,n){return this.hiddens.push({id:this.subId(e),type:t.WInputType.Hidden,value:n}),this},n.prototype.setTooltip=function(t,e){var n=this.getField(t)
return n?(e?this.mapTooltips[n.id]=e:delete this.mapTooltips[n.id],this):this},n.prototype.setLabelLinks=function(t,e){var n=this.getField(t)
return n?(e&&e.length?this.mapLabelLinks[n.id]=e:delete this.mapLabelLinks[n.id],this):this},n.prototype.setReadOnly=function(e,n){if("string"==typeof e){var r=this.getField(e)
if(!r)return this
if(r.readonly=n,this.mounted)if(r.component)r.component.enabled=!n
else{var i=$("#"+r.id),o=t.getTagName(i)
"select"==o?n?i.prop("disabled",!0):i.prop("disabled",!1):i.prop("readonly",n)}}else for(var s=0;s<this.rows.length;s++)for(var a=this.rows[s],l=0;l<a.length;l++){var r=a[l]
if(r.readonly=e,this.mounted)if(r.component)r.component.enabled=!e
else{var i=$("#"+r.id),o=t.getTagName(i)
"select"==o?e?i.prop("disabled",!0):i.prop("disabled",!1):i.prop("readonly",e)}}return this.trigger("propschange"),this},Object.defineProperty(n.prototype,"enabled",{set:function(t){this._enabled=t
for(var e=0;e<this.rows.length;e++)for(var n=this.rows[e],r=0;r<n.length;r++){var i=n[r]
i.enabled=t,this.mounted&&(i.component?i.component.enabled=t:$("#"+i.id).prop("disabled",!t))}},enumerable:!0,configurable:!0}),n.prototype.setEnabled=function(t,e){if("string"==typeof t){var n=this.getField(t)
if(!n)return this
n.enabled=e,this.mounted&&(n.component?n.component.enabled=e:$("#"+n.id).prop("disabled",!e))}else this.enabled=t
return this.trigger("propschange"),this},n.prototype.setVisible=function(t,e){var n=this.getField(t)
return n?(n.visible=e,this.mounted&&(n.component?n.component.visible=e:e?$("#"+n.id).show():$("#"+n.id).hide(),n.label&&(e?$('label[for="'+n.id+'"]').show():$('label[for="'+n.id+'"]').hide())),this.trigger("propschange"),this):this},n.prototype.setLabelCss=function(e,n){var r=this.getField(e)
if(!r)return this
if(r.labelCss=n,this.mounted){var i=$('label[for="'+r.id+'"]')
i.length&&t.setCss(i,n)}return this},n.prototype.setLabelText=function(t,e){var n=this.getField(t)
if(!n)return this
if(n.label=e,this.mounted){var r=$('label[for="'+n.id+'"]')
r.length&&r.html(e)}return this},n.prototype.setSpanField=function(t,e){var n=this.getField(t)
return n?(n.span=e,this):this},n.prototype.getField=function(t){if(t)for(var e=0==t.indexOf(this.id+"-")?t:this.subId(t),n=0;n<this.rows.length;n++)for(var r=this.rows[n],i=0;i<r.length;i++){var o=r[i]
if(o.id==e)return o}},n.prototype.onMount=function(t,e){var n=this.getField(t)
return n?(n.onmount=e,this):this},n.prototype.onFocus=function(t,e){var n=this.getField(t)
return n?(n.onfocus=e,this):this},n.prototype.onBlur=function(t,e){var n=this.getField(t)
return n?(n.onblur=e,this):this},n.prototype.getStateOf=function(t){var e=this.getField(t)
return e&&e.component?e.component.getState():null},n.prototype.getPropsOf=function(t){var e=this.getField(t)
return e&&e.component?e.component.getProps():null},n.prototype.next=function(t){if(t){var e=0==t.indexOf(this.id+"-")?t:this.subId(t)
if(this.nextMap){var n=this.nextMap[this.ripId(e)]
if(n){var r=this.getField(n)
if(r)return r}}for(var i=!1,o=0;o<this.rows.length;o++)for(var s=this.rows[o],a=0;a<s.length;a++){var l=s[a]
if(i)return l
l.id==e&&(i=!0)}}},n.prototype.setMandatory=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!this.rows)return this
for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],s=0==o.indexOf(this.id+"-")?o:this.subId(o)
n.push(s)}for(var a=0;a<this.rows.length;a++)for(var l=this.rows[a],h=0;h<l.length;h++){var u=l[h]
n.indexOf(u.id)>=0?u.required=!0:u.required=!1}return this},n.prototype.checkMandatory=function(t,e,n){var r=this.getState()
r||(r={})
for(var i="",o="",s=!1,a=0;a<this.rows.length;a++)for(var l=this.rows[a],h=0;h<l.length;h++){var u=l[h],p=this.ripId(u.id),c=r[p]
u.required&&(null==c||""==c?(i+=t?","+u.label:","+p,o||(o=p)):s=!0)}return n&&s?"":(o&&e&&this.focusOn(o),i?i.substring(1):i)},n.prototype.getState=function(){return this.state=this.autoValidate?this.validate():this.getValues(),this.state},n.prototype.render=function(){return this.buildRoot(this.rootTag)},n.prototype.componentDidMount=function(){var e=this
this.inputClass||(this.inputClass=t.CSS.FORM_CTRL),this.minValues={},this.maxValues={},this.dpids=[]
for(var n=0;n<this.rows.length;n++){var r=this.roww[n],i="<div"
if(r){var o=t.cls(r.type,r.classStyle,r.style)
o&&(i+=' class="'+o+'"')
var s=t.style(r.style)
s&&(i+=' style="'+s+'"'),r.id&&(i+=' id="'+r.id+'"'),r.attributes&&(i+=" "+r.attributes)}else i+=' class="row"'
i+="></div>"
var a=$(i)
this.root.append(a)
for(var l=this.rows[n],h=0,u=0;u<l.length;u++){var p=l[u]
p.type!==t.WInputType.Hidden&&(h+=p.span&&p.span>0?p.span:1)}for(var u=0;u<l.length;u++){var p=l[u]
if(p.id&&(p.minValue&&(this.minValues[p.id]=p.minValue),p.maxValue&&(this.maxValues[p.id]=p.maxValue)),p.type!==t.WInputType.Hidden){var c=Math.floor(12/h)
c<1&&(c=1),1==c&&h<11&&(0==u||u==h-1)&&(c=2),p.span&&p.span>0&&(c*=p.span)
var d=$('<div class="col-md-'+c+'"></div>')
a.append(d)
var f=$('<div class="form-group"></div>')
if(d.append(f),p.label){var g="",b=""
if(p.labelCss){var y=t.cls(p.labelCss),m=t.style(p.labelCss)
y&&(g+=' class="'+y+'"'),m&&(g+=' style="'+m+'"')}else if(p.required){var y=t.cls(t.CSS.FIELD_REQUIRED),m=t.style(t.CSS.FIELD_REQUIRED)
y&&(g+=' class="'+y+'"'),m&&(g+=' style="'+m+'"'),b=" *"}if(p.id&&this.mapTooltips[p.id]?f.append($('<label for="'+p.id+'" title="'+this.mapTooltips[p.id]+'"'+g+">"+p.label+b+"</label>")):p.id?f.append($('<label for="'+p.id+'" title="'+p.label+'"'+g+">"+p.label+b+"</label>")):f.append($('<label title="'+p.label+'"'+g+">"+p.label+b+"</label>")),p.id&&this.mapLabelLinks[p.id])for(var v=0,_=this.mapLabelLinks[p.id];v<_.length;v++){var C=_[v],w=$('<span style="padding-left:8px;"></span>')
f.append(w),C.mount(w)}}switch(p.type){case t.WInputType.Blank:p.element=$(t.build("div",p.placeholder,p.style,p.attributes,p.id,p.classStyle))
break
case t.WInputType.Text:var x='<input type="text" name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'" '
p.readonly&&(x+="readonly "),0==p.enabled&&(x+="disabled "),p.style&&(x+=' style="'+t.style(p.style)+'"'),x+="/>",p.element=$(x)
break
case t.WInputType.Note:var S='<textarea name="'+p.id+'" id="'+p.id+'" class="form-control" '
p.attributes&&(S+=p.attributes+" "),p.readonly&&(S+="readonly "),0==p.enabled&&(S+="disabled "),p.style&&(S+=' style="'+t.style(p.style)+'"'),S+="></textarea>",p.element=$(S)
break
case t.WInputType.Date:this.dpids.push(p.id)
var O='<div class="input-group" id="igd-'+p.id+'">'
O+='<span class="input-group-addon">'+t.buildIcon(t.WIcon.CALENDAR)+"</span> ",O+='<input type="text" name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'" ',p.readonly&&(O+="readonly "),0==p.enabled&&(O+="disabled "),O+="/></div>",p.element=$(O)
break
case t.WInputType.CheckBox:p.element=$('<input type="checkbox" name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'" style="height:16px" />')
break
case t.WInputType.Radio:p.component&&p.component.mount(f)
break
case t.WInputType.Select:var T=""
if(p.attributes?(T+='<select name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'" '+p.attributes,(p.readonly||0==p.enabled)&&(T+=" disabled"),T+=">"):(T+='<select name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'"',(p.readonly||0==p.enabled)&&(T+="disabled"),T+=">"),p.options&&p.options.length>0)for(var I=0;I<p.options.length;I++){var W=p.options[I]
T+="string"==typeof W?"<option>"+W+"</option>":'<option value="'+W.id+'">'+W.text+"</option>"}T+="</select>",p.element=$(T)
break
case t.WInputType.Email:var R='<input type="text" name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'" '
p.readonly&&(R+="readonly "),0==p.enabled&&(R+="disabled "),p.style&&(R+=' style="'+t.style(p.style)+'"'),R+="/>",p.element=$(R)
break
case t.WInputType.Ftp:var D='<input type="text" name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'" '
p.readonly&&(D+="readonly "),0==p.enabled&&(D+="disabled "),p.style&&(D+=' style="'+t.style(p.style)+'"'),D+="/>",p.element=$(D)
break
case t.WInputType.Password:var A='<input type="password" name="'+p.id+'" id="'+p.id+'" class="'+this.inputClass+'" '
p.readonly&&(A+="readonly "),0==p.enabled&&(A+="disabled "),p.style&&(A+=' style="'+t.style(p.style)+'"'),A+="/>",p.element=$(A)
break
case t.WInputType.Cron:var E=""
null!=p.value&&""!=p.value&&(E='initial: "'+p.value+'" ,')
var k='<div id="cron_'+p.id+'" class="'+this.inputClass+'" '
p.readonly&&(k+="readonly "),0==p.enabled&&(k+="disabled "),k+=" ></div>",k+='<script type="text/javascript">$(document).ready(function() {',k+='$("#cron_'+p.id+'").cron({'+E+'onChange: function() {$("#'+p.id+'").val($(this).cron("value"));},useGentleSelect: true});',k+='});<\/script><input type="hidden" name="'+p.id+'" id="'+p.id+'" />',p.element=$(k)
break
case t.WInputType.Component:p.component&&((0==p.enabled||p.readonly)&&(p.component.enabled=!1),p.component.mount(f),p.onmount&&p.onmount(p),p.onfocus&&p.component.on("focus",p.onfocus),p.onblur&&p.component.on("blur",p.onblur))}p.element&&(f.append(p.element),p.type==t.WInputType.Text&&("c"==p.valueType||"c5"==p.valueType?(p.element.focus(function(e){if(this.value){var n=t.formatNum(this.value)
n.indexOf(",00")>=0&&n.indexOf(",00")==n.length-3&&(n=n.substring(0,n.length-3)),n.indexOf(",0")>=0&&n.indexOf(",0")==n.length-2&&(n=n.substring(0,n.length-3)),this.value=n,$(this).select()}}),"c"==p.valueType?p.element.blur(function(e){this.value&&(this.value=t.formatCurr(t.WUtil.toNumber(this.value)))}):p.element.blur(function(e){this.value&&(this.value=t.formatCurr5(t.WUtil.toNumber(this.value)))})):"n"==p.valueType?(p.element.focus(function(e){this.value&&(this.value=t.formatNum(this.value),$(this).select())}),p.element.blur(function(e){this.value&&(this.value=t.formatNum(this.value))})):"i"==p.valueType?(p.element.focus(function(e){this.value&&(this.value=t.WUtil.toInt(this.value),$(this).select())}),p.element.blur(function(e){this.value&&(this.value=t.WUtil.toInt(this.value))})):p.element.focus(function(t){$(this).select()})),null==p.visible||p.visible||(p.element.hide(),p.label&&$('label[for="'+p.id+'"]').hide()),p.onmount&&p.onmount(p),p.onfocus&&p.element.focus(p.onfocus),p.onblur&&p.element.focus(p.onblur))}}}for(var L=0,N=this.hiddens;L<N.length;L++){var p=N[L]
null==p.value&&(p.value=""),this.root.append('<input type="hidden" name="'+p.id+'" id="'+p.id+'" value="'+p.value+'">')}if(this.footer&&this.footer.length>0){var M=t.style(this.footerStyle)
if(this.footerClass||(this.footerClass="col-md-12"),M=M?' style="'+M+'"':' style="text-align:right;"',this.footerSep)if("string"==typeof this.footerSep){var U=this.footerSep.charAt(0)
"<"==U?this.root.append(this.footerSep):t.WUtil.isNumeric(U)&&this.root.append('<div style="height:'+this.footerSep+'px;"></div>')}else this.root.append('<div style="height:'+this.footerSep+'px;"></div>')
var F=$('<div class="row"></div>')
this.root.append(F)
var P=$('<div class="'+this.footerClass+'"'+M+"></div>")
F.append(P)
for(var H=0,B=this.footer;H<B.length;H++){var V=B[H]
"string"==typeof V&&V.length>0?P.append($(V)):V instanceof t.WComponent?V.mount(P):P.append(V)}}for(var j=this,X=0,G=this.dpids;X<G.length;X++){var Y=G[X]
!function(n){var r=t.WUtil.getDate(j.minValues,n)
$("#"+n).datepicker({language:"it",todayBtn:"linked",keyboardNavigation:!1,forceParse:!1,calendarWeeks:!0,autoclose:!0,minDate:r}).on("changeDate",function(r){if(e.handlers._changedate)for(var i=0,o=e.handlers._changedate;i<o.length;i++){var s=o[i]
s(r)}var a=t.WUtil.getDate(e.minValues,n),l=t.WUtil.getDate(e.maxValues,n)
if(a||l){var h=t.WUtil.getDate(r,"date")
if(h){var u=t.WUtil.toInt(h)
if(!(u<19000101)){var p=t.WUtil.toInt(a)
p>=19000101&&u<p&&(t.showWarning(t.RES.ERR_DATE),$(r.target).datepicker("setDate",a))
var c=t.WUtil.toInt(l)
c>=19000101&&u>c&&(t.showWarning(t.RES.ERR_DATE),$(r.target).datepicker("setDate",l))}}}})}(Y)}"object"==typeof this.state&&this.updateView(),this.root.find("input").keypress(function(t){if(13==t.which){for(var n=$(t.target).attr("id"),r=e.next(n);r&&!e.isFocusable(r);)r=e.next(r.id)
r&&e.nextOnEnter?(r.component?r.component.focus():r.element&&("DIV"==r.element.prop("tagName")?r.element.find("input").focus():r.element.focus()),e.stateChangeOnBlur||(e.lastChanged=e.ripId(n),e.trigger("statechange"))):(e.lastChanged=e.ripId(n),e.trigger("statechange")),e.trigger("_enter",e.ripId(n)),r||e.trigger("_end",e.ripId(n))}}),this.stateChangeOnBlur&&this.root.find("input").blur(function(t){e.lastChanged=e.ripId($(t.target).attr("id")),e.trigger("statechange")}),this.root.on("change","select",function(t){var n=(new Date).getTime()
e.lastTs&&n-e.lastTs<200||(e.lastTs=n,e.lastChanged=e.ripId($(t.target).attr("id")),e.trigger("statechange"))})},n.prototype.isFocusable=function(t){return!!t&&(!t.readonly&&!(null!=t.enabled&&!t.enabled))},n.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.mounted&&(!t||$.isEmptyObject(t)?this.clear():this.updateView())},n.prototype.isBlank=function(t){if(t){var e=this.getValue(t)
if(0===e)return!1
if(!e)return!0
var n=""+e
return!n.trim()}for(var r=0;r<this.rows.length;r++)for(var i=this.rows[r],o=0;o<i.length;o++){var s=i[o],e=this.getValue(s)
if(0==e)return!1
if(e)return!1
var n=""+e
if(n.trim())return!1}return!0},n.prototype.isZero=function(t){var e=this.getValue(t)
return!e||("0"==e||!(""+e).trim())},n.prototype.match=function(e,n){var r=this.getValue(e)
return t.WUtil.toString(r)==t.WUtil.toString(n)},n.prototype.transferTo=function(n,r,i){var o
if(n instanceof t.WFormPanel){n.clear(),o=e.prototype.transferTo.call(this,n,r)
for(var s=0;s<this.rows.length;s++)for(var a=this.rows[s],l=0;l<a.length;l++){var h=a[l]
if(h.component){var u=n.getField(this.ripId(h.id))
u&&u.component&&(o=o&&h.component.transferTo(u.component))}}i&&i()}else o=e.prototype.transferTo.call(this,n,r,i)
return o},n.prototype.clear=function(){this.debug&&console.log("WUX.WFormPanel.clear")
for(var t=0;t<this.components.length;t++)this.components[t].id&&this.components[t].setState(null)
for(var e in this.internals)this.internals.hasOwnProperty(e)&&(this.internals[e]=null)
if(!this.root)return this
var n=this.root,r=n[0]
if(!r||!r.elements)return this
for(var i=0;i<r.elements.length;i++){var o=r.elements[i]
switch(o.type){case"checkbox":case"radio":o.checked=!1
break
case"select-one":case"select-multiple":o.selectedIndex=-1
break
default:o.value=""}}return this},n.prototype.select=function(t,e){if(!t)return this
var n=this.getField(t)
if(!n||!n.component)return this
var r=n.component.select
return"function"==typeof r?(r.bind(n.component)(e),this):(console.error("WFormPanel.select("+t+","+e+") not applicable."),this)},n.prototype.setValue=function(e,n,r){if(void 0===r&&(r=!0),this.debug&&console.log("WUX.WFormPanel.setValue("+e+","+n+","+r+")"),!e)return this
var i=this.subId(e)
if(r&&(this.state||(this.state={}),this.state[e]=n),void 0!==this.internals[e])return void 0===n&&(n=null),this.internals[e]=n,this
for(var o=0,s=this.components;o<s.length;o++){var a=s[o]
if(a.id==i)return a.setState(n),this}if(!this.root||!this.root.length)return this
if("number"==typeof n&&(n=t.formatNum(n)),this.dpids&&this.dpids.indexOf(i)>=0)return void $("#"+i).datepicker("setDate",t.WUtil.toDate(n))
var l=this.root.find("[name="+i+"]")
if(l.length||(l=$("#"+i)),!l.length)return this
switch(null==n&&(n=""),l.attr("type")){case"checkbox":case"radio":l.prop("checked",n)
break
default:n instanceof Date?l.val(t.formatDate(n)):Array.isArray(n)?l.val(n):l.val(t.den(n.toString()))}return this},n.prototype.getValue=function(t){if(t){var e,n
"string"==typeof t?(e=this.subId(t),n=t):(e=t.id,n=t.id)
for(var r=0,i=this.components;r<i.length;r++){var o=i[r]
if(o.id==e)return o.getState()}if(void 0!==this.internals[n])return this.internals[n]
if(this.root&&this.root.length){var s=this.root.find("[name="+e+"]")
if(s.length||(s=$("#"+e)),s.length){var a=s.get(0)
if(a)switch(a.type){case"checkbox":return a.checked
case"select-multiple":for(var l=[],h=0;h<a.length;h++)l.push(a.options[h].value)
return l}return s.val()}}}},n.prototype.getValues=function(e){if(!this.root||!this.root.length)return{}
var n={}
for(var r in this.internals)if(this.internals.hasOwnProperty(r)){var i=this.internals[r]
null!=i&&(n[r]=i)}var o=this.root,s=o[0]
if(!s||!s.elements)return n
for(var a=0;a<s.elements.length;a++){var l=s.elements[a]
if(l.name&&l.value){var h=l.name
switch(l.type){case"checkbox":n[this.ripId(h)]=l.checked
break
case"radio":l.checked&&(n[this.ripId(h)]=l.value)
break
case"select-one":n[this.ripId(h)]=l.options[l.selectedIndex].value
break
case"select-multiple":for(var u=[],p=0;p<l.length;p++)l.options[p].selected&&u.push(l.options[p].value)
n[this.ripId(h)]=u
break
case"text":case"textarea":n[this.ripId(h)]=t.norm(l.value)
break
default:n[this.ripId(h)]=l.value}}}for(var c=0,d=this.components;c<d.length;c++){var f=d[c]
if(f.id){var g=null
if(null==(g=e?t.format(f):f.getState()))continue
n[this.ripId(f.id)]=g}}return n},n.prototype.updateView=function(){if(this.debug&&console.log("WUX.WFormPanel.updateView()"),!this.state)return void this.clear()
for(var t in this.state)this.setValue(t,this.state[t],!1)},n.prototype.validate=function(){for(var e=this.getValues(),n=0;n<this.rows.length;n++)for(var r=this.rows[n],i=0;i<r.length;i++){var o=r[i],s=o.id,a=this.ripId(s)
if(o.required&&null==e[a])throw new Error("Campo "+o.label+": valore obbligatorio")
if(o.size&&null!=e[a]&&e[a].length>o.size)throw new Error("Campo "+o.label+': dimensione massima superata (massimo " + f.size + " caratteri)')
if(o.type&&null!=e[a]){var l=null,h=null
switch(o.type==t.WInputType.Date&&(e[a]=t.WUtil.toDate(e[a])),o.type){case t.WInputType.Number:h=new RegExp("^\\d+\\.\\d{1,2}$|^\\d*$"),h.test(e[a])||(l="Campo "+o.label+": valore non idoneo ("+e[a]+" non risulta numerico)")
break
case t.WInputType.Integer:h=new RegExp("^\\d*$"),h.test(e[a])||(l="Campo "+o.label+": valore non idoneo ("+e[a]+" non risulta intero)")
break
case t.WInputType.Email:h=new RegExp(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/),h.test(e[a])||(l="Campo "+o.label+": valore non idoneo ("+e[a]+" non risulta email)")
break
case t.WInputType.Ftp:h=new RegExp(/(((ftp:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/),h.test(e[a])||(l="Campo "+o.label+": valore non idoneo ("+e[a]+" non risulta URL FTP)")}if(null!=l)throw new Error(l)}}return e},n}(t.WComponent)
t.WFormPanel=g
var b=function(n){function r(t,e,i,o,s){void 0===e&&(e="WWindow")
var a=n.call(this,t||"*",e,s,"","",o)||this
return a.position=i,a.position||(a.position="bottom"),a.headerStyle=r.DEF_HEADER_STYLE,a.id&&"*"!=a.id&&$("#"+a.id).length&&$("#"+a.id).remove(),WuxDOM.onRender(function(t){a.mounted||a.mount(t.element)}),a}return __extends(r,n),r.prototype.onShow=function(t){this.handlers._onshow||(this.handlers._onshow=[]),this.handlers._onshow.push(t)},r.prototype.onHide=function(t){this.handlers._onhide||(this.handlers._onhide=[]),this.handlers._onhide.push(t)},r.prototype.onClose=function(t){this.handlers._onclose||(this.handlers._onclose=[]),this.handlers._onclose.push(t)},Object.defineProperty(r.prototype,"header",{get:function(){var t=this
return this.cntHeader?this.cntHeader:(this.cntHeader=new e("","modal-header",this.headerStyle),this.btnCloseHeader=new h(this.subId("bhc"),'<span aria-hidden="true" tabIndex="-1">&times;</span><span class="sr-only">Close</span>',void 0,"close",{op:.6}),this.btnCloseHeader.on("click",function(e){t.close()}),this.cntHeader.add(this.btnCloseHeader),this.cntHeader)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"body",{get:function(){return this.cntBody?this.cntBody:(this.cntBody=new e("",t.cls(this._classStyle)),this.cntBody)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"container",{get:function(){if(this.cntRoot)return this.cntRoot
var n="",r={}
return this.width&&(r.w=this.width),this.height&&(r.h=this.height),this.background&&(r.bg=this.background),this.color&&(r.c=this.color),"top"==this.position?this.gap?(r.ml=t.WUtil.getNumber(t.global.window_top,"ml")+this.gap,n=t.css(t.global.window_top,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)",t:this.gap},this._style,r)):n=t.css(t.global.window_top,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)"},this._style,r):this.gap?(r.ml=t.WUtil.getNumber(t.global.window_bottom,"ml")+this.gap,n=t.css(t.global.window_bottom,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)",bt:this.gap},this._style,r)):n=t.css(t.global.window_bottom,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)"},this._style,r),this.cntRoot=new e(this.id,this._classStyle,n,this._attributes),this.cntRoot},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.cntHeader?(this._title=t,this.cntHeader.getRoot().children(this.tagTitle+":first").text(t)):(this._title=t,this.header.add(this.buildTitle(t)))},enumerable:!0,configurable:!0}),r.prototype.show=function(t){if(this.beforeShow()&&(this.parent=t,this.mounted||WuxDOM.mount(this),this.root&&this.root.length&&(this.isShown=!0,this.isClosed=!1,this.root.show()),this.handlers._onshow))for(var e=0,n=this.handlers._onshow;e<n.length;e++){var r=n[e]
r(this.createEvent("_onshow"))}},r.prototype.hide=function(){if(this.isShown=!1,this.root&&this.root.length&&this.root.hide(),this.handlers._onhide)for(var t=0,e=this.handlers._onhide;t<e.length;t++){var n=e[t]
n(this.createEvent("_onhide"))}},r.prototype.close=function(){if(this.isClosed=!0,this.handlers._onclose)for(var t=0,e=this.handlers._onclose;t<e.length;t++){var n=e[t]
n(this.createEvent("_onclose"))}this.hide()},r.prototype.scroll=function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=4),!e||!this.root)return 0
var i=e instanceof t.WComponent?e.getRoot():e
if("top"==this.position){var o=$(document).scrollTop(),s=i.offset().top,a=s-o-2,l=this.root.height()
if(n&&l<n&&(l=n),a<l){var h=a-l
return o<h?$(document).scrollTop(0):$(document).scrollTop(o-h),h}}else{var o=$(document).scrollTop(),s=i.offset().top
if(!s){var u=i.position()
u&&(s=u.top)}var p=i.height()
p||(p=18)
var c=s+p,d=c-o+2,f=$(window).height(),l=this.root.height()
n&&l<n&&(l=n)
var g=f-l
if(d>g){var h=d-g+r
return $(document).scrollTop(o+h),h}}return 0},r.prototype.scrollY=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=4),"top"==this.position){var r=$(document).scrollTop(),i=t-2,o=this.root.height()
if(e&&o<e&&(o=e),i<o){var s=i-o
return r<s?$(document).scrollTop(0):$(document).scrollTop(r-s),s}}else{var r=$(document).scrollTop(),a=t+n/2+2,l=$(window).height(),o=this.root.height()
e&&o<e&&(o=e)
var h=l-o
if(a>h){var s=a-h+n
return $(document).scrollTop(r+s),s}}return 0},r.prototype.beforeShow=function(){return!0},r.prototype.onShown=function(){},r.prototype.onHidden=function(){},r.prototype.render=function(){return this.isShown=!1,this.isClosed=!1,this.cntHeader&&this.container.addContainer(this.cntHeader),this.cntBody&&this.container.addContainer(this.cntBody),this.cntRoot},r.prototype.componentWillUnmount=function(){this.isShown=!1,this.btnCloseHeader&&this.btnCloseHeader.unmount(),this.cntBody&&this.cntBody.unmount(),this.cntHeader&&this.cntHeader.unmount(),this.cntRoot&&this.cntRoot.unmount()},r.prototype.buildTitle=function(e){if(null==e)return""
if(this.tagTitle||(this.tagTitle="h3"),this.titleStyle){var n=t.style(this.titleStyle)
if(n)return"<"+this.tagTitle+' style="'+n+'">'+t.WUtil.toText(e)+"</"+this.tagTitle+">"}return"<"+this.tagTitle+">"+t.WUtil.toText(e)+"</"+this.tagTitle+">"},r.DEF_HEADER_STYLE={p:5,a:"center"},r}(t.WComponent)
t.WWindow=b}(WUX||(WUX={}))
